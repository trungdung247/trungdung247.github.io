"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9295],{29295:function(e,n,o){o.r(n);var t=o(91309),a=o(85893),l=o(67294),i=o(97616),r=o(5152),u=o.n(r),c=o(58673),s=o(98075),d=o(25617),f=o(61935),v=o(94055),p=o(4259),m=o(60413),h=o(15924),g={normal:{width:220,height:160},scale:{width:500,height:390}},k=u()(function(){return o.e(7385).then(o.bind(o,12851))},{loadableGenerated:{webpack:function(){return[12851]}}}),C=(0,l.memo)(function(e){var n,o,r,u,C=e.onChangeScene,b=h.sk?{}:window.languages||{},x=(0,l.useRef)(null),M=(0,d.v9)(f.AA),_=(0,d.v9)(f.g5),w=(0,t._)((0,c.gU)("state"),1)[0],j=(0,s.m)(),S=j.mapData,y=j.configMap,N=j.visiblePopup,P=j.sceneSelected,E=j.markerSelected,T=j.configDisplayBox,R=j.onCloseMap,L=j.onOpenPopup,B=j.onClosePopup,D=(0,l.useRef)(!1),I=(0,t._)((0,l.useState)(g.normal),2),O=I[0],A=I[1],U=(0,l.useCallback)(function(){var e;null===(e=x.current)||void 0===e||e.onFitBounds()},[]),Z=(0,l.useCallback)(function(){var e;null===(e=x.current)||void 0===e||e.onPanToMarker(E)},[E]);return(0,a.jsxs)(p.Yq,{bgColor:(null==y?void 0:y.bgColor)||i.xr.bgColor||"#000",position:(null==T?void 0:T.position)||"bottomRight",offsetTop:(null==T?void 0:T.offsetTop)||10,offsetBottom:(null==T?void 0:T.offsetBottom)||10,offsetRight:(null==T?void 0:T.offsetRight)||10,offsetLeft:(null==T?void 0:T.offsetLeft)||10,onMouseOver:function(){return A(g.scale)},onMouseLeave:function(){A(g.normal),setTimeout(function(){var e;E&&!D.current&&(null===(e=x.current)||void 0===e||e.onPanToMarker(E))},200)},style:{width:"".concat(O.width,"px"),height:"".concat(O.height,"px")},className:"".concat(w.isVisibleMap?"":"hide"," ").concat((null==M?void 0:M.selected)==="basekrpano"?"basekrpano":(null==M?void 0:M.selected)==="custom1"?"custom1":(null==M?void 0:M.selected)==="wall"?"wall":"default"),children:[(0,a.jsxs)(p.Nh,{style:{zIndex:O.width===g.scale.width?1:-1,opacity:O.width===g.scale.width?1:0},onMouseOver:function(e){e.stopPropagation(),D.current=!0},onMouseLeave:function(e){e.stopPropagation(),D.current=!1},children:[(0,a.jsx)("div",{className:"--left"}),(0,a.jsxs)("div",{className:"--right",children:[(0,a.jsx)(v.default,{title:null===(n=b[_])||void 0===n?void 0:n.actionMarkerCenter,placement:"top",children:(0,a.jsx)("div",{className:"action--item",onClick:Z,children:(0,a.jsx)("i",{"aria-hidden":!0,className:"far fa-crosshairs"})})}),(0,a.jsx)(v.default,{title:null===(o=b[_])||void 0===o?void 0:o.actionMarkerCover,placement:"top",children:(0,a.jsx)("div",{className:"action--item",onClick:U,children:(0,a.jsx)("i",{"aria-hidden":!0,className:"far fa-ball-pile"})})}),(0,a.jsx)(v.default,{title:null===(r=b[_])||void 0===r?void 0:r.actionMarkerExpand,placement:"top",children:(0,a.jsx)("div",{className:"action--item",onClick:L,children:(0,a.jsx)("i",{"aria-hidden":!0,className:"far fa-expand"})})}),(0,a.jsx)(v.default,{title:null===(u=b[_])||void 0===u?void 0:u.actionMarkerClose,placement:"top",children:(0,a.jsx)("div",{className:"action--item",onClick:R,children:(0,a.jsx)("i",{"aria-hidden":!0,className:"far fa-times"})})})]})]}),(0,a.jsx)(m.Z,{ref:x,mapData:S,sceneSelected:P,markerSelected:E,configMap:y,onChangeScene:C}),N&&(0,a.jsx)(k,{visible:N,markerSelected:E,mapData:S,configMap:y,onChangeScene:C,onCancel:B})]})});n.default=C},60413:function(e,n,o){var t=o(72253),a=o(91309),l=o(85893),i=o(67294),r=o(25617),u=o(5152),c=o.n(u),s=o(97616),d=o(25827),f=o(61935),v=o(4259),p=o(46118),m=c()(function(){return o.e(3950).then(o.bind(o,13950))},{loadableGenerated:{webpack:function(){return[13950]}}}),h=(0,i.forwardRef)(function(e,n){var o=e.configMap,u=e.sceneSelected,c=e.mapData,h=e.markerSelected,g=e.onChangeScene,k=(0,i.useRef)(null),C=(0,a._)((0,i.useState)(!1),2),b=C[0],x=C[1],M=(0,r.v9)(f.U9),_=(0,i.useMemo)(function(){return(0,t._)({},s.xr.radar,null==o?void 0:o.radar)},[null==o?void 0:o.radar]),w=(0,i.useMemo)(function(){return(0,t._)({},s.xr.marker,null==o?void 0:o.marker)},[null==o?void 0:o.marker]),j=(0,i.useMemo)(function(){try{return(null==o?void 0:o.mapStyle)?JSON.parse((null==o?void 0:o.mapStyle)||"[]"):[]}catch(e){return[]}},[o]),S=(0,i.useCallback)(function(){var e=window;if(e.google){var n,o=new e.google.maps.LatLngBounds;null==c||null===(n=c.markers)||void 0===n||n.forEach(function(e){o.extend({lat:e.lat,lng:e.lng})}),k.current.fitBounds(o)}},[c]),y=(0,i.useCallback)(function(e){var n,o;null===(n=k.current)||void 0===n||n.panTo({lat:null==e?void 0:e.lat,lng:null==e?void 0:e.lng}),null===(o=k.current)||void 0===o||o.setZoom(18)},[]),N=(0,i.useCallback)(function(e,n){var o;if(null==n?void 0:null===(o=n.marker)||void 0===o?void 0:o.target_scene_id){var t=M.filter(function(e){var o;return e.id===(null==n?void 0:null===(o=n.marker)||void 0===o?void 0:o.target_scene_id)})[0];t&&g(t)}},[M,g]);return(0,i.useEffect)(function(){b&&(h?y(h):S())},[b,h]),(0,i.useImperativeHandle)(n,function(){return{onFitBounds:function(){return S()},onPanToMarker:function(e){return y(e)}}}),(0,l.jsx)(v.pu,{children:(0,l.jsx)(d.ZP,{bootstrapURLKeys:{key:p.env.NEXT_PUBLIC_GOOGLE_KEY||"AIzaSyAcwcJSrJ4_PqEIJoQCtC5RP988Eka0YE8"},draggable:!0,defaultCenter:{lat:0,lng:0},defaultZoom:12,options:function(){return{minZoom:2,panControl:!1,mapTypeControl:!1,scrollwheel:!0,streetViewControl:!1,mapTypeId:null==o?void 0:o.mapType,disableDefaultUI:!0,styles:j}},scrollWheelZoom:"center",yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){var n=e.map;k.current=n,x(!0)},onChildClick:N,children:null==c?void 0:c.markers.map(function(e){return(0,l.jsx)(m,{lat:e.lat,lng:e.lng,marker:e,configRadar:_,configMarker:w,northRadar:(null==u?void 0:u.north_ath)||0,isTurnOnRadar:!!_.isEnabled,isActive:(null==h?void 0:h.id)===e.id},e.id)})})})});n.Z=(0,i.memo)(h)},98075:function(e,n,o){o.d(n,{m:function(){return useEventMap}});var t=o(72253),a=o(14932),l=o(91309),i=o(67294),r=o(25617),u=o(58673),c=o(61935),useEventMap=function(){var e=(0,r.v9)(c.CE),n=(0,r.v9)(c.F7),o=(0,r.v9)(c.Y2),s=(0,l._)((0,u.gU)("state"),2)[1],d=(0,i.useMemo)(function(){var n;return(null==e?void 0:null===(n=e.markers)||void 0===n?void 0:n.filter(function(e){return e.target_scene_id===(null==o?void 0:o.id)})[0])||void 0},[e,null==o?void 0:o.id]),f=(0,i.useMemo)(function(){var e;return(null==n?void 0:null===(e=n.map)||void 0===e?void 0:e.type)==="panel"?null==n?void 0:n.map:void 0},[null==n?void 0:n.map]),v=(0,i.useMemo)(function(){var e;return(null==n?void 0:null===(e=n.map)||void 0===e?void 0:e.type)==="box"?(0,t._)({},{offsetBottom:48,offsetLeft:10,offsetRight:10,offsetTop:10},null==n?void 0:n.map):void 0},[null==n?void 0:n.map]),p=(0,l._)((0,i.useState)(!1),2),m=p[0],h=p[1],g=(0,i.useCallback)(function(){s(function(e){return(0,a._)((0,t._)({},e),{isVisibleMap:!1})})},[s]),k=(0,i.useCallback)(function(){return h(!0)},[]),C=(0,i.useCallback)(function(){return h(!1)},[]);return(0,i.useMemo)(function(){return{visiblePopup:m,sceneSelected:o,markerSelected:d,configMap:n,configDisplayBox:v,mapData:e,configDisplayPanel:f,onCloseMap:g,onClosePopup:C,onOpenPopup:k}},[m,o,d,n,v,e,f,g,C,k])}}}]);
//# sourceMappingURL=9295.2c3dee2ffb8c1042.js.map