{"version":3,"file":"static/chunks/pages/export-full-b2dcac5e84807032.js","mappings":"sFACA,CAAAA,OAAAC,QAAA,CAAAD,OAAAC,QAAA,MAAAC,IAAA,EACA,eACA,WACA,OAAeC,EAAQ,MACvB,EACA,mPCwBMC,EAAOC,IAAQ,kBAAMC,QAAAC,GAAA,EAAAJ,EAAAK,CAAA,OAAAL,EAAAK,CAAA,OAAAL,EAAAK,CAAA,SAAAC,IAAA,CAAAN,EAAAO,IAAA,CAAAP,EAAA,gEACzBQ,QAAS,iBAAM,GAAAC,EAAAC,GAAA,EAACC,OAAAA,UAAK,mBAsMvBC,CAAAA,EAAA,QAnMA,WACE,IAwGgCC,EAKeA,EAG3BA,EAhHdC,EAASC,CAAAA,EAAAA,EAAAA,SAAAA,IACTC,EAAWC,CAAAA,EAAAA,EAAAA,EAAAA,IAEXJ,EAASK,CAAAA,EAAAA,EAAAA,EAAAA,EAAYC,EAAAA,EAAYA,EACjCC,EAAQF,CAAAA,EAAAA,EAAAA,EAAAA,EAAYG,EAAAA,EAAkBA,EACtCC,EAAYJ,CAAAA,EAAAA,EAAAA,EAAAA,EAAYK,EAAAA,EAAeA,EACvCC,EAAWN,CAAAA,EAAAA,EAAAA,EAAAA,EAAYO,EAAAA,EAAqBA,EAC5CC,EAAYR,CAAAA,EAAAA,EAAAA,EAAAA,EAAYS,EAAAA,EAAsBA,EAC9CC,EAAcV,CAAAA,EAAAA,EAAAA,EAAAA,EAAYW,EAAAA,EAAuBA,EACjDC,EAAgBZ,CAAAA,EAAAA,EAAAA,EAAAA,EAAYa,EAAAA,EAAyBA,EACrDC,EAAcd,CAAAA,EAAAA,EAAAA,EAAAA,EAAYe,EAAAA,EAA6BA,EACvDC,EAAiBhB,CAAAA,EAAAA,EAAAA,EAAAA,EAAYiB,EAAAA,EAA0BA,EACvDC,EAAoBlB,CAAAA,EAAAA,EAAAA,EAAAA,EAAYmB,EAAAA,EAA4BA,EAC5DC,EAAuBpB,CAAAA,EAAAA,EAAAA,EAAAA,EAAYqB,EAAAA,EAA+BA,EAElEC,EAAmBC,CAAAA,EAAAA,EAAAA,OAAAA,EACvB,kBAAMnB,EAAUoB,MAAM,CAACC,SAAAA,CAAAA,SAAQA,EAAKC,EAAE,GAAKZ,GAAY,CAAC,EAAE,EAAIa,KAAAA,GAC9D,CAACvB,EAAWU,EAAY,EAGpBc,EAASL,CAAAA,EAAAA,EAAAA,OAAAA,EAAQ,WACrB,IAAMM,EAAY,EAAE,CA4BpB,MA3BIrB,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAWsB,GAAG,GAChBD,EAAKhD,IAAI,CAAC,CACRkD,IAAKvB,MAAAA,EAAAA,KAAAA,EAAAA,EAAWsB,GAAG,CACnBE,MAAO,IACPC,OAAQ,IACRC,IAAK1B,MAAAA,EAAAA,KAAAA,EAAAA,EAAW2B,IAAI,GAGpBvB,GACFiB,EAAKhD,IAAI,CAAC,CACRkD,IAAKnB,EACLoB,MAAO,IACPC,OAAQ,IACRC,IAAK,EACP,GAEEhB,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAmBY,GAAG,GACxBD,EAAKhD,IAAI,CAAC,CACRkD,IACEb,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAmBkB,SAAS,GAC5BlB,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAmBmB,WAAW,GAC9BnB,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAmBY,GAAG,EACxBE,MAAO,IACPC,OAAQ,IACRC,IAAKhB,MAAAA,EAAAA,KAAAA,EAAAA,EAAmBiB,IAAI,GAGzBN,CACT,EAAG,CAACrB,EAAWI,EAAeM,EAAkB,EAqChD,MAnCAoB,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,WACR,GAAIlC,GAAaA,EAAUmC,MAAM,CAAE,CAEjC,IAAMC,EAASC,OAAOC,WAAW,CAACC,IADNC,gBAAgBjE,OAAOkE,QAAQ,CAACC,MAAM,EAChBC,OAAO,IAErDC,EAAQ1B,EACR,GAAA2B,EAAAC,CAAA,KAAK5B,GACL,GAAA2B,EAAAC,CAAA,KAAK9C,CAAS,CAAC,EAAE,EASrB,GAPIR,EAAOuD,KAAK,CAACH,KAAK,EACpBA,CAAAA,EAAQ,GAAAC,EAAAC,CAAA,KACH9C,EAAUoB,MAAM,CAACC,SAAAA,CAAAA,SAAQA,EAAKC,EAAE,GAAK9B,EAAOuD,KAAK,CAACH,KAAK,EAAC,CAAC,EAAE,GAC3D,GAAAC,EAAAC,CAAA,KACA9C,CAAS,CAAC,EAAE,GAGfoC,EAAOQ,KAAK,CAAE,CAChB,IAAMI,EACJhD,EAAUiD,IAAI,CAAC5B,SAAAA,CAAAA,SAAQA,EAAKC,EAAE,GAAKc,EAAOQ,KAAK,IAAK5C,CAAS,CAAC,EAAE,CAC9DgD,GAAcJ,CAAAA,EAAQ,GAAAC,EAAAC,CAAA,KAAKE,EAAAA,CACjC,CAGAJ,EAAMM,MAAM,CAAG,GAAAL,EAAAC,CAAA,KAAKF,MAAAA,EAAAA,KAAAA,EAAAA,EAAOM,MAAM,GAAM,CAAC,EACxCN,EAAMM,MAAM,CAAG,GAAAC,EAAAL,CAAA,KAAAD,EAAAC,CAAA,KACVF,EAAMM,MAAM,GACfE,eAAgBpC,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAsBqC,MAAM,GAAI,GAChDC,2BACEtC,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAsBuC,eAAe,GAAI,IAE7C7D,EAAS8D,EAAAA,EAAOA,CAACC,gBAAgB,CAACb,GACpC,CAEF,EAAG,CAAC5C,EAAUmC,MAAM,CAAC,EAGnB,GAAAhD,EAAAuE,IAAA,EAAAvE,EAAAwE,QAAA,YACGpE,GACC,GAAAJ,EAAAC,GAAA,EAACwE,EAAAA,EAAOA,CAAAA,CACN9D,MAAOI,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAUJ,KAAK,GAAIA,EAC1B+D,YAAa3D,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAU2D,WAAW,GAAItE,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAQsE,WAAW,EACzDC,mBAAoB,CAClB,CACEC,SAAU,OACVC,QAASzE,MAAAA,EAAAA,KAAAA,EAAAA,EAAQwC,IAAI,EAEvB,CACEA,KAAM,mBACNiC,QAASzE,MAAAA,EAAAA,KAAAA,EAAAA,EAAQwC,IAAI,EAExB,CACDkC,mBACE/D,CAAAA,MAAAA,IAAAA,EAAUgE,OAAO,GAAK3E,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAQ4E,aAAa,GAArB5E,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAuB6E,QAAQ,CAAC,WAYlD,GAAAC,EAAAvB,CAAA,EAAIwB,EAAAA,EAAoBA,EAAAA,MAAAA,CAAE,GAAAD,EAAAvB,CAAA,EAAGyB,EAAAA,EAAqBA,GAXlD,GAAAF,EAAAvB,CAAA,EACK,CACD,CACE0B,IAAK,gBACLC,KAAMvE,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAUgE,OAAO,GAAI3E,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAQ2E,OAAO,GAAf3E,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAiBmC,GAAG,CACjD,EACD,EAAAgD,MAAA,CACD,GAAAL,EAAAvB,CAAA,EAAIvD,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAQ4E,aAAa,GAArB5E,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAuB6E,QAAQ,CAAC,WAChCG,EAAAA,EAAqBA,CACrB,EAAE,GAIdI,UAAW,CACTC,KAAM,UACNjD,IAAKpC,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAQ4E,aAAa,EAAG3E,EAAOqF,MAAM,CAC1C/E,MAAOI,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAUJ,KAAK,GAAIA,EAC1B+D,YAAa3D,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAU2D,WAAW,GAAItE,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAQsE,WAAW,EACzDrC,OAAAA,EACAsD,UAAWvF,MAAAA,EAAAA,KAAAA,EAAAA,EAAQwC,IAAI,CACvBgD,QAAS,CACPC,SAAUxF,EAAOuD,KAAK,CAACiC,QAAQ,CAEnC,EACAC,SAAU,CACRC,MAAOC,kBACT,IAGH7E,GACC,GAAAnB,EAAAuE,IAAA,EAAAvE,EAAAwE,QAAA,YACE,GAAAxE,EAAAC,GAAA,EAACgG,IAAMA,CACL1D,IAAK,+CAA2DgD,MAAA,CAAZpE,KAEtD,GAAAnB,EAAAC,GAAA,EAACgG,IAAMA,CACL9D,GAAG,SACH+D,wBAAyB,CACvBC,OAAQ,uMAIwBZ,MAAA,CAAZpE,EAAY,oGAIlC,OAILM,GACC,GAAAzB,EAAAuE,IAAA,EAAAvE,EAAAwE,QAAA,YACE,GAAAxE,EAAAC,GAAA,EAACgG,IAAMA,CACL1D,IAAK,+CAA8DgD,MAAA,CAAf9D,KAEtD,GAAAzB,EAAAC,GAAA,EAACgG,IAAMA,CACL9D,GAAG,WACH+D,wBAAyB,CACvBC,OAAQ,yMAK2BZ,MAAA,CAAf9D,EAAe,sBAErC,OAKN,GAAAzB,EAAAC,GAAA,EAACT,EAAAA,CAAK4G,SAAQ,OAGpB,wBCpNAC,EAAAC,OAAA,CAAA/G,EAAA","sources":["webpack://_N_E/?2c6e","webpack://_N_E/./pages/export-full/index.tsx","webpack://_N_E/./node_modules/next/script.js","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/export-full\",\n      function () {\n        return require(\"private-next-pages/export-full/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/export-full\"])\n      });\n    }\n  ","/* eslint-disable react/no-danger */\nimport path from 'path';\nimport fsPromises from 'fs/promises';\nimport dynamic from 'next/dynamic';\nimport { useEffect, useMemo } from 'react';\nimport { actions, GET_DETAIL_PROJECT } from '@containers/Home/slice';\nimport { NextSeo } from 'next-seo';\nimport { useRouter } from 'next/router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectConfigLittlePlanetProject,\n  selectConfigFirstSceneProject,\n  selectFirstSceneMediaProject,\n  selectGATagTrackingProject,\n  selectFeatureImageProject,\n  selectGATrackingProject,\n  selectThumbnailProject,\n  selectMetaDataProject,\n  selectTitleProject,\n  selectListScene,\n  selectTenant,\n} from '@containers/Home/selectors';\nimport { SagaStore, wrapper } from 'store';\nimport Script from 'next/script';\nimport {\n  LIST_FAVICON_DEFAULT,\n  LIST_LINK_STYLE_SHEET,\n} from '@containers/Home/constants';\nimport { END } from 'redux-saga';\n\nconst Home = dynamic(() => import('containers/Home'), {\n  loading: () => <span>Loading</span>,\n});\n\nfunction ExportContainer() {\n  const router = useRouter();\n  const dispatch = useDispatch();\n\n  const tenant = useSelector(selectTenant);\n  const title = useSelector(selectTitleProject);\n  const listScene = useSelector(selectListScene);\n  const metadata = useSelector(selectMetaDataProject);\n  const thumbnail = useSelector(selectThumbnailProject);\n  const ga_tracking = useSelector(selectGATrackingProject);\n  const feature_image = useSelector(selectFeatureImageProject);\n  const first_scene = useSelector(selectConfigFirstSceneProject);\n  const ggtag_tracking = useSelector(selectGATagTrackingProject);\n  const first_scene_media = useSelector(selectFirstSceneMediaProject);\n  const config_little_planet = useSelector(selectConfigLittlePlanetProject);\n\n  const detailFirstScene = useMemo(\n    () => listScene.filter(item => item.id === first_scene)[0] || undefined,\n    [listScene, first_scene],\n  );\n\n  const images = useMemo(() => {\n    const imgs: any = [];\n    if (thumbnail?.src)\n      imgs.push({\n        url: thumbnail?.src,\n        width: 800,\n        height: 600,\n        alt: thumbnail?.name,\n      });\n\n    if (feature_image)\n      imgs.push({\n        url: feature_image,\n        width: 800,\n        height: 600,\n        alt: '',\n      });\n\n    if (first_scene_media?.src)\n      imgs.push({\n        url:\n          first_scene_media?.src_thumb ||\n          first_scene_media?.src_preview ||\n          first_scene_media?.src,\n        width: 800,\n        height: 600,\n        alt: first_scene_media?.name,\n      });\n\n    return imgs;\n  }, [thumbnail, feature_image, first_scene_media]);\n\n  useEffect(() => {\n    if (listScene && listScene.length) {\n      const urlSearchParams = new URLSearchParams(window.location.search);\n      const params = Object.fromEntries(urlSearchParams.entries());\n\n      let scene = detailFirstScene\n        ? { ...detailFirstScene }\n        : { ...listScene[0] };\n\n      if (router.query.scene)\n        scene = {\n          ...listScene.filter(item => item.id === router.query.scene)[0],\n        } || {\n          ...listScene[0],\n        };\n\n      if (params.scene) {\n        const sceneMatched =\n          listScene.find(item => item.id === params.scene) || listScene[0];\n        if (sceneMatched) scene = { ...sceneMatched };\n      }\n\n      // NOTE: add intro little planet for first scene loaded\n      scene.config = { ...scene?.config } || {};\n      scene.config = {\n        ...scene.config,\n        isLittlePlanet: config_little_planet?.enable || false,\n        timeTransitionLittlePlanet:\n          config_little_planet?.transition_time || 2.0,\n      };\n      dispatch(actions.setSceneSelected(scene));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [listScene.length]);\n\n  return (\n    <>\n      {tenant && (\n        <NextSeo\n          title={metadata?.title || title}\n          description={metadata?.description || tenant?.description}\n          additionalMetaTags={[\n            {\n              property: 'name',\n              content: tenant?.name,\n            },\n            {\n              name: 'application-name',\n              content: tenant?.name,\n            },\n          ]}\n          additionalLinkTags={\n            metadata?.favicon || !tenant?.domain_public?.includes('panoee')\n              ? [\n                  ...[\n                    {\n                      rel: 'shortcut icon',\n                      href: metadata?.favicon || tenant?.favicon?.src,\n                    },\n                  ],\n                  ...(tenant?.domain_public?.includes('panoee')\n                    ? LIST_LINK_STYLE_SHEET\n                    : []),\n                ]\n              : [...LIST_FAVICON_DEFAULT, ...LIST_LINK_STYLE_SHEET]\n          }\n          openGraph={{\n            type: 'website',\n            url: tenant?.domain_public + router.asPath,\n            title: metadata?.title || title,\n            description: metadata?.description || tenant?.description,\n            images,\n            site_name: tenant?.name,\n            profile: {\n              username: router.query.username as string,\n            },\n          }}\n          facebook={{\n            appId: process.env.NEXT_PUBLIC_FB_APP_ID || '2086263614924092',\n          }}\n        />\n      )}\n      {ga_tracking && (\n        <>\n          <Script\n            src={`https://www.googletagmanager.com/gtag/js?id=${ga_tracking}`}\n          />\n          <Script\n            id=\"gg-tag\"\n            dangerouslySetInnerHTML={{\n              __html: `\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', '${ga_tracking}', {\n                  page_path: window.location.pathname,\n                });\n              `,\n            }}\n          />\n        </>\n      )}\n      {ggtag_tracking && (\n        <>\n          <Script\n            src={`https://www.googletagmanager.com/gtag/js?id=${ggtag_tracking}`}\n          />\n          <Script\n            id=\"gg-tag-1\"\n            dangerouslySetInnerHTML={{\n              __html: `\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n\n                gtag('config', '${ggtag_tracking}');\n              `,\n            }}\n          />\n        </>\n      )}\n\n      <Home isExport />\n    </>\n  );\n}\n\nexport const getStaticProps = wrapper.getStaticProps(store => async () => {\n  const filePath = path.join(process.cwd(), '/public/db.json');\n  const data = await fsPromises.readFile(filePath, 'utf8');\n  try {\n    await store.dispatch(GET_DETAIL_PROJECT.success(JSON.parse(data)));\n    await store.dispatch(END);\n    await (store as SagaStore).sagaTask?.toPromise();\n  } catch (err) {\n    console.log(err);\n  }\n  return {\n    props: {},\n  };\n});\n\nexport default ExportContainer;\n","module.exports = require('./dist/client/script')\n"],"names":["window","__NEXT_P","push","__webpack_require__","Home","dynamic","Promise","all","e","then","bind","loading","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","span","__webpack_exports__","tenant","router","useRouter","dispatch","useDispatch","useSelector","selectTenant","title","selectTitleProject","listScene","selectListScene","metadata","selectMetaDataProject","thumbnail","selectThumbnailProject","ga_tracking","selectGATrackingProject","feature_image","selectFeatureImageProject","first_scene","selectConfigFirstSceneProject","ggtag_tracking","selectGATagTrackingProject","first_scene_media","selectFirstSceneMediaProject","config_little_planet","selectConfigLittlePlanetProject","detailFirstScene","useMemo","filter","item","id","undefined","images","imgs","src","url","width","height","alt","name","src_thumb","src_preview","useEffect","length","params","Object","fromEntries","urlSearchParams","URLSearchParams","location","search","entries","scene","_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__","_","query","sceneMatched","find","config","_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_11__","isLittlePlanet","enable","timeTransitionLittlePlanet","transition_time","actions","setSceneSelected","jsxs","Fragment","NextSeo","description","additionalMetaTags","property","content","additionalLinkTags","favicon","domain_public","includes","_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__","LIST_FAVICON_DEFAULT","LIST_LINK_STYLE_SHEET","rel","href","concat","openGraph","type","asPath","site_name","profile","username","facebook","appId","process","Script","dangerouslySetInnerHTML","__html","isExport","module","exports"],"sourceRoot":""}