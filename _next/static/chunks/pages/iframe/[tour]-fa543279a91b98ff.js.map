{"version":3,"file":"static/chunks/pages/iframe/[tour]-fa543279a91b98ff.js","mappings":"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","sources":["webpack://_N_E/?3ac7","webpack://_N_E/./pages/iframe/[tour]/index.tsx","webpack://_N_E/./node_modules/next/script.js","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/iframe/[tour]\",\n      function () {\n        return require(\"private-next-pages/iframe/[tour]/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/iframe/[tour]\"])\n      });\n    }\n  ","/* eslint-disable react/no-danger */\nimport dynamic from 'next/dynamic';\nimport { END } from 'redux-saga';\nimport { useEffect, useMemo } from 'react';\nimport { actions, GET_DETAIL_PROJECT } from '@containers/Home/slice';\nimport { wrapper, SagaStore } from 'store';\nimport { NextSeo } from 'next-seo';\nimport { useRouter } from 'next/router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectConfigLittlePlanetProject,\n  selectConfigFirstSceneProject,\n  selectFirstSceneMediaProject,\n  selectGATagTrackingProject,\n  selectFeatureImageProject,\n  selectGATrackingProject,\n  selectThumbnailProject,\n  selectMetaDataProject,\n  selectTitleProject,\n  selectListScene,\n  selectTenant,\n} from '@containers/Home/selectors';\nimport Script from 'next/script';\nimport {\n  LIST_FAVICON_DEFAULT,\n  LIST_LINK_STYLE_SHEET,\n} from '@containers/Home/constants';\nimport { parse } from 'cookie';\nimport { KEY_COOKIE } from '@type/customType';\n\nconst Home = dynamic(() => import('containers/Home'), {\n  loading: () => <span>Loading</span>,\n});\n\ninterface Props {\n  passwordTourCookie?: string;\n  listProjectGuardOpenedCookie?: string;\n  listFormCaptureOpenedCookie?: string;\n}\n\nfunction PublicContainer({\n  passwordTourCookie,\n  listProjectGuardOpenedCookie,\n  listFormCaptureOpenedCookie,\n}: Props) {\n  const router = useRouter();\n  const dispatch = useDispatch();\n\n  const tenant = useSelector(selectTenant);\n  const title = useSelector(selectTitleProject);\n  const listScene = useSelector(selectListScene);\n  const metadata = useSelector(selectMetaDataProject);\n  const thumbnail = useSelector(selectThumbnailProject);\n  const ga_tracking = useSelector(selectGATrackingProject);\n  const feature_image = useSelector(selectFeatureImageProject);\n  const first_scene = useSelector(selectConfigFirstSceneProject);\n  const ggtag_tracking = useSelector(selectGATagTrackingProject);\n  const first_scene_media = useSelector(selectFirstSceneMediaProject);\n  const config_little_planet = useSelector(selectConfigLittlePlanetProject);\n\n  const detailFirstScene = useMemo(\n    () => listScene.filter(item => item.id === first_scene)[0] || undefined,\n    [listScene, first_scene],\n  );\n\n  const images = useMemo(() => {\n    const imgs: any = [];\n    if (thumbnail?.src)\n      imgs.push({\n        url: thumbnail?.src,\n        width: 800,\n        height: 600,\n        alt: thumbnail?.name,\n      });\n\n    if (feature_image)\n      imgs.push({\n        url: feature_image,\n        width: 800,\n        height: 600,\n        alt: '',\n      });\n\n    if (first_scene_media?.src)\n      imgs.push({\n        url:\n          first_scene_media?.src_thumb ||\n          first_scene_media?.src_preview ||\n          first_scene_media?.src,\n        width: 800,\n        height: 600,\n        alt: first_scene_media?.name,\n      });\n\n    return imgs;\n  }, [thumbnail, feature_image, first_scene_media]);\n\n  useEffect(() => {\n    if (listScene && listScene.length) {\n      let scene = detailFirstScene\n        ? { ...detailFirstScene }\n        : { ...listScene[0] };\n      if (router.query.scene) {\n        const id = router.query.scene.length\n          ? router.query.scene[0]\n          : router.query.scene;\n        const sceneMatched = id\n          ? listScene.find(item => item.id === id)\n          : listScene[0];\n        if (sceneMatched) scene = sceneMatched;\n      }\n      // NOTE: add intro little planet for first scene loaded\n      scene.config = scene?.config || {};\n      scene.config = {\n        ...scene.config,\n        isLittlePlanet: config_little_planet?.enable || false,\n        timeTransitionLittlePlanet: config_little_planet?.transition_time || 2,\n      };\n      dispatch(actions.setSceneSelected(scene));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [listScene.length]);\n\n  return (\n    <>\n      {tenant && (\n        <NextSeo\n          title={metadata?.title || title}\n          description={metadata?.description || tenant?.description}\n          additionalMetaTags={[\n            {\n              property: 'name',\n              content: tenant?.name,\n            },\n            {\n              name: 'application-name',\n              content: tenant?.name,\n            },\n          ]}\n          additionalLinkTags={\n            metadata?.favicon || !tenant?.domain_public?.includes('panoee')\n              ? [\n                  ...[\n                    {\n                      rel: 'shortcut icon',\n                      href: metadata?.favicon || tenant?.favicon?.src,\n                    },\n                  ],\n                  ...(tenant?.domain_public?.includes('panoee')\n                    ? LIST_LINK_STYLE_SHEET\n                    : []),\n                ]\n              : [...LIST_FAVICON_DEFAULT, ...LIST_LINK_STYLE_SHEET]\n          }\n          openGraph={{\n            type: 'website',\n            url: tenant?.domain_public + router.asPath,\n            title: metadata?.title || title,\n            description: metadata?.description || tenant?.description,\n            images,\n            site_name: tenant?.name,\n            profile: {\n              username: router.query.username as string,\n            },\n          }}\n          facebook={{\n            appId: process.env.NEXT_PUBLIC_FB_APP_ID || '2086263614924092',\n          }}\n        />\n      )}\n      {ga_tracking && (\n        <>\n          <Script\n            src={`https://www.googletagmanager.com/gtag/js?id=${ga_tracking}`}\n          />\n          <Script\n            id=\"gg-tag\"\n            dangerouslySetInnerHTML={{\n              __html: `\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', '${ga_tracking}', {\n                  page_path: window.location.pathname,\n                });\n              `,\n            }}\n          />\n        </>\n      )}\n      {ggtag_tracking && (\n        <>\n          <Script\n            src={`https://www.googletagmanager.com/gtag/js?id=${ggtag_tracking}`}\n          />\n          <Script\n            id=\"gg-tag-1\"\n            dangerouslySetInnerHTML={{\n              __html: `\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n\n                gtag('config', '${ggtag_tracking}');\n              `,\n            }}\n          />\n        </>\n      )}\n      <Home\n        isPublic\n        isPreventChangeUrl\n        passwordTourCookie={passwordTourCookie}\n        listProjectGuardOpenedCookie={listProjectGuardOpenedCookie}\n        listFormCaptureOpenedCookie={listFormCaptureOpenedCookie}\n      />\n    </>\n  );\n}\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  store =>\n    async ({ req, query }) => {\n      if (query.tour) {\n        const cookies = parse(req.headers.cookie || '');\n        store.dispatch(\n          GET_DETAIL_PROJECT({\n            id: query.tour,\n            host: req.headers.host || '',\n            isPublic: true,\n          }),\n        );\n        store.dispatch(END);\n        await (store as SagaStore).sagaTask?.toPromise();\n        return {\n          props: {\n            listProjectGuardOpenedCookie: cookies\n              ? cookies[KEY_COOKIE.LIST_PROJECT_PASS_GUARD] || null\n              : null,\n            passwordTourCookie: cookies\n              ? cookies[KEY_COOKIE.PASSWORD_TOUR] || null\n              : null,\n            listFormCaptureOpenedCookie: cookies\n              ? cookies[KEY_COOKIE.LIST_FORM_CAPTURE_OPENED] || null\n              : null,\n          },\n        };\n      }\n      return {\n        notFound: true,\n      };\n    },\n);\n\nexport default PublicContainer;\n","module.exports = require('./dist/client/script')\n"],"names":["window","__NEXT_P","push","__webpack_require__","Home","dynamic","Promise","all","e","then","bind","loading","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","span","__webpack_exports__","param","tenant","passwordTourCookie","listProjectGuardOpenedCookie","listFormCaptureOpenedCookie","router","useRouter","dispatch","useDispatch","useSelector","selectTenant","title","selectTitleProject","listScene","selectListScene","metadata","selectMetaDataProject","thumbnail","selectThumbnailProject","ga_tracking","selectGATrackingProject","feature_image","selectFeatureImageProject","first_scene","selectConfigFirstSceneProject","ggtag_tracking","selectGATagTrackingProject","first_scene_media","selectFirstSceneMediaProject","config_little_planet","selectConfigLittlePlanetProject","detailFirstScene","useMemo","filter","item","id","undefined","images","imgs","src","url","width","height","alt","name","src_thumb","src_preview","useEffect","length","scene","_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__","_","query","sceneMatched","find","config","_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_11__","isLittlePlanet","enable","timeTransitionLittlePlanet","transition_time","actions","setSceneSelected","jsxs","Fragment","NextSeo","description","additionalMetaTags","property","content","additionalLinkTags","favicon","domain_public","includes","_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__","LIST_FAVICON_DEFAULT","LIST_LINK_STYLE_SHEET","rel","href","concat","openGraph","type","asPath","site_name","profile","username","facebook","appId","process","Script","dangerouslySetInnerHTML","__html","isPublic","isPreventChangeUrl","module","exports"],"sourceRoot":""}