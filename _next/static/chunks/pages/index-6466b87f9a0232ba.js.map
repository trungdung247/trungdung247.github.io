{"version":3,"file":"static/chunks/pages/index-6466b87f9a0232ba.js","mappings":"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","sources":["webpack://_N_E/","webpack://_N_E/./pages/index.tsx","webpack://_N_E/./node_modules/next/script.js","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return require(\"private-next-pages/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  ","/* eslint-disable react/no-danger */\nimport dynamic from 'next/dynamic';\nimport { END } from 'redux-saga';\nimport { useEffect, useMemo } from 'react';\nimport { actions, GET_DETAIL_PROJECT } from '@containers/Home/slice';\nimport { wrapper, SagaStore } from 'store';\nimport { NextSeo } from 'next-seo';\nimport { useRouter } from 'next/router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectConfigLittlePlanetProject,\n  selectConfigFirstSceneProject,\n  selectFirstSceneMediaProject,\n  selectGATagTrackingProject,\n  selectThumbnailProject,\n  selectGATrackingProject,\n  selectListSceneByGroup,\n  selectMetaDataProject,\n  selectTitleProject,\n  selectFeatureImageProject,\n  selectTenant,\n} from '@containers/Home/selectors';\nimport Script from 'next/script';\nimport {\n  LIST_FAVICON_DEFAULT,\n  LIST_LINK_STYLE_SHEET,\n} from '@containers/Home/constants';\nimport { parse } from 'cookie';\nimport { KEY_COOKIE } from '@type/customType';\n\nconst Home = dynamic(() => import('containers/Home'), {\n  loading: () => <span>Loading</span>,\n});\n\ninterface Props {\n  host?: string;\n  passwordTourCookie?: string;\n  listProjectGuardOpenedCookie?: string;\n  listFormCaptureOpenedCookie?: string;\n}\n\nfunction PublicContainer({\n  host,\n  passwordTourCookie,\n  listProjectGuardOpenedCookie,\n  listFormCaptureOpenedCookie,\n}: Props) {\n  const router = useRouter();\n  const dispatch = useDispatch();\n\n  const tenant = useSelector(selectTenant);\n  const title = useSelector(selectTitleProject);\n  const metadata = useSelector(selectMetaDataProject);\n  const listScene = useSelector(selectListSceneByGroup);\n  const thumbnail = useSelector(selectThumbnailProject);\n  const ga_tracking = useSelector(selectGATrackingProject);\n  const feature_image = useSelector(selectFeatureImageProject);\n  const first_scene = useSelector(selectConfigFirstSceneProject);\n  const ggtag_tracking = useSelector(selectGATagTrackingProject);\n  const first_scene_media = useSelector(selectFirstSceneMediaProject);\n  const config_little_planet = useSelector(selectConfigLittlePlanetProject);\n\n  const detailFirstScene = useMemo(\n    () => listScene.filter(item => item.id === first_scene)[0] || undefined,\n    [listScene, first_scene],\n  );\n\n  const images = useMemo(() => {\n    const imgs: any = [];\n    if (thumbnail?.src)\n      imgs.push({\n        url: thumbnail?.src,\n        width: 800,\n        height: 600,\n        alt: thumbnail?.name,\n      });\n\n    if (feature_image)\n      imgs.push({\n        url: feature_image,\n        width: 800,\n        height: 600,\n        alt: '',\n      });\n\n    if (first_scene_media?.src)\n      imgs.push({\n        url:\n          first_scene_media?.src_thumb ||\n          first_scene_media?.src_preview ||\n          first_scene_media?.src,\n        width: 800,\n        height: 600,\n        alt: first_scene_media?.name,\n      });\n\n    return imgs;\n  }, [thumbnail, feature_image, first_scene_media]);\n\n  useEffect(() => {\n    if (listScene && listScene.length) {\n      const urlSearchParams = new URLSearchParams(window.location.search);\n      const params = Object.fromEntries(urlSearchParams.entries());\n\n      let scene = detailFirstScene\n        ? { ...detailFirstScene }\n        : { ...listScene[0] };\n\n      if (router.query.scene)\n        scene = {\n          ...listScene.filter(item => item.id === router.query.scene)[0],\n        } || {\n          ...listScene[0],\n        };\n\n      if (params.scene) {\n        const sceneMatched =\n          listScene.find(item => item.id === params.scene) || listScene[0];\n        if (sceneMatched) scene = { ...sceneMatched };\n      }\n\n      // NOTE: add intro little planet for first scene loaded\n      scene.config = scene?.config || {};\n      scene.config = {\n        ...scene.config,\n        isLittlePlanet: config_little_planet?.enable || false,\n        timeTransitionLittlePlanet: config_little_planet?.transition_time || 2,\n      };\n      dispatch(actions.setSceneSelected(scene));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [listScene.length]);\n\n  return (\n    <>\n      {tenant && (\n        <NextSeo\n          title={metadata?.title || title}\n          description={metadata?.description || tenant?.description}\n          canonical={host}\n          additionalMetaTags={[\n            {\n              property: 'name',\n              content: tenant?.name,\n            },\n            {\n              name: 'application-name',\n              content: tenant?.name,\n            },\n          ]}\n          additionalLinkTags={\n            metadata?.favicon || !tenant?.domain_public?.includes('panoee')\n              ? [\n                  ...[\n                    {\n                      rel: 'shortcut icon',\n                      href: metadata?.favicon || tenant?.favicon?.src,\n                    },\n                  ],\n                  ...(tenant?.domain_public?.includes('panoee')\n                    ? LIST_LINK_STYLE_SHEET\n                    : []),\n                ]\n              : [...LIST_FAVICON_DEFAULT, ...LIST_LINK_STYLE_SHEET]\n          }\n          openGraph={{\n            type: 'website',\n            url: host\n              ? `https://${host}`\n              : tenant?.domain_public + router.asPath,\n            title: metadata?.title || title,\n            description: metadata?.description || tenant?.description,\n            images,\n            site_name: tenant?.name,\n            profile: {\n              username: router.query.username as string,\n            },\n          }}\n          facebook={{\n            appId: process.env.NEXT_PUBLIC_FB_APP_ID || '2086263614924092',\n          }}\n        />\n      )}\n      {ga_tracking && (\n        <>\n          <Script\n            src={`https://www.googletagmanager.com/gtag/js?id=${ga_tracking}`}\n          />\n          <Script\n            id=\"gg-tag\"\n            dangerouslySetInnerHTML={{\n              __html: `\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', '${ga_tracking}', {\n                  page_path: window.location.pathname,\n                });\n              `,\n            }}\n          />\n        </>\n      )}\n      {ggtag_tracking && (\n        <>\n          <Script\n            src={`https://www.googletagmanager.com/gtag/js?id=${ggtag_tracking}`}\n          />\n          <Script\n            id=\"gg-tag-1\"\n            dangerouslySetInnerHTML={{\n              __html: `\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n\n                gtag('config', '${ggtag_tracking}');\n              `,\n            }}\n          />\n        </>\n      )}\n      <Home\n        isPublic\n        isPreventChangeUrl\n        passwordTourCookie={passwordTourCookie}\n        listProjectGuardOpenedCookie={listProjectGuardOpenedCookie}\n        listFormCaptureOpenedCookie={listFormCaptureOpenedCookie}\n      />\n    </>\n  );\n}\n\nexport const getServerSideProps = wrapper.getServerSideProps(\n  store =>\n    async ({ req, res }) => {\n      const cookies = parse(req.headers.cookie || '');\n      const cookieProps = {\n        listProjectGuardOpenedCookie: cookies\n          ? cookies[KEY_COOKIE.LIST_PROJECT_PASS_GUARD] || null\n          : null,\n        passwordTourCookie: cookies\n          ? cookies[KEY_COOKIE.PASSWORD_TOUR] || null\n          : null,\n        listFormCaptureOpenedCookie: cookies\n          ? cookies[KEY_COOKIE.LIST_FORM_CAPTURE_OPENED] || null\n          : null,\n      };\n      if (\n        req.headers.host &&\n        (req.headers.host.includes('localhost') ||\n          !req.headers.host.includes('panoee.com'))\n      ) {\n        store.dispatch(\n          GET_DETAIL_PROJECT({\n            domain: req.headers.host,\n            host: req.headers.host,\n            isPublic: true,\n          }),\n        );\n        store.dispatch(END);\n        await (store as SagaStore).sagaTask?.toPromise();\n        return {\n          props: {\n            host: req.headers.host,\n            ...cookieProps,\n          },\n        };\n      }\n      res.writeHead(301, { Location: 'https://panoee.com' });\n      res.end();\n      return {\n        props: {\n          host: req.headers.host,\n          ...cookieProps,\n        },\n      };\n    },\n);\n\nexport default PublicContainer;\n","module.exports = require('./dist/client/script')\n"],"names":["window","__NEXT_P","push","__webpack_require__","Home","dynamic","Promise","all","e","then","bind","loading","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","span","__webpack_exports__","param","tenant","host","passwordTourCookie","listProjectGuardOpenedCookie","listFormCaptureOpenedCookie","router","useRouter","dispatch","useDispatch","useSelector","selectTenant","title","selectTitleProject","metadata","selectMetaDataProject","listScene","selectListSceneByGroup","thumbnail","selectThumbnailProject","ga_tracking","selectGATrackingProject","feature_image","selectFeatureImageProject","first_scene","selectConfigFirstSceneProject","ggtag_tracking","selectGATagTrackingProject","first_scene_media","selectFirstSceneMediaProject","config_little_planet","selectConfigLittlePlanetProject","detailFirstScene","useMemo","filter","item","id","undefined","images","imgs","src","url","width","height","alt","name","src_thumb","src_preview","useEffect","length","params","Object","fromEntries","urlSearchParams","URLSearchParams","location","search","entries","scene","_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__","_","query","sceneMatched","find","config","_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_11__","isLittlePlanet","enable","timeTransitionLittlePlanet","transition_time","actions","setSceneSelected","jsxs","Fragment","NextSeo","description","canonical","additionalMetaTags","property","content","additionalLinkTags","favicon","domain_public","includes","_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__","LIST_FAVICON_DEFAULT","LIST_LINK_STYLE_SHEET","rel","href","concat","openGraph","type","asPath","site_name","profile","username","facebook","appId","process","Script","dangerouslySetInnerHTML","__html","isPublic","isPreventChangeUrl","module","exports"],"sourceRoot":""}