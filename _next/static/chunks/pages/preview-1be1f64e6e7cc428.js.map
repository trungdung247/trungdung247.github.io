{"version":3,"file":"static/chunks/pages/preview-1be1f64e6e7cc428.js","mappings":"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","sources":["webpack://_N_E/?12ea","webpack://_N_E/./containers/Home/hook/useGetTenant.tsx","webpack://_N_E/./pages/preview/index.tsx","webpack://_N_E/<anon>"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/preview\",\n      function () {\n        return require(\"private-next-pages/preview/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/preview\"])\n      });\n    }\n  ","import { useCallback, useMemo, useState } from 'react';\nimport { I_Tenant } from '../types';\nimport { BaseXHR } from '@utils/axios';\nimport { TENANT_DEFAULT } from '../constants';\nimport { isServer } from '@utils/helper';\n\ninterface Props {\n  host?: string;\n}\n\nexport const useGetTenant = ({ host }: Props) => {\n  const [tenant, setTenant] = useState<I_Tenant | undefined>(undefined);\n\n  const onGetTenantByDomain = useCallback(async () => {\n    try {\n      const { data } = await BaseXHR.$get('/tenant/get-by-project', {\n        id: host || (isServer ? '' : window.location.host),\n      });\n      setTenant({ ...TENANT_DEFAULT, ...data.data });\n    } catch (err) {\n      setTenant(TENANT_DEFAULT);\n    }\n  }, [host]);\n\n  return useMemo(\n    () => ({\n      tenant,\n      onGetTenantByDomain,\n    }),\n    [onGetTenantByDomain, tenant],\n  );\n};\n","/* eslint-disable react/no-danger */\nimport dynamic from 'next/dynamic';\nimport { useEffect, useMemo } from 'react';\nimport { actions, GET_DETAIL_PROJECT } from '@containers/Home/slice';\nimport { useRouter } from 'next/router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectConfigLittlePlanetProject,\n  selectConfigFirstSceneProject,\n  selectMetaDataProject,\n  selectTitleProject,\n  selectListScene,\n  selectToken,\n} from '@containers/Home/selectors';\nimport { NextSeo } from 'next-seo';\nimport {\n  LIST_FAVICON_DEFAULT,\n  LIST_LINK_STYLE_SHEET,\n} from '@containers/Home/constants';\nimport { useGetTenant } from '@containers/Home/hook/useGetTenant';\n\nconst Home = dynamic(() => import('containers/Home'), {\n  loading: () => <span>Loading</span>,\n});\n\nfunction PreviewContainer() {\n  const router = useRouter();\n  const dispatch = useDispatch();\n\n  const token = useSelector(selectToken);\n  const title = useSelector(selectTitleProject);\n  const listScene = useSelector(selectListScene);\n  const metadata = useSelector(selectMetaDataProject);\n  const first_scene = useSelector(selectConfigFirstSceneProject);\n  const config_little_planet = useSelector(selectConfigLittlePlanetProject);\n\n  const { tenant, onGetTenantByDomain } = useGetTenant({ host: '' });\n\n  const detailFirstScene = useMemo(\n    () => listScene.filter(item => item.id === first_scene)[0] || undefined,\n    [listScene, first_scene],\n  );\n\n  // NOTE: set token\n  useEffect(() => {\n    if (tenant) {\n      if (!token && router.query.token && router.query.tour) {\n        dispatch(\n          actions.setToken(JSON.parse(JSON.stringify(router.query.token))),\n        );\n        router.push(\n          `${process.env.NEXT_PUBLIC_BASE_URL_PREVIEW}?tour=${\n            router.query.tour\n          }&scene=${router.query.scene || ''}`,\n          undefined,\n          { shallow: true },\n        );\n      } else if (\n        !token &&\n        !router.query.token &&\n        (router.query.scene || router.query.tour)\n      ) {\n        window.open(\n          `${tenant?.domain_studio}/redirect${\n            process.env.NEXT_PUBLIC_BASE_URL_PREVIEW\n          }/${router.query.tour}/${router.query.scene || ''}`,\n          '_self',\n        );\n      }\n    } else onGetTenantByDomain();\n  }, [\n    token,\n    tenant,\n    router,\n    dispatch,\n    router.query.tour,\n    router.query.scene,\n    router.query.token,\n    onGetTenantByDomain,\n  ]);\n\n  useEffect(() => {\n    if (token)\n      dispatch(\n        GET_DETAIL_PROJECT({\n          id: router.query.tour,\n          isPublic: false,\n          token,\n        }),\n      );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [token]);\n\n  useEffect(() => {\n    if (listScene && listScene.length) {\n      let scene = detailFirstScene\n        ? { ...detailFirstScene }\n        : { ...listScene[0] };\n      if (router.query.scene)\n        scene = {\n          ...listScene.filter(item => item.id === router.query.scene)[0],\n        } || {\n          ...listScene[0],\n        };\n\n      // NOTE: add intro little planet for first scene loaded\n      scene.config = { ...scene?.config } || {};\n      scene.config = {\n        ...scene.config,\n        isLittlePlanet: config_little_planet?.enable || false,\n        timeTransitionLittlePlanet:\n          config_little_planet?.transition_time || 2.0,\n      };\n      dispatch(actions.setSceneSelected(scene));\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [listScene.length]);\n\n  return (\n    <>\n      {tenant && (\n        <NextSeo\n          title={metadata?.title || title}\n          description={metadata?.description || tenant?.description}\n          additionalMetaTags={[\n            {\n              property: 'name',\n              content: tenant?.name,\n            },\n            {\n              name: 'application-name',\n              content: tenant?.name,\n            },\n          ]}\n          additionalLinkTags={\n            metadata?.favicon || !tenant?.domain_public?.includes('panoee')\n              ? [\n                  ...[\n                    {\n                      rel: 'shortcut icon',\n                      href: metadata?.favicon || tenant?.favicon?.src,\n                    },\n                  ],\n                  ...(tenant?.domain_public?.includes('panoee')\n                    ? LIST_LINK_STYLE_SHEET\n                    : []),\n                ]\n              : [...LIST_FAVICON_DEFAULT, ...LIST_LINK_STYLE_SHEET]\n          }\n          openGraph={{\n            type: 'website',\n            url: tenant?.domain_public + router.asPath,\n            title: metadata?.title || title,\n            description: metadata?.description || tenant?.description,\n            site_name: tenant?.name,\n            profile: {\n              username: router.query.username as string,\n            },\n          }}\n          facebook={{\n            appId: process.env.NEXT_PUBLIC_FB_APP_ID || '2086263614924092',\n          }}\n        />\n      )}\n      {token && <Home isPublic={false} />}\n    </>\n  );\n}\n\nexport default PreviewContainer;\n"],"names":["window","__NEXT_P","push","__webpack_require__","useGetTenant","param","host","useState","undefined","tenant","setTenant","onGetTenantByDomain","useCallback","_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_5__","_","data","BaseXHR","$get","id","isServer","location","_state","sent","_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_7__","TENANT_DEFAULT","err","useMemo","Home","dynamic","Promise","all","e","then","bind","loading","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","span","__webpack_exports__","router","useRouter","dispatch","useDispatch","token","useSelector","selectToken","title","selectTitleProject","listScene","selectListScene","metadata","selectMetaDataProject","first_scene","selectConfigFirstSceneProject","config_little_planet","selectConfigLittlePlanetProject","detailFirstScene","filter","item","useEffect","query","tour","actions","setToken","JSON","parse","stringify","process","concat","scene","shallow","open","domain_studio","GET_DETAIL_PROJECT","isPublic","length","_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_10__","config","_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_11__","isLittlePlanet","enable","timeTransitionLittlePlanet","transition_time","setSceneSelected","jsxs","Fragment","NextSeo","description","additionalMetaTags","property","content","name","additionalLinkTags","favicon","domain_public","includes","_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_12__","LIST_FAVICON_DEFAULT","LIST_LINK_STYLE_SHEET","rel","href","src","openGraph","type","url","asPath","site_name","profile","username","facebook","appId"],"sourceRoot":""}