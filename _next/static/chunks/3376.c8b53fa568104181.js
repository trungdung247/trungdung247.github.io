"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3376],{43376:function(n,o,e){e.r(o);var i=e(72253),l=e(91309),t=e(85893),c=e(15924),a=e(67294),v=e(58673),u=e(97616),r=e(79180),s=(0,a.forwardRef)(function(n,o){var e=n.scene,s=n.urlTour,d=n.divId,f=void 0===d?"container":d,g=n.krpanoId,p=void 0===g?"krpanoContainer":g,m=n.nadirConfig,h=n.children,w=n.styleContainer,_=void 0===w?{height:"100%"}:w,E=(0,a.useRef)(null),k=(0,l._)((0,a.useState)(),2),b=k[0],I=k[1],P=(0,l._)((0,v.FN)("zoom"),1)[0],y=(0,l._)((0,v.EB)("hlookat"),1)[0],x=(0,l._)((0,v.Oj)("vlookat"),1)[0],N=c.sk?void 0:window,K=(0,a.useCallback)(function(){Object.entries(u.$i).forEach(function(n){var o=(0,l._)(n,2),i=o[0];Object.entries(o[1]).forEach(function(n){var o=(0,l._)(n,2),t=o[0],c=o[1],a=e&&(null==e?void 0:e.configPlugin)&&(null==e?void 0:e.configPlugin[i])&&(null==e?void 0:e.configPlugin[i][t])?null==e?void 0:e.configPlugin[i][t]:c;N[p].set("plugin[".concat(i,"].").concat(t),a)})})},[N,p,e]),O=(0,a.useCallback)(function(){var n,o,i,l,t,c,a,v,u,r,s,d,f,g,p,m,h,w,_,E,k=(null==e?void 0:null===(n=e.config)||void 0===n?void 0:n.typeTransition)==="3d"?"OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)":null==e?void 0:null===(o=e.config)||void 0===o?void 0:o.typeTransition,b="<view ",I=(null==e?void 0:null===(l=e.config)||void 0===l?void 0:null===(i=l.default_view)||void 0===i?void 0:i.zoom_lv)||90;return{view:b+=' hlookat="'.concat(y||0,'"')+' vlookat="'.concat(x||0,'"')+' fov="'.concat(P||90,'"')+' fovmin="'.concat((null==e?void 0:null===(c=e.config)||void 0===c?void 0:null===(t=c.zoom_limit)||void 0===t?void 0:t.min)!==void 0?e.config.zoom_limit.min:60,'"')+' fovmax="\n          '.concat((null==e?void 0:null===(v=e.config)||void 0===v?void 0:null===(a=v.zoom_limit)||void 0===a?void 0:a.max)!==void 0?e.config.zoom_limit.max:150,'"')+' limitview="range"'+' hlookatmin="'.concat((null==e?void 0:null===(r=e.config)||void 0===r?void 0:null===(u=r.limit_view)||void 0===u?void 0:u.left)!==void 0?null==e?void 0:null===(s=e.config)||void 0===s?void 0:s.limit_view.left:-180,'"')+' hlookatmax="'.concat((null==e?void 0:null===(f=e.config)||void 0===f?void 0:null===(d=f.limit_view)||void 0===d?void 0:d.right)!==void 0?null==e?void 0:null===(g=e.config)||void 0===g?void 0:g.limit_view.right:180,'"')+' vlookatmin="'.concat((null==e?void 0:null===(m=e.config)||void 0===m?void 0:null===(p=m.limit_view)||void 0===p?void 0:p.bottom)!==void 0?null==e?void 0:null===(h=e.config)||void 0===h?void 0:h.limit_view.bottom:90,'"')+' vlookatmax="'.concat((null==e?void 0:null===(_=e.config)||void 0===_?void 0:null===(w=_.limit_view)||void 0===w?void 0:w.top)!==void 0?null==e?void 0:null===(E=e.config)||void 0===E?void 0:E.limit_view.top:-90,'"')+" />",transition:k,fovDefault:I}},[e,y,x,P]),T=(0,a.useCallback)(function(n){if(n&&n.media&&b){var o,i,l,t,c,a,v,r,d,f,g,p,m,h,w,_,E,k,I,y,x,N,K,T,C,$,z,A,B,D,L,R,S,j,V,G,M=O(),H=M.transition,W=M.view;b.loadScene(s,null,n.media.krpano_xml||null,H,"".concat(W,"\n              ").concat((null==e?void 0:null===(i=e.configPlugin)||void 0===i?void 0:null===(o=i.lensflare)||void 0===o?void 0:o.enabled)&&(null==e?void 0:null===(t=e.configPlugin)||void 0===t?void 0:null===(l=t.lensflare)||void 0===l?void 0:l.ath)&&(null==e?void 0:null===(a=e.configPlugin)||void 0===a?void 0:null===(c=a.lensflare)||void 0===c?void 0:c.atv)?'<include url="%$mypath%/core/skin/lensflare.xml" />\n                <lensflare_settings editor="false" ath="'.concat((null==e?void 0:null===(r=e.configPlugin)||void 0===r?void 0:null===(v=r.lensflare)||void 0===v?void 0:v.ath)!==void 0?null==e?void 0:null===(f=e.configPlugin)||void 0===f?void 0:null===(d=f.lensflare)||void 0===d?void 0:d.ath:null===(g=u.$i.lensflare)||void 0===g?void 0:g.ath,'" atv="').concat((null==e?void 0:null===(m=e.configPlugin)||void 0===m?void 0:null===(p=m.lensflare)||void 0===p?void 0:p.atv)!==void 0?null==e?void 0:null===(w=e.configPlugin)||void 0===w?void 0:null===(h=w.lensflare)||void 0===h?void 0:h.atv:null===(_=u.$i.lensflare)||void 0===_?void 0:_.atv,'" sun="').concat((null==e?void 0:null===(k=e.configPlugin)||void 0===k?void 0:null===(E=k.lensflare)||void 0===E?void 0:E.sun)!==void 0?null==e?void 0:null===(y=e.configPlugin)||void 0===y?void 0:null===(I=y.lensflare)||void 0===I?void 0:I.sun:null===(x=u.$i.lensflare)||void 0===x?void 0:x.sun,'" glare="').concat((null==e?void 0:null===(K=e.configPlugin)||void 0===K?void 0:null===(N=K.lensflare)||void 0===N?void 0:N.glare)!==void 0?null==e?void 0:null===(C=e.configPlugin)||void 0===C?void 0:null===(T=C.lensflare)||void 0===T?void 0:T.glare:null===($=u.$i.lensflare)||void 0===$?void 0:$.glare,'" r_ring="').concat((null==e?void 0:null===(A=e.configPlugin)||void 0===A?void 0:null===(z=A.lensflare)||void 0===z?void 0:z.r_ring)!==void 0?null==e?void 0:null===(D=e.configPlugin)||void 0===D?void 0:null===(B=D.lensflare)||void 0===B?void 0:B.r_ring:null===(L=u.$i.lensflare)||void 0===L?void 0:L.r_ring,'" exposure="true" exposure_bias="').concat((null==e?void 0:null===(S=e.configPlugin)||void 0===S?void 0:null===(R=S.lensflare)||void 0===R?void 0:R.exposure_bias)!==void 0?null==e?void 0:null===(V=e.configPlugin)||void 0===V?void 0:null===(j=V.lensflare)||void 0===j?void 0:j.exposure_bias:null===(G=u.$i.lensflare)||void 0===G?void 0:G.exposure_bias,'"/>\n                <plugin name="pp_light" devices="html5" keep="false"\n                  url="%$mypath%/core/plugins/pp_light.js"\n                  enabled="true"\n                  exposure="0.0"\n                  lights="0.0"\n                  shadows="0.0"\n                  filterrange="60.0"\n                  masking="1.0"\n                  quality="7"\n                  order=""\n                  phase="2"\n                />'):"","\n          "),P||90)}},[O,b,e,s,P]),C=(0,a.useCallback)(function(){var n=N[p],o="nadirlogo";n.set("hotspot['".concat(o,"'].ath"),0),n.set("hotspot['".concat(o,"'].atv"),90),n.set("hotspot['".concat(o,"'].zoom"),!1),n.set("hotspot['".concat(o,"'].scale"),(null==m?void 0:m.scale)||1),n.set("hotspot['".concat(o,"'].rotatewithview"),"true"),n.set("hotspot['".concat(o,"'].distorted"),!0),n.set("hotspot['".concat(o,"'].url"),(null==m?void 0:m.src)||""),n.set("hotspot['".concat(o,"'].visible"),!!((null==m?void 0:m.isEnabled)&&(null==m?void 0:m.src))),(null==m?void 0:m.link)&&n.set("hotspot['".concat(o,"'].onclick"),function(){window.open(null==m?void 0:m.link,"_blank")}),(null==m?void 0:m.isEnabled)&&(null==m?void 0:m.src)&&n.call("addhotspot('".concat(o,"')"))},[N,p,m]),$=(0,a.useCallback)(function(){e&&(K(),N[p].set("view.limitview","range"),N[p].set("showerrors",!1),N[p].call("followmouse_disable()"),C())},[e,N,p,K,C]);return(0,a.useImperativeHandle)(o,function(){return{getContainer:function(){return E.current},viewPlanet:function(){N[p].call("cm_littleplanet_view")},viewNormal:function(){N[p].call("cm_normal_view")},viewMirrorBall:function(){N[p].call("mirror_ball_view")},viewFullscreen:function(){N[p].call("switch(fullscreen)")},viewWebvr:function(){N[p].call("webvr.enterVR()")},toggleGyro:function(){N[p].call("toggleGyroscope()")},startAutoRotate:function(n){var o=n.speed,e=n.wait_time,i=void 0===e?20:e;N[p].call("startrotation(".concat(void 0===o?10:o,", ").concat(i,")"))},stopAutoRotate:function(){N[p].call("stoprotation")},toLeft:function(){N[p].call("set(hlookat_moveforce,-0.75)")},toRight:function(){N[p].call("set(hlookat_moveforce,+0.75)")},stopToHorizontal:function(){N[p].call("set(hlookat_moveforce,0)")},toUp:function(){N[p].call("set(vlookat_moveforce,-0.75)")},toDown:function(){N[p].call("set(vlookat_moveforce,+0.75)")},stopToVertical:function(){N[p].call("set(vlookat_moveforce,0)")}}}),(0,a.useEffect)(function(){!b&&p&&I((0,r.Z)(p))},[b,p]),(0,a.useEffect)(function(){b&&b.init(f,"".concat("/static","/core/tour.xml"),{mypath:"/static"})},[b,f]),(0,a.useEffect)(function(){b&&s&&e&&T(e)},[s,b]),(0,a.useEffect)(function(){return N[p]&&b&&N[p].addEventListener("onloadcomplete",$),function(){N[p]&&N[p].removeEventListener("onloadcomplete",$)}},[b,e]),(0,a.useEffect)(function(){return function(){b&&b.removePano()}},[b]),(0,t.jsx)("div",{id:f,ref:E,style:(0,i._)({},{width:"100%",height:"250px"},_),children:h})});o.default=(0,a.memo)(s)},79180:function(n,o,e){e.d(o,{Z:function(){return KRPANO}});var i=e(91309),l=e(4586);function KRPANO(n){function krpanoInstance(){return document.getElementById(n)}function on(n,o,e){if("function"==typeof o&&null!==krpanoInstance()){if(e)try{krpanoInstance().set("events['".concat(e,"'].").concat(n),o)}catch(n){}else try{krpanoInstance().set("events.".concat(n),o)}catch(n){}}}return{init:function(o,e,i){var t={};i&&(t=i),t["image.prealign"]="",t.panoId=n;try{if(window.embedpano({target:o,html5:"only+webgl",xml:e,bgcolor:"#000000",id:n,vars:t,initvars:i,webglsettings:{preserveDrawingBuffer:!0},consolelog:!1}),window.listKrpanoInstance){var c=window.listKrpanoInstance;window.listKrpanoInstance=(0,l._)(c).concat([n])}else window.listKrpanoInstance=[n]}catch(n){}on("onloadcomplete",function(){var n=new Event("onloadcomplete");krpanoInstance()&&krpanoInstance().dispatchEvent(n)}),on("onviewchange",function(){var n=new Event("onviewchange");krpanoInstance()&&krpanoInstance().dispatchEvent(n)}),on("ondoubleclick",function(){var n=new Event("ondoubleclick");krpanoInstance()&&krpanoInstance().dispatchEvent(n)}),on("onmousewheel",function(){var n=new Event("onmousewheel");krpanoInstance()&&krpanoInstance().dispatchEvent(n)}),on("onmouseup",function(){var n=new Event("onmouseup");krpanoInstance()&&krpanoInstance().dispatchEvent(n)}),on("onmousedown",function(){var n=new Event("onmousedown");krpanoInstance()&&krpanoInstance().dispatchEvent(n)}),on("onnewpanovr",function(){var n=new Event("onnewpanovr");krpanoInstance()&&krpanoInstance().dispatchEvent(n)}),window[n]=krpanoInstance()},krpano:krpanoInstance(),loadScene:function(n,o,e){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"NOBLEND",t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"<view />",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],v=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:90,r=arguments.length>9?arguments[9]:void 0,s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:"",d=arguments.length>11&&void 0!==arguments[11]&&arguments[11],f="";o?Object.entries(o).forEach(function(n){var o=(0,i._)(n,2),e=o[0],l=o[1];f+="".concat(e,"=").concat(l,"&")}):o=null;var g='<krpano syncother="false">';g+='\n      <action name="startup">\n        set(view.oz, 0.0);\n        clearinterval(day2dust);\n    ',d?g+="dollhouse_view(true);</action>".concat(s):("day2dust"===c&&a.length&&(g+="setinterval(day2dust, ".concat(v.durationTime||3,',\n              if(sceneActive === "scene_01", loadscene(scene_00, null, MERGE|KEEPMOVE|KEEPVIEW|KEEPHOTSPOTS, BLEND(').concat(v.waitTime||.5,", easeInCubic));, loadscene(scene_01, null, MERGE|KEEPMOVE|KEEPVIEW|KEEPHOTSPOTS, BLEND(").concat(v.waitTime||.5,", easeInCubic));););")),g+='</action><include url="%$mypath%/core/sync.xml" />',"flat"===r?g+='<include url="%$mypath%/core/plugins/flat-scene.xml" />':g+='<control mode="follow" />',e?g+="".concat(e).concat(t)+'\n        <scene name="scene_00" onstart="set(sceneActive, scene_00); set(sceneid, null);" nogrid="true">\n          '.concat(e).concat(t,"\n        </scene>\n      "):g+="flat"===r?'<preview url="'.concat(n,'" /><image hfov="1.00" vfov="1.000000" voffset="0.00"><flat url="').concat(n,'"/></image>\n      <scene name="scene_00" onstart="set(sceneActive, scene_00); set(sceneid, null);" nogrid="true">\n      <preview url="').concat(n,'" /><image hfov="1.00" vfov="1.000000" voffset="0.00"><flat url="').concat(n,'"/></image>\n      </scene>'):'<preview url="'.concat(n,'" />\n      <image><sphere url="').concat(n,'" /></image>\n      ').concat(t,'\n      <scene name="scene_00" onstart="set(sceneActive, scene_00); set(sceneid, null);" nogrid="true">\n      <preview url="').concat(n,'" />\n      <image><sphere url="').concat(n,'" /></image>\n      ').concat(t,"\n      </scene>"),"day2dust"===c&&a.length&&a.forEach(function(n,o){g+=n.xml?'<scene name="scene_0'.concat(o+1,'" onstart="set(sceneActive, scene_0').concat(o+1,'); set(sceneid, null);" nogrid="true">\n              ').concat(n.xml).concat(t,"\n            </scene>"):'<scene name="scene_0'.concat(o+1,'" onstart="set(sceneActive, scene_0').concat(o+1,'); set(sceneid, null);" nogrid="true">\n              <preview url="').concat(n.urlTour,'" />\n              <image><sphere url="').concat(n.urlTour,'" /></image>\n              ').concat(t,"\n          </scene>")}),"staging"===c&&a.length&&""===v.modeDisplay&&a.forEach(function(n,o){g+=n.xml?'<scene name="scene_0'.concat(o+1,'" nogrid="true" onstart="set(sceneid, null);">\n              ').concat(n.xml).concat(t,"\n            </scene>"):'<scene name="scene_0'.concat(o+1,'" nogrid="true" onstart="set(sceneid, null);">\n              <preview url="').concat(n.urlTour,'" />\n              <image><sphere url="').concat(n.urlTour,'" /></image>\n              ').concat(t,"\n          </scene>")}),g+='<hotspot name="hotspot_media_overlay" zorder="1" distorted="true" ath="0" atv="0" enabled="false" type="text" renderer="webgl" bgcolor="0x000000" bgalpha="1.0" width="100%" height="100%" alpha="0.85" scale="1" flying="1" visible="false" />'+s),g+="</krpano>",krpanoInstance().call("\n        ".concat("OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)"===l&&"flat"!==r?"wait(1.1)":"",";\n        loadxml(").concat(g,", ").concat(f||null,", KEEPPLUGINS,\n          ").concat("flat"===r?null:l,", startup);\n        ").concat("flat"===r||d?"":'set("view.fov", '.concat(u,")"),"\n        ").concat("OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)"!==l||"flat"===r||d?"":"wait(0.25);\n            trace(view.fov);\n            tween(view.fov, ".concat(u,", 2);"),";\n      "))},removePano:function(){window.listKrpanoInstance&&(window.listKrpanoInstance=window.listKrpanoInstance.filter(function(o){return o!==n})),window.removepano(n)}}}}}]);
//# sourceMappingURL=3376.c8b53fa568104181.js.map