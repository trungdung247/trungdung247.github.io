{"version":3,"file":"static/chunks/2359.551d0afdd6f5e700.js","mappings":"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","sources":["webpack://_N_E/./components/ArrowSlide/styled.tsx","webpack://_N_E/./components/Hotspot/Preview.styled.tsx","webpack://_N_E/./components/Hotspot/Preview.tsx","webpack://_N_E/./utils/xhrApi.ts","webpack://_N_E/<anon>"],"sourcesContent":["import styled from 'styled-components';\n\nexport const ArrowSlideWrapper = styled.div`\n  position: absolute;\n  top: calc(50% - 27px) !important;\n  background: #fff !important;\n  opacity: 0.5 !important;\n  z-index: 2000;\n  width: 32px;\n  height: 32px;\n  display: flex !important;\n  justify-content: center;\n  align-items: center;\n  border-radius: 4px;\n  cursor: pointer;\n  &.control-prev {\n    left: 10px !important;\n    &:before {\n      border-right-color: #212121 !important;\n    }\n  }\n  &.control-next {\n    right: 10px !important;\n    &:before {\n      border-left-color: #212121 !important;\n    }\n  }\n`;\n","import { ArrowSlideWrapper } from '@components/ArrowSlide/styled';\nimport styled from 'styled-components';\n\nexport const PreviewWrapper = styled.div`\n  z-index: 10;\n  border-radius: 6px;\n  overflow: hidden;\n  border: 1px solid rgb(255 255 255 / 0.2);\n  width: max-content;\n  > div {\n    width: 100%;\n    height: 100%;\n  }\n  .video {\n    width: 320px;\n    height: 180px;\n    iframe {\n      width: 100% !important;\n      height: 100%;\n    }\n  }\n  .article {\n    width: 320px;\n    height: auto;\n    max-height: 70vh;\n    overflow: auto;\n    background: #fff;\n    padding: 0.75rem;\n    .ctn {\n      height: 100%;\n    }\n  }\n  .link {\n    width: 320px;\n    height: 180px;\n    iframe {\n      width: 320px;\n      height: 100%;\n    }\n  }\n  .images {\n    width: 320px;\n    height: auto;\n    background: #000;\n    position: relative;\n    ${ArrowSlideWrapper} {\n      top: calc(50% - 16px) !important;\n    }\n    .gallery-item {\n      width: 100%;\n      height: 200px;\n      background-position: center;\n      background-size: contain;\n      background-repeat: no-repeat;\n    }\n    .quick-play {\n      top: 50%;\n      left: 50%;\n      z-index: 10;\n      cursor: pointer;\n      position: absolute;\n      transform: translate(-50%, -50%);\n      i {\n        color: #fff;\n        font-size: 32px;\n      }\n    }\n  }\n  .point {\n    img {\n      width: 200px;\n      height: auto;\n    }\n  }\n`;\n","/* eslint-disable react/no-danger */\nimport { I_Hotspot, I_Post, I_Scene } from '@containers/Home/types';\nimport { FlickityStyle } from '@styles/flickity';\nimport { convertLinkVideoToPlayable } from '@utils/helper';\nimport { getDetailPost } from '@utils/xhrApi';\nimport React, { memo, useCallback, useEffect, useMemo, useState } from 'react';\nimport Flickity from 'react-flickity-component';\n// import Pannellum from 'pannellum-react/es/elements/Pannellum';\nimport { PreviewWrapper } from './Preview.styled';\n\ninterface I_PreviewContentProps {\n  hotspot: I_Hotspot;\n  listScene: I_Scene[];\n  listPost: I_Post[];\n  onClick: (value) => void;\n}\n\nexport const PreviewContent = memo(\n  ({ hotspot, listPost, listScene, onClick }: I_PreviewContentProps) => {\n    const [post, setPost] = useState<I_Post | undefined>(undefined);\n\n    const onGetDetailPost = useCallback(\n      async id => {\n        try {\n          let item = listPost.find(el => el.id === id);\n          if (!item) {\n            const { data } = await getDetailPost(id);\n            item = data.data;\n          }\n          setPost(item);\n        } catch (err) {\n          console.log(err);\n          setPost(undefined);\n        }\n      },\n      [listPost],\n    );\n\n    useEffect(() => {\n      if (hotspot.type === 'article' && hotspot?.config?.article?.post_id)\n        onGetDetailPost(hotspot.config.article.post_id);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [hotspot]);\n\n    const targetSceneHotspotPoint = useMemo(\n      () =>\n        hotspot.type === 'point' && hotspot.config?.point?.target_scene_id\n          ? listScene.filter(\n              item => item.id === hotspot.config?.point?.target_scene_id,\n            )[0] || undefined\n          : undefined,\n      [hotspot, listScene],\n    );\n\n    const targetSceneHotspotPointImgSrc = useMemo(() => {\n      if (hotspot.type === 'point') {\n        if (hotspot.config?.point?.preview_box_img_type === 'thumbnail')\n          return (\n            targetSceneHotspotPoint?.screenshot ||\n            targetSceneHotspotPoint?.media?.src_thumb\n          );\n        if (\n          hotspot.config?.point?.preview_box_img_type === 'upload' &&\n          hotspot.config?.point?.preview_box_img_src\n        )\n          return hotspot?.config?.point?.preview_box_img_src;\n        return targetSceneHotspotPoint?.media?.src_thumb;\n      }\n      return '';\n    }, [targetSceneHotspotPoint, hotspot]);\n\n    return (\n      <PreviewWrapper>\n        {hotspot.type === 'video' && hotspot.config?.video?.url && (\n          <div className=\"video\">\n            <iframe\n              title=\"title\"\n              width=\"100%\"\n              height=\"100%\"\n              src={`${convertLinkVideoToPlayable(hotspot.config?.video?.url)}`}\n              allowFullScreen\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            />\n          </div>\n        )}\n        {/* {hotspot.type === 'link' && hotspot.config?.link.url && (\n        <div className=\"link\">\n          <iframe\n            title=\"title\"\n            width=\"100%\"\n            height=\"100%\"\n            src={`${hotspot.config?.link.url}`}\n            frameBorder=\"0\"\n            allowFullScreen\n          />\n        </div>\n      )} */}\n        {hotspot.type === 'article' && post?.id && (\n          <div className=\"article\">\n            <div\n              className=\"ctn ctn__html sun-editor sun-editor-editable\"\n              dangerouslySetInnerHTML={{ __html: post?.content }}\n            />\n          </div>\n        )}\n        {hotspot.type === 'image' &&\n          hotspot.config?.image?.galleries?.length && (\n            <div className=\"images\">\n              <div className=\"quick-play\" onClick={onClick}>\n                <i aria-hidden className=\"fas fa-search-plus\" />\n              </div>\n              <Flickity\n                elementType=\"div\"\n                className=\"carousel\"\n                options={{\n                  contain: true,\n                  prevNextButtons: true,\n                  pageDots: false,\n                  lazyLoad: true,\n                  cellAlign: 'left',\n                }}\n              >\n                {hotspot.config.image.galleries.map(item => (\n                  <div\n                    key={item.id}\n                    className=\"gallery-item\"\n                    style={{ backgroundImage: `url(${item.src})` }}\n                  />\n                ))}\n              </Flickity>\n              <FlickityStyle />\n            </div>\n          )}\n        {hotspot.type === 'point' && targetSceneHotspotPoint && (\n          <div className=\"point\">\n            <img src={targetSceneHotspotPointImgSrc} alt=\"123\" />\n            {/* <Pannellum\n            width=\"240px\"\n            height=\"140px\"\n            image={targetSceneHotspotPoint?.media?.src_preview || ''}\n            autoRotate={2}\n            autoLoad\n            draggable\n            showControls={false}\n            onLoad={() => {\n              console.log('panorama loaded');\n            }}\n          /> */}\n          </div>\n        )}\n      </PreviewWrapper>\n    );\n  },\n);\n\ninterface I_PreviewProps extends I_PreviewContentProps {\n  hotspot: I_Hotspot;\n  isHidePreview: boolean;\n  isHideTitleGlobal: boolean;\n  isHidePreviewGlobal: boolean;\n  onVisibleFlagPopover: () => void;\n  onUnvisibleFlagPopover: () => void;\n  onUnvisiblePopover: () => void;\n}\n\nexport const Preview = memo(\n  ({\n    hotspot,\n    onClick,\n    listPost,\n    listScene,\n    onVisibleFlagPopover,\n    onUnvisibleFlagPopover,\n    isHideTitleGlobal,\n    isHidePreviewGlobal,\n    onUnvisiblePopover,\n    isHidePreview,\n  }: I_PreviewProps) => {\n    return (\n      <div\n        onFocus={() => onVisibleFlagPopover()}\n        onMouseOver={() => onVisibleFlagPopover()}\n        onMouseLeave={() => onUnvisibleFlagPopover()}\n        onClick={e => {\n          e.stopPropagation();\n          onVisibleFlagPopover();\n        }}\n        onTouchStart={e => {\n          e.stopPropagation();\n          onVisibleFlagPopover();\n        }}\n      >\n        {hotspot.title && !isHideTitleGlobal ? (\n          <span className=\"hotspotTitle\">\n            {!isHidePreviewGlobal && !isHidePreview ? (\n              <PreviewContent\n                hotspot={hotspot}\n                listPost={listPost}\n                listScene={listScene}\n                onClick={() => {\n                  onUnvisiblePopover();\n                  onClick({});\n                }}\n              />\n            ) : (\n              <div />\n            )}\n            <em>{hotspot.title}</em>\n          </span>\n        ) : !isHidePreviewGlobal && !isHidePreview ? (\n          <PreviewContent\n            hotspot={hotspot}\n            listPost={listPost}\n            listScene={listScene}\n            onClick={() => {\n              onUnvisiblePopover();\n              onClick({});\n            }}\n          />\n        ) : (\n          <div />\n        )}\n      </div>\n    );\n  },\n);\n\nexport default Preview;\n","import { BaseXHR } from './axios';\n\nexport const getDetailPost = id => BaseXHR.$get('/post/getPublish', { id });\n"],"names":["ArrowSlideWrapper","styled","div","withConfig","PreviewWrapper","PreviewContent","memo","param","hotspot","listPost","listScene","onClick","useState","undefined","post","setPost","onGetDetailPost","useCallback","_async_to_generator","_","id","item","find","el","getDetailPost","data","sent","err","useEffect","type","config","article","post_id","targetSceneHotspotPoint","useMemo","point","target_scene_id","filter","targetSceneHotspotPointImgSrc","preview_box_img_type","screenshot","media","src_thumb","preview_box_img_src","jsx_runtime","jsxs","video","url","jsx","className","iframe","title","width","height","src","concat","convertLinkVideoToPlayable","allowFullScreen","allow","dangerouslySetInnerHTML","__html","content","image","galleries","length","i","aria-hidden","Flickity","elementType","options","contain","prevNextButtons","pageDots","lazyLoad","cellAlign","map","style","backgroundImage","FlickityStyle","img","alt","Preview","onVisibleFlagPopover","onUnvisibleFlagPopover","isHideTitleGlobal","isHidePreviewGlobal","onUnvisiblePopover","isHidePreview","onFocus","onMouseOver","onMouseLeave","e","stopPropagation","onTouchStart","span","em","Hotspot_Preview","BaseXHR","$get"],"sourceRoot":""}