(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9206],{22689:function(c,p,m){"use strict";m.d(p,{KR:function(){return R}});let t=c=>"object"==typeof c&&null!==c&&c.constructor===Object&&"[object Object]"===Object.prototype.toString.call(c),e=(...c)=>{let p=!1;"boolean"==typeof c[0]&&(p=c.shift());let m=c[0];if(!m||"object"!=typeof m)throw Error("extendee must be an object");let b=c.slice(1),v=b.length;for(let c=0;c<v;c++){let v=b[c];for(let c in v)if(v.hasOwnProperty(c)){let b=v[c];if(p&&(Array.isArray(b)||t(b))){let p=Array.isArray(b)?[]:{};m[c]=e(!0,m.hasOwnProperty(c)?m[c]:p,b)}else m[c]=b}}return m},i=(c,p=1e4)=>Math.round(((c=parseFloat(c)||0)+Number.EPSILON)*p)/p,s=function(c){return!!(c&&"object"==typeof c&&c instanceof Element&&c!==document.body)&&!c.__Panzoom&&(!function(c){let p=getComputedStyle(c)["overflow-y"],m=getComputedStyle(c)["overflow-x"],b=("scroll"===p||"auto"===p)&&Math.abs(c.scrollHeight-c.clientHeight)>1,v=("scroll"===m||"auto"===m)&&Math.abs(c.scrollWidth-c.clientWidth)>1;return b||v}(c)?s(c.parentNode):c)},b="undefined"!=typeof window&&window.ResizeObserver||class{constructor(c){this.observables=[],this.boundCheck=this.check.bind(this),this.boundCheck(),this.callback=c}observe(c){if(this.observables.some(p=>p.el===c))return;let p={el:c,size:{height:c.clientHeight,width:c.clientWidth}};this.observables.push(p)}unobserve(c){this.observables=this.observables.filter(p=>p.el!==c)}disconnect(){this.observables=[]}check(){let c=this.observables.filter(c=>{let p=c.el.clientHeight,m=c.el.clientWidth;if(c.size.height!==p||c.size.width!==m)return c.size.height=p,c.size.width=m,!0}).map(c=>c.el);c.length>0&&this.callback(c),window.requestAnimationFrame(this.boundCheck)}};let n=class n{constructor(c){this.id=self.Touch&&c instanceof Touch?c.identifier:-1,this.pageX=c.pageX,this.pageY=c.pageY,this.clientX=c.clientX,this.clientY=c.clientY}};let a=(c,p)=>p?Math.sqrt((p.clientX-c.clientX)**2+(p.clientY-c.clientY)**2):0,r=(c,p)=>p?{clientX:(c.clientX+p.clientX)/2,clientY:(c.clientY+p.clientY)/2}:c;let h=class h{constructor(c,{start:p=()=>!0,move:m=()=>{},end:b=()=>{}}={}){this._element=c,this.startPointers=[],this.currentPointers=[],this._pointerStart=c=>{if(c.buttons>0&&0!==c.button)return;let p=new n(c);this.currentPointers.some(c=>c.id===p.id)||this._triggerPointerStart(p,c)&&(window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._pointerEnd))},this._touchStart=c=>{for(let p of Array.from(c.changedTouches||[]))this._triggerPointerStart(new n(p),c)},this._move=c=>{let p=this.currentPointers.slice(),m="changedTouches"in c?Array.from(c.changedTouches).map(c=>new n(c)):[new n(c)];for(let c of m){let p=this.currentPointers.findIndex(p=>p.id===c.id);p<0||(this.currentPointers[p]=c)}this._moveCallback(p,this.currentPointers.slice(),c)},this._triggerPointerEnd=(c,p)=>{let m=this.currentPointers.findIndex(p=>p.id===c.id);return!(m<0)&&(this.currentPointers.splice(m,1),this.startPointers.splice(m,1),this._endCallback(c,p),!0)},this._pointerEnd=c=>{c.buttons>0&&0!==c.button||this._triggerPointerEnd(new n(c),c)&&(window.removeEventListener("mousemove",this._move,{passive:!1}),window.removeEventListener("mouseup",this._pointerEnd,{passive:!1}))},this._touchEnd=c=>{for(let p of Array.from(c.changedTouches||[]))this._triggerPointerEnd(new n(p),c)},this._startCallback=p,this._moveCallback=m,this._endCallback=b,this._element.addEventListener("mousedown",this._pointerStart,{passive:!1}),this._element.addEventListener("touchstart",this._touchStart,{passive:!1}),this._element.addEventListener("touchmove",this._move,{passive:!1}),this._element.addEventListener("touchend",this._touchEnd),this._element.addEventListener("touchcancel",this._touchEnd)}stop(){this._element.removeEventListener("mousedown",this._pointerStart,{passive:!1}),this._element.removeEventListener("touchstart",this._touchStart,{passive:!1}),this._element.removeEventListener("touchmove",this._move,{passive:!1}),this._element.removeEventListener("touchend",this._touchEnd),this._element.removeEventListener("touchcancel",this._touchEnd),window.removeEventListener("mousemove",this._move),window.removeEventListener("mouseup",this._pointerEnd)}_triggerPointerStart(c,p){return!!this._startCallback(c,p)&&(this.currentPointers.push(c),this.startPointers.push(c),!0)}};let l=class l{constructor(c={}){for(let p of(this.options=e(!0,{},c),this.plugins=[],this.events={},["on","once"]))for(let c of Object.entries(this.options[p]||{}))this[p](...c)}option(c,p,...m){var b,v;let x=(b=c=String(c),v=this.options,b.split(".").reduce(function(c,p){return c&&c[p]},v));return"function"==typeof x&&(x=x.call(this,this,...m)),void 0===x?p:x}localize(c,p=[]){return c=(c=String(c).replace(/\{\{(\w+).?(\w+)?\}\}/g,(c,m,b)=>{let v="";b?v=this.option(`${m[0]+m.toLowerCase().substring(1)}.l10n.${b}`):m&&(v=this.option(`l10n.${m}`)),v||(v=c);for(let c=0;c<p.length;c++)v=v.split(p[c][0]).join(p[c][1]);return v})).replace(/\{\{(.*)\}\}/,(c,p)=>p)}on(c,p){if(t(c)){for(let p of Object.entries(c))this.on(...p);return this}return String(c).split(" ").forEach(c=>{let m=this.events[c]=this.events[c]||[];-1==m.indexOf(p)&&m.push(p)}),this}once(c,p){if(t(c)){for(let p of Object.entries(c))this.once(...p);return this}return String(c).split(" ").forEach(c=>{let e=(...m)=>{this.off(c,e),p.call(this,this,...m)};e._=p,this.on(c,e)}),this}off(c,p){if(!t(c))return c.split(" ").forEach(c=>{let m=this.events[c];if(!m||!m.length)return this;let b=-1;for(let c=0,v=m.length;c<v;c++){let v=m[c];if(v&&(v===p||v._===p)){b=c;break}}-1!=b&&m.splice(b,1)}),this;for(let p of Object.entries(c))this.off(...p)}trigger(c,...p){for(let m of[...this.events[c]||[]].slice())if(m&&!1===m.call(this,this,...p))return!1;for(let m of[...this.events["*"]||[]].slice())if(m&&!1===m.call(this,c,this,...p))return!1;return!0}attachPlugins(c){let p={};for(let[m,b]of Object.entries(c||{}))!1===this.options[m]||this.plugins[m]||(this.options[m]=e({},b.defaults||{},this.options[m]),p[m]=new b(this));for(let[c,m]of Object.entries(p))m.attach(this);return this.plugins=Object.assign({},this.plugins,p),this}detachPlugins(){for(let c in this.plugins){let p;(p=this.plugins[c])&&"function"==typeof p.detach&&p.detach(this)}return this.plugins={},this}};let v={touch:!0,zoom:!0,pinchToZoom:!0,panOnlyZoomed:!1,lockAxis:!1,friction:.64,decelFriction:.88,zoomFriction:.74,bounceForce:.2,baseScale:1,minScale:1,maxScale:2,step:.5,textSelection:!1,click:"toggleZoom",wheel:"zoom",wheelFactor:42,wheelLimit:5,draggableClass:"is-draggable",draggingClass:"is-dragging",ratio:1};let d=class d extends l{constructor(c,p={}){for(let m of(super(e(!0,{},v,p)),this.state="init",this.$container=c,["onLoad","onWheel","onClick"]))this[m]=this[m].bind(this);this.initLayout(),this.resetValues(),this.attachPlugins(d.Plugins),this.trigger("init"),this.updateMetrics(),this.attachEvents(),this.trigger("ready"),!1===this.option("centerOnStart")?this.state="ready":this.panTo({friction:0}),c.__Panzoom=this}initLayout(){let c=this.$container;if(!(c instanceof HTMLElement))throw Error("Panzoom: Container not found");let p=this.option("content")||c.querySelector(".panzoom__content");if(!p)throw Error("Panzoom: Content not found");this.$content=p;let m=this.option("viewport")||c.querySelector(".panzoom__viewport");m||!1===this.option("wrapInner")||((m=document.createElement("div")).classList.add("panzoom__viewport"),m.append(...c.childNodes),c.appendChild(m)),this.$viewport=m||p.parentNode}resetValues(){this.updateRate=this.option("updateRate",/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?250:24),this.container={width:0,height:0},this.viewport={width:0,height:0},this.content={origWidth:0,origHeight:0,width:0,height:0,x:this.option("x",0),y:this.option("y",0),scale:this.option("baseScale")},this.transform={x:0,y:0,scale:1},this.resetDragPosition()}onLoad(c){this.updateMetrics(),this.panTo({scale:this.option("baseScale"),friction:0}),this.trigger("load",c)}onClick(c){if(c.defaultPrevented||document.activeElement&&document.activeElement.closest("[contenteditable]"))return;if(this.option("textSelection")&&window.getSelection().toString().length&&(!c.target||!c.target.hasAttribute("data-fancybox-close")))return void c.stopPropagation();let p=this.$content.getClientRects()[0];if("ready"!==this.state&&(this.dragPosition.midPoint||Math.abs(p.top-this.dragStart.rect.top)>1||Math.abs(p.left-this.dragStart.rect.left)>1))return c.preventDefault(),void c.stopPropagation();!1!==this.trigger("click",c)&&this.option("zoom")&&"toggleZoom"===this.option("click")&&(c.preventDefault(),c.stopPropagation(),this.zoomWithClick(c))}onWheel(c){!1!==this.trigger("wheel",c)&&this.option("zoom")&&this.option("wheel")&&this.zoomWithWheel(c)}zoomWithWheel(c){void 0===this.changedDelta&&(this.changedDelta=0);let p=Math.max(-1,Math.min(1,-c.deltaY||-c.deltaX||c.wheelDelta||-c.detail)),m=this.content.scale,b=m*(100+p*this.option("wheelFactor"))/100;if(p<0&&.01>Math.abs(m-this.option("minScale"))||p>0&&.01>Math.abs(m-this.option("maxScale"))?(this.changedDelta+=Math.abs(p),b=m):(this.changedDelta=0,b=Math.max(Math.min(b,this.option("maxScale")),this.option("minScale"))),this.changedDelta>this.option("wheelLimit")||(c.preventDefault(),b===m))return;let v=this.$content.getBoundingClientRect(),x=c.clientX-v.left,$=c.clientY-v.top;this.zoomTo(b,{x:x,y:$})}zoomWithClick(c){let p=this.$content.getClientRects()[0],m=c.clientX-p.left,b=c.clientY-p.top;this.toggleZoom({x:m,y:b})}attachEvents(){this.$content.addEventListener("load",this.onLoad),this.$container.addEventListener("wheel",this.onWheel,{passive:!1}),this.$container.addEventListener("click",this.onClick,{passive:!1}),this.initObserver();let c=new h(this.$container,{start:(p,m)=>{if(!this.option("touch")||this.velocity.scale<0)return!1;let b=m.composedPath()[0];return!(!c.currentPointers.length&&(-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(b.nodeName)||this.option("textSelection")&&((c,p,m)=>{let b=c.childNodes,v=document.createRange();for(let c=0;c<b.length;c++){let x=b[c];if(x.nodeType!==Node.TEXT_NODE)continue;v.selectNodeContents(x);let $=v.getBoundingClientRect();if(p>=$.left&&m>=$.top&&p<=$.right&&m<=$.bottom)return x}return!1})(b,p.clientX,p.clientY)))&&!s(b)&&!1!==this.trigger("touchStart",m)&&("mousedown"===m.type&&m.preventDefault(),this.state="pointerdown",this.resetDragPosition(),this.dragPosition.midPoint=null,this.dragPosition.time=Date.now(),!0)},move:(p,m,b)=>{if("pointerdown"!==this.state)return;if(!1===this.trigger("touchMove",b))return void b.preventDefault();if(m.length<2&&!0===this.option("panOnlyZoomed")&&this.content.width<=this.viewport.width&&this.content.height<=this.viewport.height&&this.transform.scale<=this.option("baseScale")||m.length>1&&(!this.option("zoom")||!1===this.option("pinchToZoom")))return;let v=r(p[0],p[1]),x=r(m[0],m[1]),$=x.clientX-v.clientX,E=x.clientY-v.clientY,_=a(p[0],p[1]),z=a(m[0],m[1]);this.dragOffset.x+=$,this.dragOffset.y+=E,this.dragOffset.scale*=_&&z?z/_:1,this.dragOffset.time=Date.now()-this.dragPosition.time;let O=1===this.dragStart.scale&&this.option("lockAxis");if(O&&!this.lockAxis){if(6>Math.abs(this.dragOffset.x)&&6>Math.abs(this.dragOffset.y))return void b.preventDefault();let c=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockAxis=c>45&&c<135?"y":"x"}if("xy"===O||"y"!==this.lockAxis){if(b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),this.lockAxis&&(this.dragOffset["x"===this.lockAxis?"y":"x"]=0),this.$container.classList.add(this.option("draggingClass")),this.transform.scale===this.option("baseScale")&&"y"===this.lockAxis||(this.dragPosition.x=this.dragStart.x+this.dragOffset.x),this.transform.scale===this.option("baseScale")&&"x"===this.lockAxis||(this.dragPosition.y=this.dragStart.y+this.dragOffset.y),this.dragPosition.scale=this.dragStart.scale*this.dragOffset.scale,m.length>1){let p=r(c.startPointers[0],c.startPointers[1]),m=p.clientX-this.dragStart.rect.x,b=p.clientY-this.dragStart.rect.y,{deltaX:v,deltaY:$}=this.getZoomDelta(this.content.scale*this.dragOffset.scale,m,b);this.dragPosition.x-=v,this.dragPosition.y-=$,this.dragPosition.midPoint=x}else this.setDragResistance();this.transform={x:this.dragPosition.x,y:this.dragPosition.y,scale:this.dragPosition.scale},this.startAnimation()}},end:(p,m)=>{if("pointerdown"!==this.state)return;if(this._dragOffset={...this.dragOffset},c.currentPointers.length)return void this.resetDragPosition();if(this.state="decel",this.friction=this.option("decelFriction"),this.recalculateTransform(),this.$container.classList.remove(this.option("draggingClass")),!1===this.trigger("touchEnd",m)||"decel"!==this.state)return;let b=this.option("minScale");if(this.transform.scale<b)return void this.zoomTo(b,{friction:.64});let v=this.option("maxScale");if(this.transform.scale-v>.01){let c=this.dragPosition.midPoint||p,m=this.$content.getClientRects()[0];this.zoomTo(v,{friction:.64,x:c.clientX-m.left,y:c.clientY-m.top})}}});this.pointerTracker=c}initObserver(){this.resizeObserver||(this.resizeObserver=new b(()=>{this.updateTimer||(this.updateTimer=setTimeout(()=>{let c=this.$container.getBoundingClientRect();c.width&&c.height&&(Math.abs(c.width-this.container.width)>1||Math.abs(c.height-this.container.height)>1)&&(this.isAnimating()&&this.endAnimation(!0),this.updateMetrics(),this.panTo({x:this.content.x,y:this.content.y,scale:this.option("baseScale"),friction:0})),this.updateTimer=null},this.updateRate))}),this.resizeObserver.observe(this.$container))}resetDragPosition(){this.lockAxis=null,this.friction=this.option("friction"),this.velocity={x:0,y:0,scale:0};let{x:c,y:p,scale:m}=this.content;this.dragStart={rect:this.$content.getBoundingClientRect(),x:c,y:p,scale:m},this.dragPosition={...this.dragPosition,x:c,y:p,scale:m},this.dragOffset={x:0,y:0,scale:1,time:0}}updateMetrics(c){!0!==c&&this.trigger("beforeUpdate");let p=this.$container,m=this.$content,b=this.$viewport,v=m instanceof HTMLImageElement,x=this.option("zoom"),$=this.option("resizeParent",x),E=this.option("width"),_=this.option("height"),z=E||Math.max(parseFloat(m.naturalWidth||0),parseFloat(m.width&&m.width.baseVal&&m.width.baseVal.value||0),parseFloat(m.offsetWidth||0),parseFloat(m.scrollWidth||0)),O=_||Math.max(parseFloat(m.naturalHeight||0),parseFloat(m.height&&m.height.baseVal&&m.height.baseVal.value||0),parseFloat(m.offsetHeight||0),parseFloat(m.scrollHeight||0));Object.assign(m.style,{width:E?`${E}px`:"",height:_?`${_}px`:"",maxWidth:"",maxHeight:""}),$&&Object.assign(b.style,{width:"",height:""});let M=this.option("ratio");z=i(z*M),O=i(O*M),E=z,_=O;let I=m.getBoundingClientRect(),F=b.getBoundingClientRect(),N=b==p?F:p.getBoundingClientRect(),D=Math.max(b.offsetWidth,i(F.width)),B=Math.max(b.offsetHeight,i(F.height)),H=window.getComputedStyle(b);if(D-=parseFloat(H.paddingLeft)+parseFloat(H.paddingRight),B-=parseFloat(H.paddingTop)+parseFloat(H.paddingBottom),this.viewport.width=D,this.viewport.height=B,x){if(Math.abs(z-I.width)>.1||Math.abs(O-I.height)>.1){let c=((c,p,m,b)=>{let v=Math.min(m/c||0,b/p);return{width:c*v||0,height:p*v||0}})(z,O,Math.min(z,I.width),Math.min(O,I.height));E=i(c.width),_=i(c.height)}Object.assign(m.style,{width:`${E}px`,height:`${_}px`,transform:""})}if($&&(Object.assign(b.style,{width:`${E}px`,height:`${_}px`}),this.viewport={...this.viewport,width:E,height:_}),v&&x&&"function"!=typeof this.options.maxScale){let c=this.option("maxScale");this.options.maxScale=function(){return this.content.origWidth>0&&this.content.fitWidth>0?this.content.origWidth/this.content.fitWidth:c}}this.content={...this.content,origWidth:z,origHeight:O,fitWidth:E,fitHeight:_,width:E,height:_,scale:1,isZoomable:x},this.container={width:N.width,height:N.height},!0!==c&&this.trigger("afterUpdate")}zoomIn(c){this.zoomTo(this.content.scale+(c||this.option("step")))}zoomOut(c){this.zoomTo(this.content.scale-(c||this.option("step")))}toggleZoom(c={}){let p=this.option("maxScale"),m=this.option("baseScale"),b=this.content.scale>m+.5*(p-m)?m:p;this.zoomTo(b,c)}zoomTo(c=this.option("baseScale"),{x:p=null,y:m=null}={}){c=Math.max(Math.min(c,this.option("maxScale")),this.option("minScale"));let b=i(this.content.scale/(this.content.width/this.content.fitWidth),1e7);null===p&&(p=this.content.width*b*.5),null===m&&(m=this.content.height*b*.5);let{deltaX:v,deltaY:x}=this.getZoomDelta(c,p,m);p=this.content.x-v,m=this.content.y-x,this.panTo({x:p,y:m,scale:c,friction:this.option("zoomFriction")})}getZoomDelta(c,p=0,m=0){let b=this.content.fitWidth*this.content.scale,v=this.content.fitHeight*this.content.scale;return{deltaX:(this.content.fitWidth*c-b)*(p>0&&b?p/b:0),deltaY:(this.content.fitHeight*c-v)*(m>0&&v?m/v:0)}}panTo({x:c=this.content.x,y:p=this.content.y,scale:m,friction:b=this.option("friction"),ignoreBounds:v=!1}={}){if(m=m||this.content.scale||1,!v){let{boundX:b,boundY:v}=this.getBounds(m);b&&(c=Math.max(Math.min(c,b.to),b.from)),v&&(p=Math.max(Math.min(p,v.to),v.from))}this.friction=b,this.transform={...this.transform,x:c,y:p,scale:m},b?(this.state="panning",this.velocity={x:(1/this.friction-1)*(c-this.content.x),y:(1/this.friction-1)*(p-this.content.y),scale:(1/this.friction-1)*(m-this.content.scale)},this.startAnimation()):this.endAnimation()}startAnimation(){this.rAF?cancelAnimationFrame(this.rAF):this.trigger("startAnimation"),this.rAF=requestAnimationFrame(()=>this.animate())}animate(){if(this.setEdgeForce(),this.setDragForce(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.velocity.scale*=this.friction,this.content.x+=this.velocity.x,this.content.y+=this.velocity.y,this.content.scale+=this.velocity.scale,this.isAnimating())this.setTransform();else if("pointerdown"!==this.state)return void this.endAnimation();this.rAF=requestAnimationFrame(()=>this.animate())}getBounds(c){let p=this.boundX,m=this.boundY;if(void 0!==p&&void 0!==m)return{boundX:p,boundY:m};p={from:0,to:0},m={from:0,to:0},c=c||this.transform.scale;let b=this.content.fitWidth*c,v=this.content.fitHeight*c,x=this.viewport.width,$=this.viewport.height;if(b<x){let c=i(.5*(x-b));p.from=c,p.to=c}else p.from=i(x-b);if(v<$){let c=.5*($-v);m.from=c,m.to=c}else m.from=i($-v);return{boundX:p,boundY:m}}setEdgeForce(){let c,p,m,b;if("decel"!==this.state)return;let v=this.option("bounceForce"),{boundX:x,boundY:$}=this.getBounds(Math.max(this.transform.scale,this.content.scale));if(x&&(c=this.content.x<x.from,p=this.content.x>x.to),$&&(m=this.content.y<$.from,b=this.content.y>$.to),c||p){let p=((c?x.from:x.to)-this.content.x)*v,m=this.content.x+(this.velocity.x+p)/this.friction;m>=x.from&&m<=x.to&&(p+=this.velocity.x),this.velocity.x=p,this.recalculateTransform()}if(m||b){let c=((m?$.from:$.to)-this.content.y)*v,p=this.content.y+(c+this.velocity.y)/this.friction;p>=$.from&&p<=$.to&&(c+=this.velocity.y),this.velocity.y=c,this.recalculateTransform()}}setDragResistance(){let c,p,m,b;if("pointerdown"!==this.state)return;let{boundX:v,boundY:x}=this.getBounds(this.dragPosition.scale);if(v&&(c=this.dragPosition.x<v.from,p=this.dragPosition.x>v.to),x&&(m=this.dragPosition.y<x.from,b=this.dragPosition.y>x.to),(c||p)&&(!c||!p)){let p=c?v.from:v.to,m=p-this.dragPosition.x;this.dragPosition.x=p-.3*m}if((m||b)&&(!m||!b)){let c=m?x.from:x.to,p=c-this.dragPosition.y;this.dragPosition.y=c-.3*p}}setDragForce(){"pointerdown"===this.state&&(this.velocity.x=this.dragPosition.x-this.content.x,this.velocity.y=this.dragPosition.y-this.content.y,this.velocity.scale=this.dragPosition.scale-this.content.scale)}recalculateTransform(){this.transform.x=this.content.x+this.velocity.x/(1/this.friction-1),this.transform.y=this.content.y+this.velocity.y/(1/this.friction-1),this.transform.scale=this.content.scale+this.velocity.scale/(1/this.friction-1)}isAnimating(){return!(!this.friction||!(Math.abs(this.velocity.x)>.05||Math.abs(this.velocity.y)>.05||Math.abs(this.velocity.scale)>.05))}setTransform(c){let p,m,b;if(c?(p=i(this.transform.x),m=i(this.transform.y),b=this.transform.scale,this.content={...this.content,x:p,y:m,scale:b}):(p=i(this.content.x),m=i(this.content.y),b=this.content.scale/(this.content.width/this.content.fitWidth),this.content={...this.content,x:p,y:m}),this.trigger("beforeTransform"),p=i(this.content.x),m=i(this.content.y),c&&this.option("zoom")){let c,v;c=i(this.content.fitWidth*b),v=i(this.content.fitHeight*b),this.content.width=c,this.content.height=v,this.transform={...this.transform,width:c,height:v,scale:b},Object.assign(this.$content.style,{width:`${c}px`,height:`${v}px`,maxWidth:"none",maxHeight:"none",transform:`translate3d(${p}px, ${m}px, 0) scale(1)`})}else this.$content.style.transform=`translate3d(${p}px, ${m}px, 0) scale(${b})`;this.trigger("afterTransform")}endAnimation(c){cancelAnimationFrame(this.rAF),this.rAF=null,this.velocity={x:0,y:0,scale:0},this.setTransform(!0),this.state="ready",this.handleCursor(),!0!==c&&this.trigger("endAnimation")}handleCursor(){let c=this.option("draggableClass");c&&this.option("touch")&&(1==this.option("panOnlyZoomed")&&this.content.width<=this.viewport.width&&this.content.height<=this.viewport.height&&this.transform.scale<=this.option("baseScale")?this.$container.classList.remove(c):this.$container.classList.add(c))}detachEvents(){this.$content.removeEventListener("load",this.onLoad),this.$container.removeEventListener("wheel",this.onWheel,{passive:!1}),this.$container.removeEventListener("click",this.onClick,{passive:!1}),this.pointerTracker&&(this.pointerTracker.stop(),this.pointerTracker=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}destroy(){"destroy"!==this.state&&(this.state="destroy",clearTimeout(this.updateTimer),this.updateTimer=null,cancelAnimationFrame(this.rAF),this.rAF=null,this.detachEvents(),this.detachPlugins(),this.resetDragPosition())}};d.version="4.0.31",d.Plugins={};let u=(c,p)=>{let m=0;return function(...b){let v=(new Date).getTime();if(!(v-m<p))return m=v,c(...b)}};let f=class f{constructor(c){this.$container=null,this.$prev=null,this.$next=null,this.carousel=c,this.onRefresh=this.onRefresh.bind(this)}option(c){return this.carousel.option(`Navigation.${c}`)}createButton(c){let p=document.createElement("button");p.setAttribute("title",this.carousel.localize(`{{${c.toUpperCase()}}}`));let m=this.option("classNames.button")+" "+this.option(`classNames.${c}`);return p.classList.add(...m.split(" ")),p.setAttribute("tabindex","0"),p.innerHTML=this.carousel.localize(this.option(`${c}Tpl`)),p.addEventListener("click",p=>{p.preventDefault(),p.stopPropagation(),this.carousel["slide"+("next"===c?"Next":"Prev")]()}),p}build(){this.$container||(this.$container=document.createElement("div"),this.$container.classList.add(...this.option("classNames.main").split(" ")),this.carousel.$container.appendChild(this.$container)),this.$next||(this.$next=this.createButton("next"),this.$container.appendChild(this.$next)),this.$prev||(this.$prev=this.createButton("prev"),this.$container.appendChild(this.$prev))}onRefresh(){let c=this.carousel.pages.length;c<=1||c>1&&this.carousel.elemDimWidth<this.carousel.wrapDimWidth&&!Number.isInteger(this.carousel.option("slidesPerPage"))?this.cleanup():(this.build(),this.$prev.removeAttribute("disabled"),this.$next.removeAttribute("disabled"),this.carousel.option("infiniteX",this.carousel.option("infinite"))||(this.carousel.page<=0&&this.$prev.setAttribute("disabled",""),this.carousel.page>=c-1&&this.$next.setAttribute("disabled","")))}cleanup(){this.$prev&&this.$prev.remove(),this.$prev=null,this.$next&&this.$next.remove(),this.$next=null,this.$container&&this.$container.remove(),this.$container=null}attach(){this.carousel.on("refresh change",this.onRefresh)}detach(){this.carousel.off("refresh change",this.onRefresh),this.cleanup()}};f.defaults={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',classNames:{main:"carousel__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}};let g=class g{constructor(c){this.carousel=c,this.selectedIndex=null,this.friction=0,this.onNavReady=this.onNavReady.bind(this),this.onNavClick=this.onNavClick.bind(this),this.onNavCreateSlide=this.onNavCreateSlide.bind(this),this.onTargetChange=this.onTargetChange.bind(this)}addAsTargetFor(c){this.target=this.carousel,this.nav=c,this.attachEvents()}addAsNavFor(c){this.target=c,this.nav=this.carousel,this.attachEvents()}attachEvents(){this.nav.options.initialSlide=this.target.options.initialPage,this.nav.on("ready",this.onNavReady),this.nav.on("createSlide",this.onNavCreateSlide),this.nav.on("Panzoom.click",this.onNavClick),this.target.on("change",this.onTargetChange),this.target.on("Panzoom.afterUpdate",this.onTargetChange)}onNavReady(){this.onTargetChange(!0)}onNavClick(c,p,m){let b=m.target.closest(".carousel__slide");if(!b)return;m.stopPropagation();let v=parseInt(b.dataset.index,10),x=this.target.findPageForSlide(v);this.target.page!==x&&this.target.slideTo(x,{friction:this.friction}),this.markSelectedSlide(v)}onNavCreateSlide(c,p){p.index===this.selectedIndex&&this.markSelectedSlide(p.index)}onTargetChange(){let c=this.target.pages[this.target.page].indexes[0],p=this.nav.findPageForSlide(c);this.nav.slideTo(p),this.markSelectedSlide(c)}markSelectedSlide(c){this.selectedIndex=c,[...this.nav.slides].filter(c=>c.$el&&c.$el.classList.remove("is-nav-selected"));let p=this.nav.slides[c];p&&p.$el&&p.$el.classList.add("is-nav-selected")}attach(c){let p=c.options.Sync;(p.target||p.nav)&&(p.target?this.addAsNavFor(p.target):p.nav&&this.addAsTargetFor(p.nav),this.friction=p.friction)}detach(){this.nav&&(this.nav.off("ready",this.onNavReady),this.nav.off("Panzoom.click",this.onNavClick),this.nav.off("createSlide",this.onNavCreateSlide)),this.target&&(this.target.off("Panzoom.afterUpdate",this.onTargetChange),this.target.off("change",this.onTargetChange))}};g.defaults={friction:.92};let x={slides:[],preload:0,slidesPerPage:"auto",initialPage:null,initialSlide:null,friction:.92,center:!0,infinite:!0,fill:!0,dragFree:!1,prefix:"",classNames:{viewport:"carousel__viewport",track:"carousel__track",slide:"carousel__slide",slideSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}};let y=class y extends l{constructor(c,p={}){if(super(p=e(!0,{},x,p)),this.state="init",this.$container=c,!(this.$container instanceof HTMLElement))throw Error("No root element provided");this.slideNext=u(this.slideNext.bind(this),250),this.slidePrev=u(this.slidePrev.bind(this),250),this.init(),c.__Carousel=this}init(){this.pages=[],this.page=this.pageIndex=null,this.prevPage=this.prevPageIndex=null,this.attachPlugins(y.Plugins),this.trigger("init"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.$track&&this.pages.length&&(this.$track.style.transform=`translate3d(${-1*this.pages[this.page].left}px, 0px, 0) scale(1)`),this.manageSlideVisiblity(),this.initPanzoom(),this.state="ready",this.trigger("ready")}initLayout(){let c=this.option("prefix"),p=this.option("classNames");this.$viewport=this.option("viewport")||this.$container.querySelector(`.${c}${p.viewport}`),this.$viewport||(this.$viewport=document.createElement("div"),this.$viewport.classList.add(...(c+p.viewport).split(" ")),this.$viewport.append(...this.$container.childNodes),this.$container.appendChild(this.$viewport)),this.$track=this.option("track")||this.$container.querySelector(`.${c}${p.track}`),this.$track||(this.$track=document.createElement("div"),this.$track.classList.add(...(c+p.track).split(" ")),this.$track.append(...this.$viewport.childNodes),this.$viewport.appendChild(this.$track))}initSlides(){this.slides=[],this.$viewport.querySelectorAll(`.${this.option("prefix")}${this.option("classNames.slide")}`).forEach(c=>{let p={$el:c,isDom:!0};this.slides.push(p),this.trigger("createSlide",p,this.slides.length)}),Array.isArray(this.options.slides)&&(this.slides=e(!0,[...this.slides],this.options.slides))}updateMetrics(){let c,p,m=0,b=[];this.slides.forEach((c,v)=>{let x=c.$el,$=c.isDom||!p?this.getSlideMetrics(x):p;c.index=v,c.width=$,c.left=m,p=$,m+=$,b.push(v)});let v=Math.max(this.$track.offsetWidth,i(this.$track.getBoundingClientRect().width)),x=getComputedStyle(this.$track);v-=parseFloat(x.paddingLeft)+parseFloat(x.paddingRight),this.contentWidth=m,this.viewportWidth=v;let $=[],E=this.option("slidesPerPage");if(Number.isInteger(E)&&m>v)for(let c=0;c<this.slides.length;c+=E)$.push({indexes:b.slice(c,c+E),slides:this.slides.slice(c,c+E)});else{let c=0,p=0;for(let m=0;m<this.slides.length;m+=1){let b=this.slides[m];(!$.length||p+b.width>v)&&($.push({indexes:[],slides:[]}),c=$.length-1,p=0),p+=b.width,$[c].indexes.push(m),$[c].slides.push(b)}}let _=this.option("center"),z=this.option("fill");$.forEach((c,p)=>{c.index=p,c.width=c.slides.reduce((c,p)=>c+p.width,0),c.left=c.slides[0].left,_&&(c.left+=-(.5*(v-c.width)*1)),z&&!this.option("infiniteX",this.option("infinite"))&&m>v&&(c.left=Math.max(c.left,0),c.left=Math.min(c.left,m-v))});let O=[];$.forEach(p=>{let m={...p};c&&m.left===c.left?(c.width+=m.width,c.slides=[...c.slides,...m.slides],c.indexes=[...c.indexes,...m.indexes]):(m.index=O.length,c=m,O.push(m))}),this.pages=O;let M=this.page;if(null===M){let c=this.option("initialSlide");O[M=null!==c?this.findPageForSlide(c):parseInt(this.option("initialPage",0),10)||0]||(M=O.length&&M>O.length?O[O.length-1].index:0),this.page=M,this.pageIndex=M}this.updatePanzoom(),this.trigger("refresh")}getSlideMetrics(c){if(!c){let p=this.slides[0];(c=document.createElement("div")).dataset.isTestEl=1,c.style.visibility="hidden",c.classList.add(...(this.option("prefix")+this.option("classNames.slide")).split(" ")),p.customClass&&c.classList.add(...p.customClass.split(" ")),this.$track.prepend(c)}let p=Math.max(c.offsetWidth,i(c.getBoundingClientRect().width)),m=c.currentStyle||window.getComputedStyle(c);return p=p+(parseFloat(m.marginLeft)||0)+(parseFloat(m.marginRight)||0),c.dataset.isTestEl&&c.remove(),p}findPageForSlide(c){c=parseInt(c,10)||0;let p=this.pages.find(p=>p.indexes.indexOf(c)>-1);return p?p.index:null}slideNext(){this.slideTo(this.pageIndex+1)}slidePrev(){this.slideTo(this.pageIndex-1)}slideTo(c,p={}){let{x:m=-1*this.setPage(c,!0),y:b=0,friction:v=this.option("friction")}=p;this.Panzoom.content.x===m&&!this.Panzoom.velocity.x&&v||(this.Panzoom.panTo({x:m,y:b,friction:v,ignoreBounds:!0}),"ready"===this.state&&"ready"===this.Panzoom.state&&this.trigger("settle"))}initPanzoom(){this.Panzoom&&this.Panzoom.destroy();let c=e(!0,{},{content:this.$track,wrapInner:!1,resizeParent:!1,zoom:!1,click:!1,lockAxis:"x",x:this.pages.length?-1*this.pages[this.page].left:0,centerOnStart:!1,textSelection:()=>this.option("textSelection",!1),panOnlyZoomed:function(){return this.content.width<=this.viewport.width}},this.option("Panzoom"));this.Panzoom=new d(this.$container,c),this.Panzoom.on({"*":(c,...p)=>this.trigger(`Panzoom.${c}`,...p),afterUpdate:()=>{this.updatePage()},beforeTransform:this.onBeforeTransform.bind(this),touchEnd:this.onTouchEnd.bind(this),endAnimation:()=>{this.trigger("settle")}}),this.updateMetrics(),this.manageSlideVisiblity()}updatePanzoom(){this.Panzoom&&(this.Panzoom.content={...this.Panzoom.content,fitWidth:this.contentWidth,origWidth:this.contentWidth,width:this.contentWidth},this.pages.length>1&&this.option("infiniteX",this.option("infinite"))?this.Panzoom.boundX=null:this.pages.length&&(this.Panzoom.boundX={from:-1*this.pages[this.pages.length-1].left,to:-1*this.pages[0].left}),this.option("infiniteY",this.option("infinite"))?this.Panzoom.boundY=null:this.Panzoom.boundY={from:0,to:0},this.Panzoom.handleCursor())}manageSlideVisiblity(){let c=this.contentWidth,p=this.viewportWidth,m=this.Panzoom?-1*this.Panzoom.content.x:this.pages.length?this.pages[this.page].left:0,b=this.option("preload"),v=this.option("infiniteX",this.option("infinite")),x=parseFloat(getComputedStyle(this.$viewport,null).getPropertyValue("padding-left")),$=parseFloat(getComputedStyle(this.$viewport,null).getPropertyValue("padding-right"));this.slides.forEach(E=>{let _,z,O=0;_=m-x,z=m+p+$,_-=b*(p+x+$),z+=b*(p+x+$);let M=E.left+E.width>_&&E.left<z;_=m+c-x,z=m+c+p+$,_-=b*(p+x+$);let I=v&&E.left+E.width>_&&E.left<z;_=m-c-x,z=m-c+p+$,_-=b*(p+x+$);let F=v&&E.left+E.width>_&&E.left<z;I||M||F?(this.createSlideEl(E),M&&(O=0),I&&(O=-1),F&&(O=1),E.left+E.width>m&&E.left<=m+p+$&&(O=0)):this.removeSlideEl(E),E.hasDiff=O});let E=0,_=0;this.slides.forEach((p,m)=>{let b=0;p.$el?(m!==E||p.hasDiff?b=_+p.hasDiff*c:_=0,p.$el.style.left=Math.abs(b)>.1?`${_+p.hasDiff*c}px`:"",E++):_+=p.width}),this.markSelectedSlides()}createSlideEl(c){if(!c)return;if(c.$el){let p=c.$el.dataset.index;if(!p||parseInt(p,10)!==c.index){let p;c.$el.dataset.index=c.index,c.$el.querySelectorAll("[data-lazy-srcset]").forEach(c=>{c.srcset=c.dataset.lazySrcset}),c.$el.querySelectorAll("[data-lazy-src]").forEach(c=>{let p=c.dataset.lazySrc;c instanceof HTMLImageElement?c.src=p:c.style.backgroundImage=`url('${p}')`}),(p=c.$el.dataset.lazySrc)&&(c.$el.style.backgroundImage=`url('${p}')`),c.state="ready"}return}let p=document.createElement("div");p.dataset.index=c.index,p.classList.add(...(this.option("prefix")+this.option("classNames.slide")).split(" ")),c.customClass&&p.classList.add(...c.customClass.split(" ")),c.html&&(p.innerHTML=c.html);let m=[];this.slides.forEach((c,p)=>{c.$el&&m.push(p)});let b=c.index,v=null;if(m.length){let c=m.reduce((c,p)=>Math.abs(p-b)<Math.abs(c-b)?p:c);v=this.slides[c]}return this.$track.insertBefore(p,v&&v.$el?v.index<c.index?v.$el.nextSibling:v.$el:null),c.$el=p,this.trigger("createSlide",c,b),c}removeSlideEl(c){c.$el&&!c.isDom&&(this.trigger("removeSlide",c),c.$el.remove(),c.$el=null)}markSelectedSlides(){let c=this.option("classNames.slideSelected"),p="aria-hidden";this.slides.forEach((m,b)=>{let v=m.$el;if(!v)return;let x=this.pages[this.page];x&&x.indexes&&x.indexes.indexOf(b)>-1?(c&&!v.classList.contains(c)&&(v.classList.add(c),this.trigger("selectSlide",m)),v.removeAttribute(p)):(c&&v.classList.contains(c)&&(v.classList.remove(c),this.trigger("unselectSlide",m)),v.setAttribute(p,!0))})}updatePage(){this.updateMetrics(),this.slideTo(this.page,{friction:0})}onBeforeTransform(){this.option("infiniteX",this.option("infinite"))&&this.manageInfiniteTrack(),this.manageSlideVisiblity()}manageInfiniteTrack(){let c=this.contentWidth,p=this.viewportWidth;if(!this.option("infiniteX",this.option("infinite"))||this.pages.length<2||c<p)return;let m=this.Panzoom,b=!1;return m.content.x<-1*(c-p)&&(m.content.x+=c,this.pageIndex=this.pageIndex-this.pages.length,b=!0),m.content.x>p&&(m.content.x-=c,this.pageIndex=this.pageIndex+this.pages.length,b=!0),b&&"pointerdown"===m.state&&m.resetDragPosition(),b}onTouchEnd(c,p){let m=this.option("dragFree");if(!m&&this.pages.length>1&&c.dragOffset.time<350&&1>Math.abs(c.dragOffset.y)&&Math.abs(c.dragOffset.x)>5)this[c.dragOffset.x<0?"slideNext":"slidePrev"]();else if(m){let[,p]=this.getPageFromPosition(-1*c.transform.x);this.setPage(p)}else this.slideToClosest()}slideToClosest(c={}){let[,p]=this.getPageFromPosition(-1*this.Panzoom.content.x);this.slideTo(p,c)}getPageFromPosition(c){let p=this.pages.length;this.option("center")&&(c+=.5*this.viewportWidth);let m=Math.floor(c/this.contentWidth);c-=m*this.contentWidth;let b=this.slides.find(p=>p.left<=c&&p.left+p.width>c);if(b){let c=this.findPageForSlide(b.index);return[c,c+m*p]}return[0,0]}setPage(c,p){let m=0,b=parseInt(c,10)||0,v=this.page,x=this.pageIndex,$=this.pages.length,E=this.contentWidth,_=this.viewportWidth;if(c=(b%$+$)%$,this.option("infiniteX",this.option("infinite"))&&E>_){let v=Math.floor(b/$)||0;if(m=this.pages[c].left+v*E,!0===p&&$>2){let c=-1*this.Panzoom.content.x,p=m-E,v=m+E,x=Math.abs(c-m),_=Math.abs(c-p),z=Math.abs(c-v);z<x&&z<=_?(m=v,b+=$):_<x&&_<z&&(m=p,b-=$)}}else c=b=Math.max(0,Math.min(b,$-1)),m=this.pages.length?this.pages[c].left:0;return this.page=c,this.pageIndex=b,null!==v&&c!==v&&(this.prevPage=v,this.prevPageIndex=x,this.trigger("change",c,v)),m}destroy(){this.state="destroy",this.slides.forEach(c=>{this.removeSlideEl(c)}),this.slides=[],this.Panzoom.destroy(),this.detachPlugins()}};y.version="4.0.31",y.Plugins={Navigation:f,Dots:class{constructor(c){this.carousel=c,this.$list=null,this.events={change:this.onChange.bind(this),refresh:this.onRefresh.bind(this)}}buildList(){if(this.carousel.pages.length<this.carousel.option("Dots.minSlideCount"))return;let c=document.createElement("ol");return c.classList.add("carousel__dots"),c.addEventListener("click",c=>{if(!("page"in c.target.dataset))return;c.preventDefault(),c.stopPropagation();let p=parseInt(c.target.dataset.page,10),m=this.carousel;p!==m.page&&(m.pages.length<3&&m.option("infinite")?m[0==p?"slidePrev":"slideNext"]():m.slideTo(p))}),this.$list=c,this.carousel.$container.appendChild(c),this.carousel.$container.classList.add("has-dots"),c}removeList(){this.$list&&(this.$list.parentNode.removeChild(this.$list),this.$list=null),this.carousel.$container.classList.remove("has-dots")}rebuildDots(){let c=this.$list,p=!!c,m=this.carousel.pages.length;if(m<2)return void(p&&this.removeList());p||(c=this.buildList());let b=this.$list.children.length;if(b>m)for(let c=m;c<b;c++)this.$list.removeChild(this.$list.lastChild);else{for(let c=b;c<m;c++){let p=document.createElement("li");p.classList.add("carousel__dot"),p.dataset.page=c,p.setAttribute("role","button"),p.setAttribute("tabindex","0"),p.setAttribute("title",this.carousel.localize("{{GOTO}}",[["%d",c+1]])),p.addEventListener("keydown",c=>{let m;let b=c.code;"Enter"===b||"NumpadEnter"===b?m=p:"ArrowRight"===b?m=p.nextSibling:"ArrowLeft"===b&&(m=p.previousSibling),m&&m.click()}),this.$list.appendChild(p)}this.setActiveDot()}}setActiveDot(){if(!this.$list)return;this.$list.childNodes.forEach(c=>{c.classList.remove("is-selected")});let c=this.$list.childNodes[this.carousel.page];c&&c.classList.add("is-selected")}onChange(){this.setActiveDot()}onRefresh(){this.rebuildDots()}attach(){this.carousel.on(this.events)}detach(){this.removeList(),this.carousel.off(this.events),this.carousel=null}},Sync:g};let $=!("undefined"==typeof window||!window.document||!window.document.createElement),E=null,_=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'],w=c=>{if(c&&$){null===E&&document.createElement("div").focus({get preventScroll(){return E=!0,!1}});try{if(c.setActive)c.setActive();else if(E)c.focus({preventScroll:!0});else{let p=window.pageXOffset||document.body.scrollTop,m=window.pageYOffset||document.body.scrollLeft;c.focus(),document.body.scrollTo({top:p,left:m,behavior:"auto"})}}catch(c){}}};let C=class C{constructor(c){for(let p of(this.fancybox=c,this.$container=null,this.state="init",["onPrepare","onClosing","onKeydown"]))this[p]=this[p].bind(this);this.events={prepare:this.onPrepare,closing:this.onClosing,keydown:this.onKeydown}}onPrepare(){this.getSlides().length<this.fancybox.option("Thumbs.minSlideCount")?this.state="disabled":!0===this.fancybox.option("Thumbs.autoStart")&&this.fancybox.Carousel.Panzoom.content.height>=this.fancybox.option("Thumbs.minScreenHeight")&&this.build()}onClosing(){this.Carousel&&this.Carousel.Panzoom.detachEvents()}onKeydown(c,p){p===c.option("Thumbs.key")&&this.toggle()}build(){if(this.$container)return;let c=document.createElement("div");c.classList.add("fancybox__thumbs"),this.fancybox.$carousel.parentNode.insertBefore(c,this.fancybox.$carousel.nextSibling),this.Carousel=new y(c,e(!0,{Dots:!1,Navigation:!1,Sync:{friction:0},infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,preload:1},this.fancybox.option("Thumbs.Carousel"),{Sync:{target:this.fancybox.Carousel},slides:this.getSlides()})),this.Carousel.Panzoom.on("wheel",(c,p)=>{p.preventDefault(),this.fancybox[p.deltaY<0?"prev":"next"]()}),this.$container=c,this.state="visible"}getSlides(){let c=[];for(let p of this.fancybox.items){let m=p.thumb;m&&c.push({html:this.fancybox.option("Thumbs.tpl").replace(/\{\{src\}\}/gi,m),customClass:`has-thumb has-${p.type||"image"}`})}return c}toggle(){"visible"===this.state?this.hide():"hidden"===this.state?this.show():this.build()}show(){"hidden"===this.state&&(this.$container.style.display="",this.Carousel.Panzoom.attachEvents(),this.state="visible")}hide(){"visible"===this.state&&(this.Carousel.Panzoom.detachEvents(),this.$container.style.display="none",this.state="hidden")}cleanup(){this.Carousel&&(this.Carousel.destroy(),this.Carousel=null),this.$container&&(this.$container.remove(),this.$container=null),this.state="init"}attach(){this.fancybox.on(this.events)}detach(){this.fancybox.off(this.events),this.cleanup()}};C.defaults={minSlideCount:2,minScreenHeight:500,autoStart:!0,key:"t",Carousel:{},tpl:'<div class="fancybox__thumb" style="background-image:url(\'{{src}}\')"></div>'};let S=(c,p)=>{let m=new URL(c),b=new URLSearchParams(m.search),v=new URLSearchParams;for(let[c,m]of[...b,...Object.entries(p)])"t"===c?v.set("start",parseInt(m)):v.set(c,m);v=v.toString();let x=c.match(/#t=((.*)?\d+s)/);return x&&(v+=`#t=${x[1]}`),v},z={video:{autoplay:!0,ratio:16/9},youtube:{autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},vimeo:{hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},html5video:{tpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',format:""}};let P=class P{constructor(c){for(let p of(this.fancybox=c,["onInit","onReady","onCreateSlide","onRemoveSlide","onSelectSlide","onUnselectSlide","onRefresh","onMessage"]))this[p]=this[p].bind(this);this.events={init:this.onInit,ready:this.onReady,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide,"Carousel.selectSlide":this.onSelectSlide,"Carousel.unselectSlide":this.onUnselectSlide,"Carousel.refresh":this.onRefresh}}onInit(){for(let c of this.fancybox.items)this.processType(c)}processType(c){if(c.html)return c.src=c.html,c.type="html",void delete c.html;let p=c.src||"",m=c.type||this.fancybox.options.type,b=null;if(!p||"string"==typeof p){if(b=p.match(/(?:youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){let v=S(p,this.fancybox.option("Html.youtube")),x=encodeURIComponent(b[1]);c.videoId=x,c.src=`https://www.youtube-nocookie.com/embed/${x}?${v}`,c.thumb=c.thumb||`https://i.ytimg.com/vi/${x}/mqdefault.jpg`,c.vendor="youtube",m="video"}else if(b=p.match(/^.+vimeo.com\/(?:\/)?([\d]+)(.*)?/)){let v=S(p,this.fancybox.option("Html.vimeo")),x=encodeURIComponent(b[1]);c.videoId=x,c.src=`https://player.vimeo.com/video/${x}?${v}`,c.vendor="vimeo",m="video"}else(b=p.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(c.src=`//maps.google.${b[1]}/?ll=${(b[2]?b[2]+"&z="+Math.floor(b[3])+(b[4]?b[4].replace(/^\//,"&"):""):b[4]+"").replace(/\?/,"&")}&output=${b[4]&&b[4].indexOf("layer=c")>0?"svembed":"embed"}`,m="map"):(b=p.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(c.src=`//maps.google.${b[1]}/maps?q=${b[2].replace("query=","q=").replace("api=1","")}&output=embed`,m="map");m||("#"===p.charAt(0)?m="inline":(b=p.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(m="html5video",c.format=c.format||"video/"+("ogv"===b[1]?"ogg":b[1])):p.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?m="image":p.match(/\.(pdf)((\?|#).*)?$/i)&&(m="pdf")),c.type=m||this.fancybox.option("defaultType","image"),"html5video"!==m&&"video"!==m||(c.video=e({},this.fancybox.option("Html.video"),c.video),c._width&&c._height?c.ratio=parseFloat(c._width)/parseFloat(c._height):c.ratio=c.ratio||c.video.ratio||z.video.ratio)}}onReady(){this.fancybox.Carousel.slides.forEach(c=>{c.$el&&(this.setContent(c),c.index===this.fancybox.getSlide().index&&this.playVideo(c))})}onCreateSlide(c,p,m){"ready"===this.fancybox.state&&this.setContent(m)}loadInlineContent(c){let p;if(c.src instanceof HTMLElement)p=c.src;else if("string"==typeof c.src){let m=c.src.split("#",2),b=2===m.length&&""===m[0]?m[1]:m[0];p=document.getElementById(b)}if(p){if("clone"===c.type||p.$placeHolder){let m=(p=p.cloneNode(!0)).getAttribute("id");m=m?`${m}--clone`:`clone-${this.fancybox.id}-${c.index}`,p.setAttribute("id",m)}else{let c=document.createElement("div");c.classList.add("fancybox-placeholder"),p.parentNode.insertBefore(c,p),p.$placeHolder=c}this.fancybox.setContent(c,p)}else this.fancybox.setError(c,"{{ELEMENT_NOT_FOUND}}")}loadAjaxContent(c){let p=this.fancybox,m=new XMLHttpRequest;p.showLoading(c),m.onreadystatechange=function(){m.readyState===XMLHttpRequest.DONE&&"ready"===p.state&&(p.hideLoading(c),200===m.status?p.setContent(c,m.responseText):p.setError(c,404===m.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};let b=c.ajax||null;m.open(b?"POST":"GET",c.src),m.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),m.setRequestHeader("X-Requested-With","XMLHttpRequest"),m.send(b),c.xhr=m}loadIframeContent(c){let p=this.fancybox,m=document.createElement("iframe");if(m.className="fancybox__iframe",m.setAttribute("id",`fancybox__iframe_${p.id}_${c.index}`),m.setAttribute("allow","autoplay; fullscreen"),m.setAttribute("scrolling","auto"),c.$iframe=m,"iframe"!==c.type||!1===c.preload)return m.setAttribute("src",c.src),this.fancybox.setContent(c,m),void this.resizeIframe(c);p.showLoading(c);let b=document.createElement("div");b.style.visibility="hidden",this.fancybox.setContent(c,b),b.appendChild(m),m.onerror=()=>{p.setError(c,"{{IFRAME_ERROR}}")},m.onload=()=>{p.hideLoading(c);let b=!1;m.isReady||(m.isReady=!0,b=!0),m.src.length&&(m.parentNode.style.visibility="",this.resizeIframe(c),b&&p.revealContent(c))},m.setAttribute("src",c.src)}setAspectRatio(c){let p=c.$content,m=c.ratio;if(!p)return;let b=c._width,v=c._height;if(m||b&&v){Object.assign(p.style,{width:b&&v?"100%":"",height:b&&v?"100%":"",maxWidth:"",maxHeight:""});let c=p.offsetWidth,x=p.offsetHeight;if(b=b||c,v=v||x,b>c||v>x){let p=Math.min(c/b,x/v);b*=p,v*=p}Math.abs(b/v-m)>.01&&(m<b/v?b=v*m:v=b/m),Object.assign(p.style,{width:`${b}px`,height:`${v}px`})}}resizeIframe(c){let p=c.$iframe;if(!p)return;let m=c._width||0,b=c._height||0;m&&b&&(c.autoSize=!1);let v=p.parentNode,x=v&&v.style;if(!1!==c.preload&&!1!==c.autoSize&&x)try{let c=window.getComputedStyle(v),$=parseFloat(c.paddingLeft)+parseFloat(c.paddingRight),E=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom),_=p.contentWindow.document,z=_.getElementsByTagName("html")[0],O=_.body;x.width="",O.style.overflow="hidden",m=m||z.scrollWidth+$,x.width=`${m}px`,O.style.overflow="",x.flex="0 0 auto",x.height=`${O.scrollHeight}px`,b=z.scrollHeight+E}catch(c){}if(m||b){let c={flex:"0 1 auto"};m&&(c.width=`${m}px`),b&&(c.height=`${b}px`),Object.assign(x,c)}}onRefresh(c,p){p.slides.forEach(c=>{c.$el&&(c.$iframe&&this.resizeIframe(c),c.ratio&&this.setAspectRatio(c))})}setContent(c){if(c&&!c.isDom){switch(c.type){case"html":this.fancybox.setContent(c,c.src);break;case"html5video":this.fancybox.setContent(c,this.fancybox.option("Html.html5video.tpl").replace(/\{\{src\}\}/gi,c.src).replace("{{format}}",c.format||c.html5video&&c.html5video.format||"").replace("{{poster}}",c.poster||c.thumb||""));break;case"inline":case"clone":this.loadInlineContent(c);break;case"ajax":this.loadAjaxContent(c);break;case"pdf":case"video":case"map":c.preload=!1;case"iframe":this.loadIframeContent(c)}c.ratio&&this.setAspectRatio(c)}}onSelectSlide(c,p,m){"ready"===c.state&&this.playVideo(m)}playVideo(c){if("html5video"===c.type&&c.video.autoplay)try{let p=c.$el.querySelector("video");if(p){let c=p.play();void 0!==c&&c.then(()=>{}).catch(c=>{p.muted=!0,p.play()})}}catch(c){}if("video"!==c.type||!c.$iframe||!c.$iframe.contentWindow)return;let e=()=>{if("done"===c.state&&c.$iframe&&c.$iframe.contentWindow){let p;if(c.$iframe.isReady)return c.video&&c.video.autoplay&&(p="youtube"==c.vendor?{event:"command",func:"playVideo"}:{method:"play",value:"true"}),void(p&&c.$iframe.contentWindow.postMessage(JSON.stringify(p),"*"));"youtube"===c.vendor&&(p={event:"listening",id:c.$iframe.getAttribute("id")},c.$iframe.contentWindow.postMessage(JSON.stringify(p),"*"))}c.poller=setTimeout(e,250)};e()}onUnselectSlide(c,p,m){if("html5video"===m.type){try{m.$el.querySelector("video").pause()}catch(c){}return}let b=!1;"vimeo"==m.vendor?b={method:"pause",value:"true"}:"youtube"===m.vendor&&(b={event:"command",func:"pauseVideo"}),b&&m.$iframe&&m.$iframe.contentWindow&&m.$iframe.contentWindow.postMessage(JSON.stringify(b),"*"),clearTimeout(m.poller)}onRemoveSlide(c,p,m){m.xhr&&(m.xhr.abort(),m.xhr=null),m.$iframe&&(m.$iframe.onload=m.$iframe.onerror=null,m.$iframe.src="//about:blank",m.$iframe=null);let b=m.$content;"inline"===m.type&&b&&(b.classList.remove("fancybox__content"),"none"!==b.style.display&&(b.style.display="none")),m.$closeButton&&(m.$closeButton.remove(),m.$closeButton=null);let v=b&&b.$placeHolder;v&&(v.parentNode.insertBefore(b,v),v.remove(),b.$placeHolder=null)}onMessage(c){try{let p=JSON.parse(c.data);if("https://player.vimeo.com"===c.origin){if("ready"===p.event)for(let p of document.getElementsByClassName("fancybox__iframe"))p.contentWindow===c.source&&(p.isReady=1)}else"https://www.youtube-nocookie.com"===c.origin&&"onReady"===p.event&&(document.getElementById(p.id).isReady=1)}catch(c){}}attach(){this.fancybox.on(this.events),window.addEventListener("message",this.onMessage,!1)}detach(){this.fancybox.off(this.events),window.removeEventListener("message",this.onMessage,!1)}};P.defaults=z;let T=class T{constructor(c){for(let p of(this.fancybox=c,["onReady","onClosing","onDone","onPageChange","onCreateSlide","onRemoveSlide","onImageStatusChange"]))this[p]=this[p].bind(this);this.events={ready:this.onReady,closing:this.onClosing,done:this.onDone,"Carousel.change":this.onPageChange,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide}}onReady(){this.fancybox.Carousel.slides.forEach(c=>{c.$el&&this.setContent(c)})}onDone(c,p){this.handleCursor(p)}onClosing(c){clearTimeout(this.clickTimer),this.clickTimer=null,c.Carousel.slides.forEach(c=>{c.$image&&(c.state="destroy"),c.Panzoom&&c.Panzoom.detachEvents()}),"closing"===this.fancybox.state&&this.canZoom(c.getSlide())&&this.zoomOut()}onCreateSlide(c,p,m){"ready"===this.fancybox.state&&this.setContent(m)}onRemoveSlide(c,p,m){m.$image&&(m.$el.classList.remove(c.option("Image.canZoomInClass")),m.$image.remove(),m.$image=null),m.Panzoom&&(m.Panzoom.destroy(),m.Panzoom=null),m.$el&&m.$el.dataset&&delete m.$el.dataset.imageFit}setContent(c){if(c.isDom||c.html||c.type&&"image"!==c.type||c.$image)return;c.type="image",c.state="loading";let p=document.createElement("div");p.style.visibility="hidden";let m=document.createElement("img");m.addEventListener("load",p=>{p.stopImmediatePropagation(),this.onImageStatusChange(c)}),m.addEventListener("error",()=>{this.onImageStatusChange(c)}),m.src=c.src,m.alt="",m.draggable=!1,m.classList.add("fancybox__image"),c.srcset&&m.setAttribute("srcset",c.srcset),c.sizes&&m.setAttribute("sizes",c.sizes),c.$image=m;let b=this.fancybox.option("Image.wrap");if(b){let v=document.createElement("div");v.classList.add("string"==typeof b?b:"fancybox__image-wrap"),v.appendChild(m),p.appendChild(v),c.$wrap=v}else p.appendChild(m);c.$el.dataset.imageFit=this.fancybox.option("Image.fit"),this.fancybox.setContent(c,p),m.complete||m.error?this.onImageStatusChange(c):this.fancybox.showLoading(c)}onImageStatusChange(c){let p=c.$image;p&&"loading"===c.state&&(p.complete&&p.naturalWidth&&p.naturalHeight?(this.fancybox.hideLoading(c),"contain"===this.fancybox.option("Image.fit")&&this.initSlidePanzoom(c),c.$el.addEventListener("wheel",p=>this.onWheel(c,p),{passive:!1}),c.$content.addEventListener("click",p=>this.onClick(c,p),{passive:!1}),this.revealContent(c)):this.fancybox.setError(c,"{{IMAGE_ERROR}}"))}initSlidePanzoom(c){c.Panzoom||(c.Panzoom=new d(c.$el,e(!0,this.fancybox.option("Image.Panzoom",{}),{viewport:c.$wrap,content:c.$image,width:c._width,height:c._height,wrapInner:!1,textSelection:!0,touch:this.fancybox.option("Image.touch"),panOnlyZoomed:!0,click:!1,wheel:!1})),c.Panzoom.on("startAnimation",()=>{this.fancybox.trigger("Image.startAnimation",c)}),c.Panzoom.on("endAnimation",()=>{"zoomIn"===c.state&&this.fancybox.done(c),this.handleCursor(c),this.fancybox.trigger("Image.endAnimation",c)}),c.Panzoom.on("afterUpdate",()=>{this.handleCursor(c),this.fancybox.trigger("Image.afterUpdate",c)}))}revealContent(c){null===this.fancybox.Carousel.prevPage&&c.index===this.fancybox.options.startIndex&&this.canZoom(c)?this.zoomIn():this.fancybox.revealContent(c)}getZoomInfo(c){let p=c.$thumb.getBoundingClientRect(),m=p.width,b=p.height,v=c.$content.getBoundingClientRect(),x=v.width,$=v.height,E=v.top-p.top,_=v.left-p.left,z=this.fancybox.option("Image.zoomOpacity");return"auto"===z&&(z=Math.abs(m/b-x/$)>.1),{top:E,left:_,scale:x&&m?m/x:1,opacity:z}}canZoom(c){let p;let m=this.fancybox,b=m.$container;if(window.visualViewport&&1!==window.visualViewport.scale||c.Panzoom&&!c.Panzoom.content.width||!m.option("Image.zoom")||"contain"!==m.option("Image.fit"))return!1;let v=c.$thumb;if(!v||"loading"===c.state)return!1;b.classList.add("fancybox__no-click");let x=v.getBoundingClientRect();if(this.fancybox.option("Image.ignoreCoveredThumbnail")){let c=document.elementFromPoint(x.left+1,x.top+1)===v,m=document.elementFromPoint(x.right-1,x.bottom-1)===v;p=c&&m}else p=document.elementFromPoint(x.left+.5*x.width,x.top+.5*x.height)===v;return b.classList.remove("fancybox__no-click"),p}zoomIn(){let c=this.fancybox,p=c.getSlide(),m=p.Panzoom,{top:b,left:v,scale:x,opacity:$}=this.getZoomInfo(p);c.trigger("reveal",p),m.panTo({x:-1*v,y:-1*b,scale:x,friction:0,ignoreBounds:!0}),p.$content.style.visibility="",p.state="zoomIn",!0===$&&m.on("afterTransform",c=>{"zoomIn"!==p.state&&"zoomOut"!==p.state||(c.$content.style.opacity=Math.min(1,1-(1-c.content.scale)/(1-x)))}),m.panTo({x:0,y:0,scale:1,friction:this.fancybox.option("Image.zoomFriction")})}zoomOut(){let c=this.fancybox,p=c.getSlide(),m=p.Panzoom;if(!m)return;p.state="zoomOut",c.state="customClosing",p.$caption&&(p.$caption.style.visibility="hidden");let b=this.fancybox.option("Image.zoomFriction"),o=c=>{let{top:v,left:x,scale:$,opacity:E}=this.getZoomInfo(p);c||E||(b*=.82),m.panTo({x:-1*x,y:-1*v,scale:$,friction:b,ignoreBounds:!0}),b*=.98};window.addEventListener("scroll",o),m.once("endAnimation",()=>{window.removeEventListener("scroll",o),c.destroy()}),o()}handleCursor(c){if("image"!==c.type||!c.$el)return;let p=c.Panzoom,m=this.fancybox.option("Image.click",!1,c),b=this.fancybox.option("Image.touch"),v=c.$el.classList,x=this.fancybox.option("Image.canZoomInClass"),$=this.fancybox.option("Image.canZoomOutClass");(v.remove($),v.remove(x),p&&"toggleZoom"===m)?p&&1===p.content.scale&&p.option("maxScale")-p.content.scale>.01?v.add(x):p.content.scale>1&&!b&&v.add($):"close"===m&&v.add($)}onWheel(c,p){if("ready"===this.fancybox.state&&!1!==this.fancybox.trigger("Image.wheel",p))switch(this.fancybox.option("Image.wheel")){case"zoom":"done"===c.state&&c.Panzoom&&c.Panzoom.zoomWithWheel(p);break;case"close":this.fancybox.close();break;case"slide":this.fancybox[p.deltaY<0?"prev":"next"]()}}onClick(c,p){if("ready"!==this.fancybox.state)return;let m=c.Panzoom;if(m&&(m.dragPosition.midPoint||0!==m.dragOffset.x||0!==m.dragOffset.y||1!==m.dragOffset.scale))return;if(this.fancybox.Carousel.Panzoom.lockAxis)return!1;let s=m=>{switch(m){case"toggleZoom":p.stopPropagation(),c.Panzoom&&c.Panzoom.zoomWithClick(p);break;case"close":this.fancybox.close();break;case"next":p.stopPropagation(),this.fancybox.next()}},b=this.fancybox.option("Image.click"),v=this.fancybox.option("Image.doubleClick");v?this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null,s(v)):this.clickTimer=setTimeout(()=>{this.clickTimer=null,s(b)},300):s(b)}onPageChange(c,p){let m=c.getSlide();p.slides.forEach(c=>{c.Panzoom&&"done"===c.state&&c.index!==m.index&&c.Panzoom.panTo({x:0,y:0,scale:1,friction:.8})})}attach(){this.fancybox.on(this.events)}detach(){this.fancybox.off(this.events)}};T.defaults={canZoomInClass:"can-zoom_in",canZoomOutClass:"can-zoom_out",zoom:!0,zoomOpacity:"auto",zoomFriction:.82,ignoreCoveredThumbnail:!1,touch:!0,click:"toggleZoom",doubleClick:null,wheel:"zoom",fit:"contain",wrap:!1,Panzoom:{ratio:1}};let L=class L{constructor(c){for(let p of(this.fancybox=c,["onChange","onClosing"]))this[p]=this[p].bind(this);this.events={initCarousel:this.onChange,"Carousel.change":this.onChange,closing:this.onClosing},this.hasCreatedHistory=!1,this.origHash="",this.timer=null}onChange(c){let p=c.Carousel;this.timer&&clearTimeout(this.timer);let m=null===p.prevPage,b=c.getSlide(),v=new URL(document.URL).hash,x=!1;if(b.slug)x="#"+b.slug;else{let m=b.$trigger&&b.$trigger.dataset,v=c.option("slug")||m&&m.fancybox;v&&v.length&&"true"!==v&&(x="#"+v+(p.slides.length>1?"-"+(b.index+1):""))}m&&(this.origHash=v!==x?v:""),x&&v!==x&&(this.timer=setTimeout(()=>{try{window.history[m?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+x),m&&(this.hasCreatedHistory=!0)}catch(c){}},300))}onClosing(){if(this.timer&&clearTimeout(this.timer),!0!==this.hasSilentClose)try{return void window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash||""))}catch(c){}}attach(c){c.on(this.events)}detach(c){c.off(this.events)}static startFromUrl(){let c=L.Fancybox;if(!c||c.getInstance()||!1===c.defaults.Hash)return;let{hash:p,slug:m,index:b}=L.getParsedURL();if(!m)return;let v=document.querySelector(`[data-slug="${p}"]`);if(v&&v.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),c.getInstance())return;let x=document.querySelectorAll(`[data-fancybox="${m}"]`);x.length&&(null===b&&1===x.length?v=x[0]:b&&(v=x[b-1]),v&&v.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))}static onHashChange(){let{slug:c,index:p}=L.getParsedURL(),m=L.Fancybox,b=m&&m.getInstance();if(b&&b.plugins.Hash){if(c){let m=b.Carousel;if(c===b.option("slug"))return m.slideTo(p-1);for(let p of m.slides)if(p.slug&&p.slug===c)return m.slideTo(p.index);let v=b.getSlide(),x=v.$trigger&&v.$trigger.dataset;if(x&&x.fancybox===c)return m.slideTo(p-1)}b.plugins.Hash.hasSilentClose=!0,b.close()}L.startFromUrl()}static create(c){function e(){window.addEventListener("hashchange",L.onHashChange,!1),L.startFromUrl()}L.Fancybox=c,$&&window.requestAnimationFrame(()=>{/complete|interactive|loaded/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",e)})}static destroy(){window.removeEventListener("hashchange",L.onHashChange,!1)}static getParsedURL(){let c=window.location.hash.substr(1),p=c.split("-"),m=p.length>1&&/^\+?\d+$/.test(p[p.length-1])&&parseInt(p.pop(-1),10)||null;return{hash:c,slug:p.join("-"),index:m}}};let O={pageXOffset:0,pageYOffset:0,element:()=>document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,activate(c){O.pageXOffset=window.pageXOffset,O.pageYOffset=window.pageYOffset,c.requestFullscreen?c.requestFullscreen():c.mozRequestFullScreen?c.mozRequestFullScreen():c.webkitRequestFullscreen?c.webkitRequestFullscreen():c.msRequestFullscreen&&c.msRequestFullscreen()},deactivate(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}};let A=class A{constructor(c){this.fancybox=c,this.active=!1,this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}isActive(){return this.active}setTimer(){if(!this.active||this.timer)return;let c=this.fancybox.option("slideshow.delay",3e3);this.timer=setTimeout(()=>{this.timer=null,this.fancybox.option("infinite")||this.fancybox.getSlide().index!==this.fancybox.Carousel.slides.length-1?this.fancybox.next():this.fancybox.jumpTo(0,{friction:0})},c);let p=this.$progress;p||((p=document.createElement("div")).classList.add("fancybox__progress"),this.fancybox.$carousel.parentNode.insertBefore(p,this.fancybox.$carousel),this.$progress=p,p.offsetHeight),p.style.transitionDuration=`${c}ms`,p.style.transform="scaleX(1)"}clearTimer(){clearTimeout(this.timer),this.timer=null,this.$progress&&(this.$progress.style.transitionDuration="",this.$progress.style.transform="",this.$progress.offsetHeight)}activate(){this.active||(this.active=!0,this.fancybox.$container.classList.add("has-slideshow"),"done"===this.fancybox.getSlide().state&&this.setTimer(),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1))}handleVisibilityChange(){this.deactivate()}deactivate(){this.active=!1,this.clearTimer(),this.fancybox.$container.classList.remove("has-slideshow"),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1)}toggle(){this.active?this.deactivate():this.fancybox.Carousel.slides.length>1&&this.activate()}};let k=class k{constructor(c){for(let p of(this.fancybox=c,this.$container=null,this.state="init",["onInit","onPrepare","onDone","onKeydown","onClosing","onChange","onSettle","onRefresh"]))this[p]=this[p].bind(this);this.events={init:this.onInit,prepare:this.onPrepare,done:this.onDone,keydown:this.onKeydown,closing:this.onClosing,"Carousel.change":this.onChange,"Carousel.settle":this.onSettle,"Carousel.Panzoom.touchStart":()=>this.onRefresh(),"Image.startAnimation":(c,p)=>this.onRefresh(p),"Image.afterUpdate":(c,p)=>this.onRefresh(p)}}onInit(){if(this.fancybox.option("Toolbar.autoEnable")){let c=!1;for(let p of this.fancybox.items)if("image"===p.type){c=!0;break}if(!c)return void(this.state="disabled")}for(let c of this.fancybox.option("Toolbar.display"))if("close"===(t(c)?c.id:c)){this.fancybox.options.closeButton=!1;break}}onPrepare(){let c=this.fancybox;if("init"===this.state&&(this.build(),this.update(),this.Slideshow=new A(c),!c.Carousel.prevPage&&(c.option("slideshow.autoStart")&&this.Slideshow.activate(),c.option("fullscreen.autoStart")&&!O.element())))try{O.activate(c.$container)}catch(c){}}onFsChange(){window.scrollTo(O.pageXOffset,O.pageYOffset)}onSettle(){let c=this.fancybox,p=this.Slideshow;p&&p.isActive()&&(c.getSlide().index!==c.Carousel.slides.length-1||c.option("infinite")?"done"===c.getSlide().state&&p.setTimer():p.deactivate())}onChange(){this.update(),this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer()}onDone(c,p){let m=this.Slideshow;p.index===c.getSlide().index&&(this.update(),m&&m.isActive()&&(c.option("infinite")||p.index!==c.Carousel.slides.length-1?m.setTimer():m.deactivate()))}onRefresh(c){c&&c.index!==this.fancybox.getSlide().index||(this.update(),this.Slideshow&&this.Slideshow.isActive()&&(!c||"done"===c.state)&&this.Slideshow.deactivate())}onKeydown(c,p,m){" "===p&&this.Slideshow&&(this.Slideshow.toggle(),m.preventDefault())}onClosing(){this.Slideshow&&this.Slideshow.deactivate(),document.removeEventListener("fullscreenchange",this.onFsChange)}createElement(c){let p;for(let m in"div"===c.type?p=document.createElement("div"):(p=document.createElement("link"===c.type?"a":"button")).classList.add("carousel__button"),p.innerHTML=c.html,p.setAttribute("tabindex",c.tabindex||0),c.class&&p.classList.add(...c.class.split(" ")),c.attr)p.setAttribute(m,c.attr[m]);c.label&&p.setAttribute("title",this.fancybox.localize(`{{${c.label}}}`)),c.click&&p.addEventListener("click",c.click.bind(this)),"prev"===c.id&&p.setAttribute("data-fancybox-prev",""),"next"===c.id&&p.setAttribute("data-fancybox-next","");let m=p.querySelector("svg");return m&&(m.setAttribute("role","img"),m.setAttribute("tabindex","-1"),m.setAttribute("xmlns","http://www.w3.org/2000/svg")),p}build(){this.cleanup();let c=this.fancybox.option("Toolbar.items"),p=[{position:"left",items:[]},{position:"center",items:[]},{position:"right",items:[]}],m=this.fancybox.plugins.Thumbs;for(let b of this.fancybox.option("Toolbar.display")){let v,x;if(x=t(b)?e({},c[v=b.id],b):c[v=b],["counter","next","prev","slideshow"].includes(v)&&this.fancybox.items.length<2)continue;if("fullscreen"===v){if(!document.fullscreenEnabled||window.fullScreen)continue;document.addEventListener("fullscreenchange",this.onFsChange)}if("thumbs"===v&&(!m||"disabled"===m.state)||!x)continue;let $=x.position||"right",E=p.find(c=>c.position===$);E&&E.items.push(x)}let b=document.createElement("div");for(let c of(b.classList.add("fancybox__toolbar"),p))if(c.items.length){let p=document.createElement("div");for(let m of(p.classList.add("fancybox__toolbar__items"),p.classList.add(`fancybox__toolbar__items--${c.position}`),c.items))p.appendChild(this.createElement(m));b.appendChild(p)}this.fancybox.$carousel.parentNode.insertBefore(b,this.fancybox.$carousel),this.$container=b}update(){let c=this.fancybox.getSlide(),p=c.index,m=this.fancybox.items.length,b=c.downloadSrc||("image"!==c.type||c.error?null:c.src);for(let c of this.fancybox.$container.querySelectorAll("a.fancybox__button--download"))b?(c.removeAttribute("disabled"),c.removeAttribute("tabindex"),c.setAttribute("href",b),c.setAttribute("download",b),c.setAttribute("target","_blank")):(c.setAttribute("disabled",""),c.setAttribute("tabindex",-1),c.removeAttribute("href"),c.removeAttribute("download"));let v=c.Panzoom,x=v&&v.option("maxScale")>v.option("baseScale");for(let c of this.fancybox.$container.querySelectorAll(".fancybox__button--zoom"))x?c.removeAttribute("disabled"):c.setAttribute("disabled","");for(let p of this.fancybox.$container.querySelectorAll("[data-fancybox-index]"))p.innerHTML=c.index+1;for(let c of this.fancybox.$container.querySelectorAll("[data-fancybox-count]"))c.innerHTML=m;if(!this.fancybox.option("infinite")){for(let c of this.fancybox.$container.querySelectorAll("[data-fancybox-prev]"))0===p?c.setAttribute("disabled",""):c.removeAttribute("disabled");for(let c of this.fancybox.$container.querySelectorAll("[data-fancybox-next]"))p===m-1?c.setAttribute("disabled",""):c.removeAttribute("disabled")}}cleanup(){this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer(),this.$container&&this.$container.remove(),this.$container=null}attach(){this.fancybox.on(this.events)}detach(){this.fancybox.off(this.events),this.cleanup()}};k.defaults={display:["counter","zoom","slideshow","fullscreen","thumbs","close"],autoEnable:!0,items:{counter:{position:"left",type:"div",class:"fancybox__counter",html:'<span data-fancybox-index=""></span>&nbsp;/&nbsp;<span data-fancybox-count=""></span>',attr:{tabindex:-1}},prev:{type:"button",class:"fancybox__button--prev",label:"PREV",html:'<svg viewBox="0 0 24 24"><path d="M15 4l-8 8 8 8"/></svg>',attr:{"data-fancybox-prev":""}},next:{type:"button",class:"fancybox__button--next",label:"NEXT",html:'<svg viewBox="0 0 24 24"><path d="M8 4l8 8-8 8"/></svg>',attr:{"data-fancybox-next":""}},fullscreen:{type:"button",class:"fancybox__button--fullscreen",label:"TOGGLE_FULLSCREEN",html:'<svg viewBox="0 0 24 24">\n                <g><path d="M3 8 V3h5"></path><path d="M21 8V3h-5"></path><path d="M8 21H3v-5"></path><path d="M16 21h5v-5"></path></g>\n                <g><path d="M7 2v5H2M17 2v5h5M2 17h5v5M22 17h-5v5"/></g>\n            </svg>',click:function(c){c.preventDefault(),O.element()?O.deactivate():O.activate(this.fancybox.$container)}},slideshow:{type:"button",class:"fancybox__button--slideshow",label:"TOGGLE_SLIDESHOW",html:'<svg viewBox="0 0 24 24">\n                <g><path d="M6 4v16"/><path d="M20 12L6 20"/><path d="M20 12L6 4"/></g>\n                <g><path d="M7 4v15M17 4v15"/></g>\n            </svg>',click:function(c){c.preventDefault(),this.Slideshow.toggle()}},zoom:{type:"button",class:"fancybox__button--zoom",label:"TOGGLE_ZOOM",html:'<svg viewBox="0 0 24 24"><circle cx="10" cy="10" r="7"></circle><path d="M16 16 L21 21"></svg>',click:function(c){c.preventDefault();let p=this.fancybox.getSlide().Panzoom;p&&p.toggleZoom()}},download:{type:"link",label:"DOWNLOAD",class:"fancybox__button--download",html:'<svg viewBox="0 0 24 24"><path d="M12 15V3m0 12l-4-4m4 4l4-4M2 17l.62 2.48A2 2 0 004.56 21h14.88a2 2 0 001.94-1.51L22 17"/></svg>',click:function(c){c.stopPropagation()}},thumbs:{type:"button",label:"TOGGLE_THUMBS",class:"fancybox__button--thumbs",html:'<svg viewBox="0 0 24 24"><circle cx="4" cy="4" r="1" /><circle cx="12" cy="4" r="1" transform="rotate(90 12 4)"/><circle cx="20" cy="4" r="1" transform="rotate(90 20 4)"/><circle cx="4" cy="12" r="1" transform="rotate(90 4 12)"/><circle cx="12" cy="12" r="1" transform="rotate(90 12 12)"/><circle cx="20" cy="12" r="1" transform="rotate(90 20 12)"/><circle cx="4" cy="20" r="1" transform="rotate(90 4 20)"/><circle cx="12" cy="20" r="1" transform="rotate(90 12 20)"/><circle cx="20" cy="20" r="1" transform="rotate(90 20 20)"/></svg>',click:function(c){c.stopPropagation();let p=this.fancybox.plugins.Thumbs;p&&p.toggle()}},close:{type:"button",label:"CLOSE",class:"fancybox__button--close",html:'<svg viewBox="0 0 24 24"><path d="M20 20L4 4m16 0L4 20"></path></svg>',attr:{"data-fancybox-close":"",tabindex:0}}}};let M={startIndex:0,preload:1,infinite:!0,showClass:"fancybox-zoomInUp",hideClass:"fancybox-fadeOut",animated:!0,hideScrollbar:!0,parentEl:null,mainClass:null,autoFocus:!0,trapFocus:!0,placeFocusBack:!0,click:"close",closeButton:"inside",dragToClose:!0,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"next",ArrowDown:"prev",ArrowRight:"next",ArrowLeft:"prev"},template:{closeButton:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="25 25 50 50" tabindex="-1"><circle cx="50" cy="50" r="20"/></svg>',main:null},l10n:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}},I=new Map,F=0;let R=class R extends l{constructor(c,p={}){c=c.map(c=>(c.width&&(c._width=c.width),c.height&&(c._height=c.height),c)),super(e(!0,{},M,p)),this.bindHandlers(),this.state="init",this.setItems(c),this.attachPlugins(R.Plugins),this.trigger("init"),!0===this.option("hideScrollbar")&&this.hideScrollbar(),this.initLayout(),this.initCarousel(),this.attachEvents(),I.set(this.id,this),this.trigger("prepare"),this.state="ready",this.trigger("ready"),this.$container.setAttribute("aria-hidden","false"),this.option("trapFocus")&&this.focus()}option(c,...p){let m=this.getSlide(),b=m?m[c]:void 0;return void 0!==b?("function"==typeof b&&(b=b.call(this,this,...p)),b):super.option(c,...p)}bindHandlers(){for(let c of["onMousedown","onKeydown","onClick","onFocus","onCreateSlide","onSettle","onTouchMove","onTouchEnd","onTransform"])this[c]=this[c].bind(this)}attachEvents(){document.addEventListener("mousedown",this.onMousedown),document.addEventListener("keydown",this.onKeydown,!0),this.option("trapFocus")&&document.addEventListener("focus",this.onFocus,!0),this.$container.addEventListener("click",this.onClick)}detachEvents(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("keydown",this.onKeydown,!0),document.removeEventListener("focus",this.onFocus,!0),this.$container.removeEventListener("click",this.onClick)}initLayout(){this.$root=this.option("parentEl")||document.body;let c=this.option("template.main");c&&(this.$root.insertAdjacentHTML("beforeend",this.localize(c)),this.$container=this.$root.querySelector(".fancybox__container")),this.$container||(this.$container=document.createElement("div"),this.$root.appendChild(this.$container)),this.$container.onscroll=()=>(this.$container.scrollLeft=0,!1),Object.entries({class:"fancybox__container",role:"dialog",tabIndex:"-1","aria-modal":"true","aria-hidden":"true","aria-label":this.localize("{{MODAL}}")}).forEach(c=>this.$container.setAttribute(...c)),this.option("animated")&&this.$container.classList.add("is-animated"),this.$backdrop=this.$container.querySelector(".fancybox__backdrop"),this.$backdrop||(this.$backdrop=document.createElement("div"),this.$backdrop.classList.add("fancybox__backdrop"),this.$container.appendChild(this.$backdrop)),this.$carousel=this.$container.querySelector(".fancybox__carousel"),this.$carousel||(this.$carousel=document.createElement("div"),this.$carousel.classList.add("fancybox__carousel"),this.$container.appendChild(this.$carousel)),this.$container.Fancybox=this,this.id=this.$container.getAttribute("id"),this.id||(this.id=this.options.id||++F,this.$container.setAttribute("id","fancybox-"+this.id));let p=this.option("mainClass");return p&&this.$container.classList.add(...p.split(" ")),document.documentElement.classList.add("with-fancybox"),this.trigger("initLayout"),this}setItems(c){let p=[];for(let m of c){let c=m.$trigger;if(c){let p=c.dataset||{};m.src=p.src||c.getAttribute("href")||m.src,m.type=p.type||m.type,!m.src&&c instanceof HTMLImageElement&&(m.src=c.currentSrc||m.$trigger.src)}let b=m.$thumb;if(!b){let c=m.$trigger&&m.$trigger.origTarget;c&&(b=c instanceof HTMLImageElement?c:c.querySelector("img:not([aria-hidden])")),!b&&m.$trigger&&(b=m.$trigger instanceof HTMLImageElement?m.$trigger:m.$trigger.querySelector("img:not([aria-hidden])"))}m.$thumb=b||null;let v=m.thumb;v||!b||(v=b.currentSrc||b.src)||!b.dataset||(v=b.dataset.lazySrc||b.dataset.src),v||"image"!==m.type||(v=m.src),m.thumb=v||null,m.caption=m.caption||"",p.push(m)}this.items=p}initCarousel(){return this.Carousel=new y(this.$carousel,e(!0,{},{prefix:"",classNames:{viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"},textSelection:!0,preload:this.option("preload"),friction:.88,slides:this.items,initialPage:this.options.startIndex,slidesPerPage:1,infiniteX:this.option("infinite"),infiniteY:!0,l10n:this.option("l10n"),Dots:!1,Navigation:{classNames:{main:"fancybox__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}},Panzoom:{textSelection:!0,panOnlyZoomed:()=>this.Carousel&&this.Carousel.pages&&this.Carousel.pages.length<2&&!this.option("dragToClose"),lockAxis:()=>{if(this.Carousel){let c="x";return this.option("dragToClose")&&(c+="y"),c}}},on:{"*":(c,...p)=>this.trigger(`Carousel.${c}`,...p),init:c=>this.Carousel=c,createSlide:this.onCreateSlide,settle:this.onSettle}},this.option("Carousel"))),this.option("dragToClose")&&this.Carousel.Panzoom.on({touchMove:this.onTouchMove,afterTransform:this.onTransform,touchEnd:this.onTouchEnd}),this.trigger("initCarousel"),this}onCreateSlide(c,p){let m=p.caption||"";if("function"==typeof this.options.caption&&(m=this.options.caption.call(this,this,this.Carousel,p)),"string"==typeof m&&m.length){let c=document.createElement("div"),b=`fancybox__caption_${this.id}_${p.index}`;c.className="fancybox__caption",c.innerHTML=m,c.setAttribute("id",b),p.$caption=p.$el.appendChild(c),p.$el.classList.add("has-caption"),p.$el.setAttribute("aria-labelledby",b)}}onSettle(){this.option("autoFocus")&&this.focus()}onFocus(c){this.isTopmost()&&this.focus(c)}onClick(c){if(c.defaultPrevented)return;let p=c.composedPath()[0];if(p.matches("[data-fancybox-close]"))return c.preventDefault(),void R.close(!1,c);if(p.matches("[data-fancybox-next]"))return c.preventDefault(),void R.next();if(p.matches("[data-fancybox-prev]"))return c.preventDefault(),void R.prev();let m=document.activeElement;if(m){if(m.closest("[contenteditable]"))return;p.matches(_)||m.blur()}if(!p.closest(".fancybox__content")&&!getSelection().toString().length&&!1!==this.trigger("click",c))switch(this.option("click")){case"close":this.close();break;case"next":this.next()}}onTouchMove(){let c=this.getSlide().Panzoom;return!c||1===c.content.scale}onTouchEnd(c){let p=c.dragOffset.y;Math.abs(p)>=150||Math.abs(p)>=35&&c.dragOffset.time<350?(this.option("hideClass")&&(this.getSlide().hideClass="fancybox-throwOut"+(c.content.y<0?"Up":"Down")),this.close()):"y"===c.lockAxis&&c.panTo({y:0})}onTransform(c){if(this.$backdrop){let p=Math.abs(c.content.y),m=p<1?"":Math.max(.33,Math.min(1,1-p/c.content.fitHeight*1.5));this.$container.style.setProperty("--fancybox-ts",m?"0s":""),this.$container.style.setProperty("--fancybox-opacity",m)}}onMousedown(){"ready"===this.state&&document.body.classList.add("is-using-mouse")}onKeydown(c){if(!this.isTopmost())return;document.body.classList.remove("is-using-mouse");let p=c.key,m=this.option("keyboard");if(!m||c.ctrlKey||c.altKey||c.shiftKey)return;let b=c.composedPath()[0],v=document.activeElement&&document.activeElement.classList,x=v&&v.contains("carousel__button");if("Escape"!==p&&!x&&(c.target.isContentEditable||-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(b.nodeName))||!1===this.trigger("keydown",p,c))return;let $=m[p];"function"==typeof this[$]&&this[$]()}getSlide(){let c=this.Carousel;if(!c)return null;let p=null===c.page?c.option("initialPage"):c.page,m=c.pages||[];return m.length&&m[p]?m[p].slides[0]:null}focus(c){if(R.ignoreFocusChange||["init","closing","customClosing","destroy"].indexOf(this.state)>-1)return;let p=this.$container,m=this.getSlide(),b="done"===m.state?m.$el:null;if(b&&b.contains(document.activeElement))return;c&&c.preventDefault(),R.ignoreFocusChange=!0;let v=Array.from(p.querySelectorAll(_)),x,$=[];for(let c of v){let p=c.offsetParent,m=b&&b.contains(c),v=!this.Carousel.$viewport.contains(c);p&&(m||v)?($.push(c),void 0!==c.dataset.origTabindex&&(c.tabIndex=c.dataset.origTabindex,c.removeAttribute("data-orig-tabindex")),(c.hasAttribute("autoFocus")||!x&&m&&!c.classList.contains("carousel__button"))&&(x=c)):(c.dataset.origTabindex=void 0===c.dataset.origTabindex?c.getAttribute("tabindex"):c.dataset.origTabindex,c.tabIndex=-1)}c?$.indexOf(c.target)>-1?this.lastFocus=c.target:this.lastFocus===p?w($[$.length-1]):w(p):this.option("autoFocus")&&x?w(x):0>$.indexOf(document.activeElement)&&w(p),this.lastFocus=document.activeElement,R.ignoreFocusChange=!1}hideScrollbar(){if(!$)return;let c=window.innerWidth-document.documentElement.getBoundingClientRect().width,p="fancybox-style-noscroll",m=document.getElementById(p);m||c>0&&((m=document.createElement("style")).id=p,m.type="text/css",m.innerHTML=`.compensate-for-scrollbar {padding-right: ${c}px;}`,document.getElementsByTagName("head")[0].appendChild(m),document.body.classList.add("compensate-for-scrollbar"))}revealScrollbar(){document.body.classList.remove("compensate-for-scrollbar");let c=document.getElementById("fancybox-style-noscroll");c&&c.remove()}clearContent(c){this.Carousel.trigger("removeSlide",c),c.$content&&(c.$content.remove(),c.$content=null),c.$closeButton&&(c.$closeButton.remove(),c.$closeButton=null),c._className&&c.$el.classList.remove(c._className)}setContent(c,p,m={}){let b;let v=c.$el;if(p instanceof HTMLElement)["img","iframe","video","audio"].indexOf(p.nodeName.toLowerCase())>-1?(b=document.createElement("div")).appendChild(p):b=p;else{let c=document.createRange().createContextualFragment(p);(b=document.createElement("div")).appendChild(c)}if(c.filter&&!c.error&&(b=b.querySelector(c.filter)),b instanceof Element)return c._className=`has-${m.suffix||c.type||"unknown"}`,v.classList.add(c._className),b.classList.add("fancybox__content"),"none"!==b.style.display&&"none"!==getComputedStyle(b).getPropertyValue("display")||(b.style.display=c.display||this.option("defaultDisplay")||"flex"),c.id&&b.setAttribute("id",c.id),c.$content=b,v.prepend(b),this.manageCloseButton(c),"loading"!==c.state&&this.revealContent(c),b;this.setError(c,"{{ELEMENT_NOT_FOUND}}")}manageCloseButton(c){let p=void 0===c.closeButton?this.option("closeButton"):c.closeButton;if(!p||"top"===p&&this.$closeButton)return;let m=document.createElement("button");m.classList.add("carousel__button","is-close"),m.setAttribute("title",this.options.l10n.CLOSE),m.innerHTML=this.option("template.closeButton"),m.addEventListener("click",c=>this.close(c)),"inside"===p?(c.$closeButton&&c.$closeButton.remove(),c.$closeButton=c.$content.appendChild(m)):this.$closeButton=this.$container.insertBefore(m,this.$container.firstChild)}revealContent(c){this.trigger("reveal",c),c.$content.style.visibility="";let p=!1;c.error||"loading"===c.state||null!==this.Carousel.prevPage||c.index!==this.options.startIndex||(p=void 0===c.showClass?this.option("showClass"):c.showClass),p?(c.state="animating",this.animateCSS(c.$content,p,()=>{this.done(c)})):this.done(c)}animateCSS(c,p,m){if(c&&c.dispatchEvent(new CustomEvent("animationend",{bubbles:!0,cancelable:!0})),!c||!p)return void("function"==typeof m&&m());let s=function(b){b.currentTarget===this&&(c.removeEventListener("animationend",s),m&&m(),c.classList.remove(p))};c.addEventListener("animationend",s),c.classList.add(p)}done(c){c.state="done",this.trigger("done",c);let p=this.getSlide();p&&c.index===p.index&&this.option("autoFocus")&&this.focus()}setError(c,p){c.error=p,this.hideLoading(c),this.clearContent(c);let m=document.createElement("div");m.classList.add("fancybox-error"),m.innerHTML=this.localize(p||"<p>{{ERROR}}</p>"),this.setContent(c,m,{suffix:"error"})}showLoading(c){c.state="loading",c.$el.classList.add("is-loading");let p=c.$el.querySelector(".fancybox__spinner");p||((p=document.createElement("div")).classList.add("fancybox__spinner"),p.innerHTML=this.option("template.spinner"),p.addEventListener("click",()=>{this.Carousel.Panzoom.velocity||this.close()}),c.$el.prepend(p))}hideLoading(c){let p=c.$el&&c.$el.querySelector(".fancybox__spinner");p&&(p.remove(),c.$el.classList.remove("is-loading")),"loading"===c.state&&(this.trigger("load",c),c.state="ready")}next(){let c=this.Carousel;c&&c.pages.length>1&&c.slideNext()}prev(){let c=this.Carousel;c&&c.pages.length>1&&c.slidePrev()}jumpTo(...c){this.Carousel&&this.Carousel.slideTo(...c)}isClosing(){return["closing","customClosing","destroy"].includes(this.state)}isTopmost(){return R.getInstance().id==this.id}close(c){if(c&&c.preventDefault(),this.isClosing()||!1===this.trigger("shouldClose",c)||(this.state="closing",this.Carousel.Panzoom.destroy(),this.detachEvents(),this.trigger("closing",c),"destroy"===this.state))return;this.$container.setAttribute("aria-hidden","true"),this.$container.classList.add("is-closing");let p=this.getSlide();if(this.Carousel.slides.forEach(c=>{c.$content&&c.index!==p.index&&this.Carousel.trigger("removeSlide",c)}),"closing"===this.state){let c=void 0===p.hideClass?this.option("hideClass"):p.hideClass;this.animateCSS(p.$content,c,()=>{this.destroy()},!0)}}destroy(){if("destroy"===this.state)return;this.state="destroy",this.trigger("destroy");let c=this.option("placeFocusBack")?this.option("triggerTarget",this.getSlide().$trigger):null;this.Carousel.destroy(),this.detachPlugins(),this.Carousel=null,this.options={},this.events={},this.$container.remove(),this.$container=this.$backdrop=this.$carousel=null,c&&w(c),I.delete(this.id);let p=R.getInstance();p?p.focus():(document.documentElement.classList.remove("with-fancybox"),document.body.classList.remove("is-using-mouse"),this.revealScrollbar())}static show(c,p={}){return new R(c,p)}static fromEvent(c,p={}){if(c.defaultPrevented||c.button&&0!==c.button||c.ctrlKey||c.metaKey||c.shiftKey)return;let m=c.composedPath()[0],b,v,x,$=m;if(($.matches("[data-fancybox-trigger]")||($=$.closest("[data-fancybox-trigger]")))&&(p.triggerTarget=$,b=$&&$.dataset&&$.dataset.fancyboxTrigger),b){let c=document.querySelectorAll(`[data-fancybox="${b}"]`),p=parseInt($.dataset.fancyboxIndex,10)||0;$=c.length?c[p]:$}Array.from(R.openers.keys()).reverse().some(p=>{x=$||m;let b=!1;try{x instanceof Element&&("string"==typeof p||p instanceof String)&&(b=x.matches(p)||(x=x.closest(p)))}catch(c){}return!!b&&(c.preventDefault(),v=p,!0)});let E=!1;if(v){p.event=c,p.target=x,x.origTarget=m,E=R.fromOpener(v,p);let b=R.getInstance();b&&"ready"===b.state&&c.detail&&document.body.classList.add("is-using-mouse")}return E}static fromOpener(c,p={}){let m=[],b=p.startIndex||0,v=p.target||null,x=void 0!==(p=e({},p,R.openers.get(c))).groupAll&&p.groupAll,$=void 0===p.groupAttr?"data-fancybox":p.groupAttr,E=$&&v?v.getAttribute(`${$}`):"";if(!v||E||x){let b=p.root||(v?v.getRootNode():document.body);m=[].slice.call(b.querySelectorAll(c))}if(v&&!x&&(m=E?m.filter(c=>c.getAttribute(`${$}`)===E):[v]),!m.length)return!1;let _=R.getInstance();return!(_&&m.indexOf(_.options.$trigger)>-1)&&(b=v?m.indexOf(v):b,m=m.map(function(c){let p=["false","0","no","null","undefined"],m=["true","1","yes"],b=Object.assign({},c.dataset),v={};for(let[c,x]of Object.entries(b))if("fancybox"!==c){if("width"===c||"height"===c)v[`_${c}`]=x;else if("string"==typeof x||x instanceof String){if(p.indexOf(x)>-1)v[c]=!1;else if(m.indexOf(v[c])>-1)v[c]=!0;else try{v[c]=JSON.parse(x)}catch(p){v[c]=x}}else v[c]=x}return c instanceof Element&&(v.$trigger=c),v}),new R(m,e({},p,{startIndex:b,$trigger:v})))}static bind(c,p={}){function i(){document.body.addEventListener("click",R.fromEvent,!1)}$&&(R.openers.size||(/complete|interactive|loaded/.test(document.readyState)?i():document.addEventListener("DOMContentLoaded",i)),R.openers.set(c,p))}static unbind(c){R.openers.delete(c),R.openers.size||R.destroy()}static destroy(){let c;for(;c=R.getInstance();)c.destroy();R.openers=new Map,document.body.removeEventListener("click",R.fromEvent,!1)}static getInstance(c){return c?I.get(c):Array.from(I.values()).reverse().find(c=>!c.isClosing()&&c)||null}static close(c=!0,p){if(c)for(let c of I.values())c.close(p);else{let c=R.getInstance();c&&c.close(p)}}static next(){let c=R.getInstance();c&&c.next()}static prev(){let c=R.getInstance();c&&c.prev()}};for(let[c,p]of(R.version="4.0.31",R.defaults=M,R.openers=new Map,R.Plugins={ScrollLock:class{constructor(c){for(let p of(this.fancybox=c,this.viewport=null,this.pendingUpdate=null,["onReady","onResize","onTouchstart","onTouchmove"]))this[p]=this[p].bind(this)}onReady(){let c=window.visualViewport;c&&(this.viewport=c,this.startY=0,c.addEventListener("resize",this.onResize),this.updateViewport()),window.addEventListener("touchstart",this.onTouchstart,{passive:!1}),window.addEventListener("touchmove",this.onTouchmove,{passive:!1}),window.addEventListener("wheel",this.onWheel,{passive:!1})}onResize(){this.updateViewport()}updateViewport(){let c=this.fancybox,p=this.viewport,m=p.scale||1,b=c.$container;if(!b)return;let v="",x="",$="";m-1>.1&&(v=p.width*m+"px",x=p.height*m+"px",$=`translate3d(${p.offsetLeft}px, ${p.offsetTop}px, 0) scale(${1/m})`),b.style.width=v,b.style.height=x,b.style.transform=$}onTouchstart(c){this.startY=c.touches?c.touches[0].screenY:c.screenY}onTouchmove(c){let p=this.startY,m=window.innerWidth/window.document.documentElement.clientWidth;if(!c.cancelable||c.touches.length>1||1!==m)return;let b=s(c.composedPath()[0]);if(!b)return void c.preventDefault();let v=window.getComputedStyle(b),x=parseInt(v.getPropertyValue("height"),10),$=c.touches?c.touches[0].screenY:c.screenY,E=p<=$&&0===b.scrollTop,_=p>=$&&b.scrollHeight-b.scrollTop===x;(E||_)&&c.preventDefault()}onWheel(c){s(c.composedPath()[0])||c.preventDefault()}cleanup(){this.pendingUpdate&&(cancelAnimationFrame(this.pendingUpdate),this.pendingUpdate=null);let c=this.viewport;c&&(c.removeEventListener("resize",this.onResize),this.viewport=null),window.removeEventListener("touchstart",this.onTouchstart,!1),window.removeEventListener("touchmove",this.onTouchmove,!1),window.removeEventListener("wheel",this.onWheel,{passive:!1})}attach(){this.fancybox.on("initLayout",this.onReady)}detach(){this.fancybox.off("initLayout",this.onReady),this.cleanup()}},Thumbs:C,Html:P,Toolbar:k,Image:T,Hash:L},R.bind("[data-fancybox]"),Object.entries(R.Plugins||{})))"function"==typeof p.create&&p.create(R)},80263:function(){}}]);
//# sourceMappingURL=9206.3348f3f193e40fbe.js.map