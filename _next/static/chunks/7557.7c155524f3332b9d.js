(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7557],{7557:function(e,n,t){"use strict";t.r(n),t.d(n,{Controlbar:function(){return m},default:function(){return x}});var c=t(91309),i=t(85893),r=t(5152),o=t.n(r),l=t(67294),u=t(25617),a=t(61935),s=t(46554),d=t(20838),f=t(79612);t(85785);var FlickityScenes=function(e){var n=e.onSetRef,t=e.scenesGroupActive,c=e.sceneSelected;return(0,i.jsx)(f.Z,{elementType:"div",className:"carousel",flickityRef:function(e){e&&n(e)},options:{freeScroll:!0,freeScrollFriction:.03,contain:!0,prevNextButtons:!1,pageDots:!1,lazyLoad:!0,cellAlign:"left"},children:null==t?void 0:t.map(function(e){var n;return(0,i.jsxs)("div",{className:"".concat((null==c?void 0:c.id)===e.id?"active":""," itemScene"),children:[(0,i.jsx)("img",{src:e.screenshot||(null===(n=e.media)||void 0===n?void 0:n.src_thumb)||"",alt:""}),(0,i.jsx)("h2",{className:"--sceneTitle",children:e.title})]},e.id)})})},v=t(82604),h=(0,l.forwardRef)(function(e,n){var t=e.onChangeScene,r=e.isShowListScene,o=(0,l.useRef)(null),f=(0,c._)((0,l.useState)(!1),2),h=f[0],S=f[1],m=(0,u.v9)(a.Fr),x=(0,u.v9)(a.Y2),b=(0,l.useMemo)(function(){var e;return 1===m.length&&"uncategory"===m[0].id?"uncategory":(null===(e=m.filter(function(e){return(null==x?void 0:x.group)===e.id})[0])||void 0===e?void 0:e.id)||""},[m,null==x?void 0:x.id]),k=(0,l.useMemo)(function(){var e;return(null===(e=m.filter(function(e){return e.id===b})[0])||void 0===e?void 0:e.scenes)||[]},[b,m]),p=(0,l.useMemo)(function(){return k.findIndex(function(e){return e.id===(null==x?void 0:x.id)})},[null==x?void 0:x.id,k]),g=(0,l.useCallback)(function(e,n,c,i){c&&t(k[i])},[t,k]);return(0,l.useImperativeHandle)(n,function(){return{onPrevScene:function(){if(0!==p){var e,n=p-1;t(k[n]),null===(e=o.current)||void 0===e||e.select(n,!1)}},onNextScene:function(){if(p+1!==k.length){var e,n=p+1;t(k[n]),null===(e=o.current)||void 0===e||e.select(n,!1)}}}}),(0,l.useEffect)(function(){S(!0)},[]),(0,l.useEffect)(function(){var e;return(null==o?void 0:o.current)&&(null===(e=o.current)||void 0===e||e.on("staticClick",g)),function(){var e;(null==o?void 0:o.current)&&(null===(e=o.current)||void 0===e||e.off("staticClick",g))}},[b,g,h]),(0,i.jsxs)(s.bx,{id:"themeListScene",className:"".concat(r?"":"--hide"," ").concat(1===m.length&&"uncategory"===m[0].id?"hideNav":""),children:[1===m.length&&"uncategory"===m[0].id?h&&(0,i.jsx)(FlickityScenes,{sceneSelected:x,scenesGroupActive:k,onSetRef:function(e){if(!o.current&&e){var n;o.current=e,null===(n=o.current)||void 0===n||n.on("staticClick",g)}}}):(0,i.jsx)(d.Z,{activeKey:b,tabPosition:"top",onTabClick:function(e){var n=m.filter(function(n){return n.id===e})[0];n.scenes&&(o.current=null,t(n.scenes[0]))},className:"--tabs",children:m.map(function(e){return(0,i.jsx)(d.Z.TabPane,{tab:"".concat(e.name||"N/A"),className:"itemSceneCate ".concat(b===e.id?"active":""),children:b===e.id&&h&&(0,i.jsx)(FlickityScenes,{sceneSelected:x,scenesGroupActive:k,onSetRef:function(e){if(!o.current){var n;o.current=e,null===(n=o.current)||void 0===n||n.on("staticClick",g)}}},b)},e.id)})}),(0,i.jsx)(v.H,{})]})}),S=o()(function(){return Promise.all([t.e(4055),t.e(4812),t.e(6231)]).then(t.bind(t,56231))},{loadableGenerated:{webpack:function(){return[56231]}}}),m=(0,l.memo)(function(e){var n=e.krpanoRef,t=e.onChangeScene,r=(0,l.useRef)(null),o=(0,u.v9)(a.AA),d=(0,u.v9)(a.Y2),f=(0,u.v9)(a.M9),v=(0,c._)((0,l.useState)(!1),2),m=v[0],x=v[1],b=(0,c._)((0,l.useState)(!0),2),k=b[0],p=b[1],g=(0,l.useCallback)(function(){return p(function(e){return!e})},[]),C=(0,l.useCallback)(function(){return x(function(e){return!e})},[]),N=(0,l.useCallback)(function(){var e;return null===(e=r.current)||void 0===e?void 0:e.onPrevScene()},[]),j=(0,l.useCallback)(function(){var e;return null===(e=r.current)||void 0===e?void 0:e.onNextScene()},[]);return(0,l.useEffect)(function(){var e;(null==o?void 0:o.selected)==="basekrpano"&&x(!!(null==o?void 0:null===(e=o.config)||void 0===e?void 0:e.autoOpenSceneList))},[o]),(0,i.jsxs)(s.NA,{id:"themeControlbar",className:"--controlbar-".concat(k?"on":"off"),children:[(0,i.jsxs)("div",{className:"--title hide-scrollbar",children:[(0,i.jsx)("h1",{children:(null==f?void 0:f.title)||"N/A"}),(0,i.jsx)("span",{children:" \xa0\xb7\xa0 "}),(0,i.jsx)("span",{children:(null==d?void 0:d.title)||"N/A"})]}),(0,i.jsxs)("div",{className:"--mainPanel",children:[(0,i.jsx)(h,{ref:r,onChangeScene:t,isShowListScene:m}),(0,i.jsx)(S,{krpanoRef:n,onPrevScene:N,onNextScene:j,isShowListScene:m,isShowControlbar:k,onToggleListScene:C,onToggleControlbar:g})]})]})}),x=m},85785:function(){}}]);
//# sourceMappingURL=7557.7c155524f3332b9d.js.map