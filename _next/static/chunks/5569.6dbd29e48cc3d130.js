"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5569],{55569:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var o=t(91309),u=t(85893),a=t(72253),i=t(14932),s=t(97616),r=t(67294),l=t(25617),c=t(61935),f=t(226),v=t(58673),useEventKrpano=function(e){var n=e.krpanoRef,t=(0,f.Q)({krpanoRef:n}),u=t.onUp,C=t.onDown,d=t.onLeft,h=t.onRight,g=t.onStopHorizontal,b=t.onStopVertical,k=(0,o._)((0,v.tf)("stats"),2)[1],E=(0,l.v9)(c.dm),m=(0,l.v9)(c.iV),p=(0,o._)((0,r.useState)(!1),2),y=p[0],S=p[1],A=(0,o._)((0,r.useState)(void 0),2),R=A[0],w=A[1],L=(0,r.useMemo)(function(){return m.enabled},[m.enabled]),M=(0,r.useMemo)(function(){return m.on},[m.on]),_=(0,r.useMemo)(function(){return m.waitTime},[m]),T=(0,r.useMemo)(function(){return E.enabled},[E]),P=(0,r.useMemo)(function(){return E.on},[E]),K=(0,r.useCallback)(function(){S(!0),w(+(_||3)+ +s.$y)},[_]),V=(0,r.useCallback)(function(){var e;null==n||n.getContainer().addEventListener("mousedown",K),null==n||null===(e=n.getContainer())||void 0===e||e.addEventListener("touchstart",K)},[n,K]),D=(0,r.useCallback)(function(){var e,t;null==n||null===(e=n.getContainer())||void 0===e||e.removeEventListener("mousedown",K),null==n||null===(t=n.getContainer())||void 0===t||t.removeEventListener("touchstart",K)},[n,K]),B=(0,r.useCallback)(function(e){switch(e.keyCode){case 37:case 39:g();break;case 38:case 40:b()}},[g,b]),I=(0,r.useCallback)(function(e){switch(e.keyCode){case 37:d();break;case 38:u();break;case 39:h();break;case 40:C()}},[C,d,h,u]),G=(0,r.useCallback)(function(){var e,t;null==n||null===(e=n.getContainer())||void 0===e||e.addEventListener("keyup",B),null==n||null===(t=n.getContainer())||void 0===t||t.addEventListener("keydown",I)},[n,I,B]),N=(0,r.useCallback)(function(){var e,t;null==n||null===(e=n.getContainer())||void 0===e||e.removeEventListener("keyup",B),null==n||null===(t=n.getContainer())||void 0===t||t.removeEventListener("keydown",I)},[n,I,B]),x=(0,r.useCallback)(function(){var e=null==n?void 0:n.get("plugin[gyroscope].isavailable");"boolean"==typeof e&&k(function(n){return(0,i._)((0,a._)({},n),{isGyroscopeAvailable:e})})},[n,k]);return(0,r.useMemo)(function(){return{isAutoChangeScene:M,timeChangeScene:_,enableAutoChangeScene:L,isTurnOnAutoRotate:P,enabledAutoRotate:T,timePauseChangeScene:R,setTimePauseChangeScene:w,isTemporaryPauseAutoChangeScene:y,setIsTemporaryPauseAutoChangeScene:S,onEventMoveByKeyCode:G,offEventMoveByKeyCode:N,onEventAutoChangeScene:V,offEventAutoChangeScene:D,onEventCheckGyroscopeAvailable:x}},[M,_,L,P,T,R,y,G,N,V,D,x])},C=(0,r.memo)(function(e){var n=e.isLoaded,t=e.onStartRotate,a=e.onNextScene,i=e.krpanoRef,s=(0,r.useRef)(null),l=(0,o._)((0,v.gU)("state"),1)[0],c=useEventKrpano({krpanoRef:i}),f=c.timeChangeScene,C=c.isAutoChangeScene,d=c.enableAutoChangeScene,h=c.isTurnOnAutoRotate,g=c.enabledAutoRotate,b=c.timePauseChangeScene,k=c.setTimePauseChangeScene,E=c.isTemporaryPauseAutoChangeScene,m=c.setIsTemporaryPauseAutoChangeScene,p=c.onEventAutoChangeScene,y=c.offEventAutoChangeScene,S=c.onEventMoveByKeyCode,A=c.offEventMoveByKeyCode,R=c.onEventCheckGyroscopeAvailable;return(0,r.useEffect)(function(){k(f)},[f]),(0,r.useEffect)(function(){g&&h&&n&&t()},[g,n,t]),(0,r.useEffect)(function(){return!(null==l?void 0:l.isVisibleDollhouse)&&C&&f&&n&&(s.current=setInterval(function(){a(),k(f)},1e3*(b||f)),E&&m(!1)),function(){s.current&&clearInterval(s.current)}},[n,C,E,l.isVisibleDollhouse]),(0,r.useEffect)(function(){return d&&C&&!(null==l?void 0:l.isVisibleDollhouse)&&p(),function(){C||y()}},[C,d,null==l?void 0:l.isVisibleDollhouse]),(0,r.useEffect)(function(){return S(),function(){A()}},[]),(0,r.useEffect)(function(){n&&R()},[n]),(0,u.jsx)("div",{})})}}]);
//# sourceMappingURL=5569.6dbd29e48cc3d130.js.map