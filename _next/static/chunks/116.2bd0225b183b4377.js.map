{"version":3,"file":"static/chunks/116.2bd0225b183b4377.js","mappings":"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","sources":["webpack://_N_E/./containers/Home/components/Collaboration/RequestAccessCollaboration/styled.ts","webpack://_N_E/./containers/Home/components/Collaboration/RequestAccessCollaboration/index.tsx","webpack://_N_E/./containers/Home/global/TourStats.tsx","webpack://_N_E/./containers/Home/hook/useCommentScene.tsx","webpack://_N_E/<anon>"],"sourcesContent":["/**\n *\n * styled LoadingContainer\n *\n */\nimport styled from 'styled-components';\nimport { FlexColCenter, FlexRowCenter } from '@styles/global-styles';\n\nexport const RequestAccessCollaborationWrapper = styled.div`\n  color: #fff;\n  width: 100vw;\n  height: 100vh;\n  .overlay {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    ${FlexRowCenter};\n    position: absolute;\n    // backdrop-filter: blur(4px);\n    background: rgba(0, 0, 0, 0.25);\n    .form {\n      width: 440px;\n      padding: 48px 24px 24px;\n      max-width: 90%;\n      position: relative;\n      background: rgba(0, 0, 0, 0.2);\n      background-image: linear-gradient(\n        114deg,\n        rgb(255 255 255 / 1%),\n        rgb(255 255 255 / 12%) 43%,\n        transparent 43.1%,\n        transparent\n      );\n      border-radius: 16px;\n      box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);\n      backdrop-filter: blur(10px);\n      border: 1px solid rgba(255, 255, 255, 0.46);\n    }\n    .icon {\n      position: absolute;\n      width: 56px;\n      height: 56px;\n      top: -28px;\n      left: 50%;\n      transform: translateX(-50%);\n      ${FlexRowCenter};\n      color: #fff;\n      background: var(--color-theme);\n      border-radius: 50%;\n      font-size: 1.5rem;\n      z-index: 2;\n    }\n    .content {\n      width: 100%;\n      z-index: 2;\n      ${FlexColCenter};\n      line-height: 180%;\n      text-align: center;\n      h2 {\n        color: #fff;\n      }\n      .title {\n        margin: 32px 0 12px;\n        font-weight: 500;\n        font-size: var(--fontSize-h5);\n      }\n      .action {\n        .ant-btn {\n          background: var(--color-theme);\n          color: #fff;\n          box-shadow: 0px 4px 12px rgb(0 0 0 / 0.2);\n          border-radius: 6px;\n          border: none;\n          padding: 8px 36px;\n          height: auto;\n        }\n      }\n    }\n  }\n`;\n","/**\n *\n * LoadingContainer\n *\n */\nimport { I_Scene } from '@containers/Home/types';\nimport React, { memo, useCallback, useMemo, useState } from 'react';\nimport KrpanoBasic from '@components/Krpano/KrpanoBasic';\nimport { Button } from 'antd';\nimport { useCommentScene } from '@containers/Home/hook/useCommentScene';\nimport { useCollaborationMode } from '@containers/Home/global/TourStats';\nimport { RequestAccessCollaborationWrapper } from './styled';\n\ninterface Props {\n  scene: I_Scene;\n  project_id: string;\n}\n\nexport const RequestAccessCollaboration = memo(\n  ({ scene, project_id }: Props) => {\n    const [isSuccess, setIsSuccess] = useState(false);\n    const [loading] = useCollaborationMode('loading');\n    const { onRequestAccessCollaboration } = useCommentScene();\n\n    const urlTour = useMemo(\n      () =>\n        scene?.media?.src_preview ||\n        scene?.media?.src_thumb ||\n        scene?.media?.src,\n      [scene],\n    );\n\n    const onOK = useCallback(async () => {\n      const data = await onRequestAccessCollaboration(project_id);\n      if (data.msg) setIsSuccess(true);\n    }, [onRequestAccessCollaboration, project_id]);\n\n    return (\n      <RequestAccessCollaborationWrapper>\n        <KrpanoBasic\n          urlTour={urlTour || ''}\n          scene={scene || undefined}\n          krpanoId=\"previewViewer\"\n          divId=\"previewContainer\"\n          styleContainer={{\n            height: '100%',\n            position: 'absolute',\n            width: '100%',\n            top: 0,\n            left: 0,\n          }}\n        />\n        <div className=\"overlay\">\n          <div className=\"form\">\n            <div className=\"bg\" />\n            <div className=\"icon\">\n              <i aria-hidden className=\"fas fa-lock\" />\n            </div>\n            <div className=\"content\">\n              {!isSuccess && (\n                <h2>\n                  You do not have sufficient permission to access this page\n                </h2>\n              )}\n              <div className=\"title\">\n                {isSuccess\n                  ? 'Send request access successfully!'\n                  : `Please contact this Virtual Tour's owner to ensure that collaboration is enabled\n                or you have been granted access!`}\n              </div>\n              {!isSuccess && (\n                <div className=\"action\">\n                  <Button\n                    loading={loading}\n                    disabled={loading}\n                    type=\"primary\"\n                    onClick={onOK}\n                  >\n                    Request Sharing\n                  </Button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </RequestAccessCollaborationWrapper>\n    );\n  },\n);\n\nexport default RequestAccessCollaboration;\n","import { Type_RefFuncKrpano } from '@components/Krpano/types';\nimport { createGlobalState } from 'react-hooks-global-state';\nimport { I_CommentScene, I_PayloadCommentScene } from '../types';\n\nconst { useGlobalState: useVLookatKrpano } = createGlobalState<{\n  vlookat?: number;\n}>({ vlookat: undefined });\n\nconst { useGlobalState: useHLookatKrpano } = createGlobalState<{\n  hlookat?: number;\n}>({ hlookat: undefined });\n\nconst { useGlobalState: useZoomKrpano } = createGlobalState<{ zoom?: number }>({\n  zoom: undefined,\n});\n\nconst { useGlobalState: useCollaborationMode } = createGlobalState<{\n  loading: boolean;\n  krpanoRef: Type_RefFuncKrpano | null;\n  commentSceneSelected: I_CommentScene | null;\n  isShowDialogCreateCommentScene: boolean;\n  commentSceneTemporary: I_PayloadCommentScene | null;\n}>({\n  loading: false,\n  krpanoRef: null,\n  commentSceneSelected: null,\n  isShowDialogCreateCommentScene: false,\n  commentSceneTemporary: null,\n});\n\nconst { useGlobalState: useTourStats } = createGlobalState<{\n  stats: {\n    isShowControlbar: boolean;\n    btnDirectionActive: string;\n    isGyroscopeAvailable: boolean;\n  };\n}>({\n  stats: {\n    isShowControlbar: true, // for theme\n    btnDirectionActive: '',\n    isGyroscopeAvailable: false,\n  },\n});\n\nconst { useGlobalState: useTourEventState } = createGlobalState<{\n  state: {\n    isLoaded: boolean;\n    idPostProjectSelected: string;\n    visibleDialogPostProject: boolean;\n    idPostSceneSelected: string;\n    visibleDialogPostScene: boolean;\n    isSoundOnScene: boolean;\n    isVisibleDollhouse: boolean;\n    isVisibleMap: boolean;\n    isVisibleFloorplan: boolean;\n    isVisiblePopupIntro?: boolean;\n    isActiveModeMultipleStaging: boolean;\n    descriptionHotspotSelected?: string;\n  };\n}>({\n  state: {\n    isLoaded: false,\n    //\n    idPostProjectSelected: '',\n    visibleDialogPostProject: false,\n    //\n    idPostSceneSelected: '',\n    visibleDialogPostScene: false,\n    isSoundOnScene: false,\n    //\n    isVisibleMap: true,\n    isVisibleFloorplan: true,\n    isVisibleDollhouse: false,\n    isVisiblePopupIntro: undefined,\n    isActiveModeMultipleStaging: false,\n    // hotspot compact when hover\n    descriptionHotspotSelected: undefined,\n  },\n});\n\nexport {\n  useTourStats,\n  useZoomKrpano,\n  useHLookatKrpano,\n  useVLookatKrpano,\n  useTourEventState,\n  useCollaborationMode,\n};\n","/* eslint-disable prefer-destructuring */\nimport { Type_RefFuncKrpano } from '@components/Krpano/types';\nimport { RequireSomeField } from '@type/customType';\nimport { BaseXHR } from '@utils/axios';\nimport { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useCollaborationMode } from '../global/TourStats';\nimport {\n  selectToken,\n  selectInfoUser,\n  selectIsOwnerTour,\n  selectListCommentSceneSelected,\n  selectIsAllowToAccessOnCollaborationMode,\n} from '../selectors';\nimport { actions } from '../slice';\nimport { I_CommentScene, I_PayloadCommentScene } from '../types';\n\nexport const useCommentScene = () => {\n  const dispatch = useDispatch();\n  const token = useSelector(selectToken);\n  const listCommentSceneSelected = useSelector(selectListCommentSceneSelected);\n  const infoUser = useSelector(selectInfoUser);\n  const isOwnerTour = useSelector(selectIsOwnerTour);\n  const isAllowToAccessOnCollaborationMode = useSelector(\n    selectIsAllowToAccessOnCollaborationMode,\n  );\n\n  const listCommentSceneGroupByParentRef = useRef<I_CommentScene[]>([]);\n\n  const [krpanoInstance] = useCollaborationMode('krpanoRef');\n  const [, setCommentSceneSelected] = useCollaborationMode(\n    'commentSceneSelected',\n  );\n  const [, setIsShowDialogCreateCommentScene] = useCollaborationMode(\n    'isShowDialogCreateCommentScene',\n  );\n  const [, setLoading] = useCollaborationMode('loading');\n\n  const listCommentSceneGroupByParent = useMemo(\n    () =>\n      listCommentSceneSelected\n        ?.filter(item => !item.parent)\n        ?.slice()\n        ?.sort((a, b) => a.created_at.localeCompare(b.created_at))\n        ?.map((item, index) => ({\n          ...item,\n          index: index + 1,\n          isOwnerTour,\n          isOwnerComment: item.user?.id === infoUser?.id,\n          children:\n            listCommentSceneSelected\n              ?.filter(el => el.parent === item.id)\n              ?.map(el => ({\n                ...el,\n                isOwnerTour,\n                isOwnerComment: el.user?.id === infoUser?.id,\n              }))\n              ?.slice()\n              ?.sort((a, b) => b.created_at.localeCompare(a.created_at)) || [],\n        })) || [],\n    [infoUser?.id, isOwnerTour, listCommentSceneSelected],\n  );\n\n  const listCommentSceneGroupByParentResolved = useMemo(\n    () => listCommentSceneGroupByParent.filter(item => !!item.isResolved),\n    [listCommentSceneGroupByParent],\n  );\n\n  const listCommentSceneGroupByParentActive = useMemo(\n    () => listCommentSceneGroupByParent.filter(item => !item.isResolved),\n    [listCommentSceneGroupByParent],\n  );\n\n  useEffect(() => {\n    listCommentSceneGroupByParentRef.current = listCommentSceneGroupByParent;\n  }, [listCommentSceneGroupByParent]);\n\n  const onRequestAccessCollaboration = useCallback(\n    async (project_id: string) => {\n      setLoading(true);\n      try {\n        const { data } = await BaseXHR.$post(\n          '/comment-scene/send-request-access-collab',\n          { project_id },\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          },\n        );\n        return data;\n      } finally {\n        setLoading(false);\n      }\n    },\n    [token, setLoading],\n  );\n\n  const onCreateCommentScene = useCallback(\n    async (\n      payload: Omit<I_PayloadCommentScene, 'id' | 'children'>,\n      instanceKrpano: Type_RefFuncKrpano | null = krpanoInstance,\n    ) => {\n      setLoading(true);\n      try {\n        const { data } = await BaseXHR.$post('/comment-scene/create', payload, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        dispatch(actions.createCommentScene(data.data));\n\n        let newData;\n        if (data.data.parent) {\n          const commentSelected =\n            listCommentSceneGroupByParentRef.current.filter(\n              item => item.id === data.data.parent,\n            )[0];\n          newData = {\n            ...commentSelected,\n            children: [\n              { ...data.data, isOwnerTour, isOwnerComment: true },\n              ...(commentSelected.children || []),\n            ],\n          };\n          if (instanceKrpano) instanceKrpano.onReplaceCommentScene(newData);\n        } else {\n          newData = {\n            ...data.data,\n            isOwnerTour,\n            isOwnerComment: true,\n            index: listCommentSceneGroupByParentRef.current.length + 1,\n          };\n          newData.children = [];\n          if (instanceKrpano) instanceKrpano.onAddCommentScene(newData);\n        }\n        setIsShowDialogCreateCommentScene(false);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [\n      token,\n      dispatch,\n      setLoading,\n      isOwnerTour,\n      krpanoInstance,\n      setIsShowDialogCreateCommentScene,\n    ],\n  );\n\n  const onUpdateCommentScene = useCallback(\n    async (\n      payload: RequireSomeField<I_PayloadCommentScene, 'id'>,\n      instanceKrpano: Type_RefFuncKrpano | null = krpanoInstance,\n    ) => {\n      setLoading(true);\n      try {\n        const { data } = await BaseXHR.$put('/comment-scene/update', payload, {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n        dispatch(actions.updateCommentScene(data.data));\n\n        let newData;\n        if (data.data.parent) {\n          const commentSelected =\n            listCommentSceneGroupByParentRef.current.filter(\n              item => item.id === data.data.parent,\n            )[0];\n          newData = commentSelected;\n          newData.children = newData.children.map(item =>\n            item.id === data.data.id\n              ? {\n                  ...data.data,\n                  children: [],\n                  isOwnerTour,\n                  isOwnerComment: true,\n                }\n              : item,\n          );\n        } else {\n          const commentSelected =\n            listCommentSceneGroupByParentRef.current.filter(\n              item => item.id === data.data.id,\n            )[0];\n          newData = {\n            ...commentSelected,\n            ...data.data,\n            isOwnerTour,\n            isOwnerComment: true,\n          };\n        }\n        if (instanceKrpano) instanceKrpano.onReplaceCommentScene(newData);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [krpanoInstance, setLoading, token, dispatch, isOwnerTour],\n  );\n\n  const onDeleteCommentScene = useCallback(\n    async (\n      payload: I_CommentScene,\n      instanceKrpano: Type_RefFuncKrpano | null = krpanoInstance,\n      isClosePopoverOnKrpano = false,\n    ) => {\n      setLoading(true);\n      try {\n        await BaseXHR.$delete(\n          '/comment-scene/delete',\n          { id: payload.id },\n          {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          },\n        );\n        dispatch(actions.deleteCommentScene(payload));\n\n        let newData;\n        if (payload.parent) {\n          const commentSelected =\n            listCommentSceneGroupByParentRef.current.filter(\n              item => item.id === payload.parent,\n            )[0];\n          newData = commentSelected;\n          newData.children = newData.children.filter(\n            item => item.id !== payload.id,\n          );\n          if (instanceKrpano) instanceKrpano.onReplaceCommentScene(newData);\n        } else if (instanceKrpano)\n          instanceKrpano.onRemoveCommentScene(payload.id);\n\n        if (isClosePopoverOnKrpano) setCommentSceneSelected(null);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [token, dispatch, setLoading, krpanoInstance, setCommentSceneSelected],\n  );\n\n  return useMemo(\n    () => ({\n      isOwnerTour,\n      onCreateCommentScene,\n      onUpdateCommentScene,\n      onDeleteCommentScene,\n      listCommentSceneGroupByParent,\n      onRequestAccessCollaboration,\n      isAllowToAccessOnCollaborationMode,\n      listCommentSceneGroupByParentActive,\n      listCommentSceneGroupByParentResolved,\n    }),\n    [\n      isOwnerTour,\n      onCreateCommentScene,\n      onUpdateCommentScene,\n      onDeleteCommentScene,\n      onRequestAccessCollaboration,\n      listCommentSceneGroupByParent,\n      isAllowToAccessOnCollaborationMode,\n      listCommentSceneGroupByParentActive,\n      listCommentSceneGroupByParentResolved,\n    ],\n  );\n};\n"],"names":["RequestAccessCollaborationWrapper","styled","div","withConfig","FlexRowCenter","FlexColCenter","RequestAccessCollaboration","memo","param","scene","project_id","useState","isSuccess","setIsSuccess","loading","useCollaborationMode","onRequestAccessCollaboration","useCommentScene","urlTour","useMemo","media","src_preview","src_thumb","src","onOK","useCallback","_async_to_generator","_","data","sent","msg","jsx_runtime","jsxs","jsx","KrpanoBasic","undefined","krpanoId","divId","styleContainer","height","position","width","top","left","className","i","aria-hidden","h2","Button","disabled","type","onClick","Collaboration_RequestAccessCollaboration","useGlobalState","createGlobalState","vlookat","hlookat","zoom","krpanoRef","commentSceneSelected","isShowDialogCreateCommentScene","commentSceneTemporary","stats","isShowControlbar","btnDirectionActive","isGyroscopeAvailable","state","isLoaded","idPostProjectSelected","visibleDialogPostProject","idPostSceneSelected","visibleDialogPostScene","isSoundOnScene","isVisibleMap","isVisibleFloorplan","isVisibleDollhouse","isVisiblePopupIntro","isActiveModeMultipleStaging","descriptionHotspotSelected","dispatch","useDispatch","token","useSelector","selectToken","listCommentSceneSelected","selectListCommentSceneSelected","infoUser","selectInfoUser","isOwnerTour","selectIsOwnerTour","isAllowToAccessOnCollaborationMode","selectIsAllowToAccessOnCollaborationMode","listCommentSceneGroupByParentRef","useRef","krpanoInstance","setCommentSceneSelected","setIsShowDialogCreateCommentScene","setLoading","listCommentSceneGroupByParent","filter","item","parent","slice","sort","a","b","created_at","localeCompare","map","index","_swc_helpers_object_spread_props__WEBPACK_IMPORTED_MODULE_7__","_swc_helpers_object_spread__WEBPACK_IMPORTED_MODULE_8__","isOwnerComment","user","id","children","el","listCommentSceneGroupByParentResolved","isResolved","listCommentSceneGroupByParentActive","useEffect","current","_swc_helpers_async_to_generator__WEBPACK_IMPORTED_MODULE_9__","BaseXHR","$post","headers","Authorization","concat","_state","onCreateCommentScene","payload","instanceKrpano","newData","commentSelected","actions","createCommentScene","_swc_helpers_to_consumable_array__WEBPACK_IMPORTED_MODULE_11__","onReplaceCommentScene","length","onAddCommentScene","onUpdateCommentScene","$put","updateCommentScene","onDeleteCommentScene","isClosePopoverOnKrpano","$delete","deleteCommentScene","onRemoveCommentScene"],"sourceRoot":""}