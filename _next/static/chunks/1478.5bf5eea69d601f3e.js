"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1478],{11478:function(e,n,o){o.r(n);var l=o(91309),i=o(85893),a=o(67294),r=o(97616),t=o(5152),c=o.n(t),u=o(58673),s=o(33433),d=o(25617),f=o(61935),v=o(94016),m=o(65744),p=c()(function(){return Promise.all([o.e(5400),o.e(4737),o.e(400),o.e(3507)]).then(o.bind(o,53507))},{loadableGenerated:{webpack:function(){return[53507]}}}),h=c()(function(){return o.e(8481).then(o.bind(o,8481))},{loadableGenerated:{webpack:function(){return[8481]}}}),k=(0,a.memo)(function(e){var n=e.onChangeScene,o=(0,a.useRef)(null),t=(0,d.v9)(f.AA),c=(0,l._)((0,u.gU)("state"),1)[0],k=(0,s.O)({floorplanRef:o}),g=k.visiblePopup,b=k.sceneSelected,C=k.listFloorplan,x=k.markerSelected,j=k.configFloorplan,S=k.floorplanSelected,_=k.configDisplayPanel,N=k.onCenterToMarkerActive,F=k.onChangeFloorplan,I=k.onCloseFloorplan,w=k.onClosePopup,y=k.onOpenPopup,M=k.onZoomOut,Z=k.onZoomIn;return(0,i.jsxs)(v.YD,{bgColor:(null==j?void 0:j.bgColor)||r.QI.bgColor,position:(null==_?void 0:_.position)||"left",className:"".concat(c.isVisibleFloorplan?"":"hide"," ").concat((null==t?void 0:t.selected)==="basekrpano"?"basekrpano":(null==t?void 0:t.selected)==="custom1"?"custom1":(null==t?void 0:t.selected)==="wall"?"wall":"default"),children:[(0,i.jsx)("div",{className:"main",children:S&&(0,i.jsx)(m.Z,{zoom:1,ref:o,sceneSelected:b,markerSelected:x,floorplanSelected:S,configFloorplan:j,onChangeScene:n})}),(0,i.jsxs)(v.Ko,{children:[(0,i.jsx)("div",{className:"--left",children:(0,i.jsx)(p,{menuActive:[(null==S?void 0:S.id)||""],listMenu:C.map(function(e){return{type:e.id,classIcon:"far fa-layer-group",label:e.name}}),onClick:F,children:(0,i.jsxs)("div",{className:"action--item --select",children:[(0,i.jsx)("span",{children:(null==S?void 0:S.name)||"---"}),(0,i.jsx)("i",{"aria-hidden":!0,className:"fas fa-caret-down"})]})})}),(0,i.jsxs)("div",{className:"--right",children:[(0,i.jsx)("div",{className:"action--item",onClick:Z,children:(0,i.jsx)("i",{"aria-hidden":!0,className:"far fa-search-plus"})}),(0,i.jsx)("div",{className:"action--item",onClick:M,children:(0,i.jsx)("i",{"aria-hidden":!0,className:"far fa-search-minus"})}),(0,i.jsx)("div",{className:"action--item",onClick:N,children:(0,i.jsx)("i",{"aria-hidden":!0,className:"far fa-crosshairs"})}),(0,i.jsx)("div",{className:"action--item",onClick:y,children:(0,i.jsx)("i",{"aria-hidden":!0,className:"far fa-expand"})}),(0,i.jsx)("div",{className:"action--item",onClick:I,children:(0,i.jsx)("i",{"aria-hidden":!0,className:"far fa-times"})})]})]}),g&&(0,i.jsx)(h,{visible:g,listFloorplan:C,markerSelected:x,floorplanSelected:S,configFloorplan:j,onChangeFloorplan:F,onChangeScene:n,onCancel:w})]})});n.default=k},65744:function(e,n,o){var l=o(72253),i=o(91309),a=o(85893),r=o(67294),t=o(25617),c=o(26126),u=o(5152),s=o.n(u),d=o(97616),f=o(61935),v=o(94016),m=s()(function(){return o.e(2341).then(o.bind(o,92341))},{loadableGenerated:{webpack:function(){return[92341]}}}),p=(0,r.forwardRef)(function(e,n){var o,u=e.configFloorplan,s=e.floorplanSelected,p=e.sceneSelected,h=e.markerSelected,k=e.onChangeScene,g=e.zoom,b=void 0===g?1.5:g,C=e.minZoom,x=e.maxZoom,j=(0,i._)((0,r.useState)(!1),2),S=j[0],_=j[1],N=(0,r.useRef)(null),F=(0,t.v9)(f.U9),I=(0,r.useMemo)(function(){return(0,l._)({},d.QI.radar,null==u?void 0:u.radar)},[null==u?void 0:u.radar]),w=(0,r.useMemo)(function(){return(0,l._)({},d.QI.marker,null==u?void 0:u.marker)},[null==u?void 0:u.marker]);(0,r.useEffect)(function(){h&&S&&setTimeout(function(){var e,n,o,l=(null===(n=N.current)||void 0===n?void 0:null===(e=n.state)||void 0===e?void 0:e.scale)||b;h.id&&(null===(o=N.current)||void 0===o||o.zoomToElement(h.id,l))},200)},[S,h]),(0,r.useImperativeHandle)(n,function(){return{getInstance:function(){return N.current}}});var y=(0,r.useCallback)(function(e){var n=F.filter(function(n){return n.id===e.target_scene_id})[0];n&&k(n)},[F,k]);return(0,a.jsx)(c.d$,{centerZoomedOut:!0,initialScale:b,ref:N,wheel:{disabled:!0},pinch:{disabled:!0},doubleClick:{disabled:!0},minScale:void 0===C?1:C,maxScale:void 0===x?2:x,alignmentAnimation:{animationTime:150,animationType:"linear"},children:(0,a.jsx)(c.Uv,{wrapperStyle:{width:"100%",height:"100%"},children:(0,a.jsxs)(v.Zs,{children:[(0,a.jsx)("img",{src:null==s?void 0:s.src,alt:"test",onLoad:function(){return _(!0)}}),null==s?void 0:null===(o=s.markers)||void 0===o?void 0:o.map(function(e){return(0,a.jsx)(m,{marker:e,onClick:y,configRadar:I,configMarker:w,northRadar:(null==p?void 0:p.north_ath)||0,isTurnOnRadar:!!I.isEnabled,isActive:(null==h?void 0:h.id)===e.id},e.id)})]})})})});n.Z=(0,r.memo)(p)},33433:function(e,n,o){o.d(n,{O:function(){return useEventFloorplan}});var l=o(72253),i=o(14932),a=o(91309),r=o(67294),t=o(25617),c=o(58673),u=o(61935),useEventFloorplan=function(e){var n=e.floorplanRef,o=(0,t.v9)(u.f5),s=(0,t.v9)(u.Y2),d=(0,t.v9)(u.u$),f=(0,a._)((0,c.gU)("state"),2)[1],v=(0,a._)((0,r.useState)(void 0),2),m=v[0],p=v[1];(0,r.useEffect)(function(){p(o&&(o.filter(function(e){var n;return(null===(n=e.markers)||void 0===n?void 0:n.filter(function(e){return e.target_scene_id===(null==s?void 0:s.id)}).length)>0})[0]||o[0])||void 0)},[o,null==s?void 0:s.id]);var h=(0,r.useMemo)(function(){var e;return(null==m?void 0:null===(e=m.markers)||void 0===e?void 0:e.filter(function(e){return e.target_scene_id===(null==s?void 0:s.id)})[0])||void 0},[m,null==s?void 0:s.id]),k=(0,r.useMemo)(function(){var e;return(null==d?void 0:null===(e=d.floorplan)||void 0===e?void 0:e.type)==="panel"?null==d?void 0:d.floorplan:void 0},[null==d?void 0:d.floorplan]),g=(0,r.useMemo)(function(){var e;return(null==d?void 0:null===(e=d.floorplan)||void 0===e?void 0:e.type)==="box"?(0,l._)({},{offsetBottom:48,offsetLeft:10,offsetRight:10,offsetTop:10},null==d?void 0:d.floorplan):void 0},[null==d?void 0:d.floorplan]),b=(0,a._)((0,r.useState)(!1),2),C=b[0],x=b[1],j=(0,r.useCallback)(function(){f(function(e){return(0,i._)((0,l._)({},e),{isVisibleFloorplan:!1})})},[f]),S=(0,r.useCallback)(function(){return x(!0)},[]),_=(0,r.useCallback)(function(){return x(!1)},[]),N=(0,r.useCallback)(function(){var e;return null===(e=n.current)||void 0===e?void 0:e.getInstance().zoomIn()},[n]),F=(0,r.useCallback)(function(){var e;return null===(e=n.current)||void 0===e?void 0:e.getInstance().zoomOut()},[n]),I=(0,r.useCallback)(function(){var e,o,l,i=null===(e=n.current)||void 0===e?void 0:e.getInstance().state.scale;(null==h?void 0:h.id)&&(null===(l=n.current)||void 0===l||null===(o=l.getInstance())||void 0===o||o.zoomToElement(h.id,i||void 0))},[n,h]),w=(0,r.useCallback)(function(e){var n=e.type,l=o.filter(function(e){return e.id===n})[0];l&&p(l)},[o]);return(0,r.useMemo)(function(){return{visiblePopup:C,sceneSelected:s,listFloorplan:o,markerSelected:h,configFloorplan:d,configDisplayBox:g,floorplanSelected:m,configDisplayPanel:k,onCenterToMarkerActive:I,onChangeFloorplan:w,onCloseFloorplan:j,onClosePopup:_,onOpenPopup:S,onZoomOut:F,onZoomIn:N}},[C,s,o,h,d,g,m,k,I,w,j,_,S,F,N])}}}]);
//# sourceMappingURL=1478.5bf5eea69d601f3e.js.map